{
  "{\"sourceRoot\":\"D:\\\\Webstorm\\\\poetryWeb\\\\test\\\\functional\\\\api\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Webstorm\\\\poetryWeb\",\"filename\":\"D:\\\\Webstorm\\\\poetryWeb\\\\test\\\\functional\\\\api\\\\authorsTest.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"test \",\"root\":\"D:\\\\Webstorm\\\\poetryWeb\",\"plugins\":[],\"presets\":[]}:7.3.4:test ": {
    "metadata": {},
    "options": {
      "sourceRoot": "D:\\Webstorm\\poetryWeb\\test\\functional\\api",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "D:\\Webstorm\\poetryWeb",
      "filename": "D:\\Webstorm\\poetryWeb\\test\\functional\\api\\authorsTest.js",
      "babelrc": false,
      "configFile": false,
      "envName": "test ",
      "root": "D:\\Webstorm\\poetryWeb",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\Webstorm\\poetryWeb\\test\\functional\\api\\authorsTest.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "D:\\Webstorm\\poetryWeb\\test\\functional\\api\\authorsTest.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\Webstorm\\poetryWeb\\test\\functional\\api",
        "sourceFileName": "authorsTest.js"
      }
    },
    "ast": null,
    "code": "const chai = require(\"chai\");\n\nconst expect = chai.expect;\n\nconst request = require(\"supertest\");\n\nlet Author = require(\"../../../models/authors\");\n\nlet mockSession = require('mock-session');\n\nconst _ = require(\"lodash\");\n\nlet server = require(\"../../../bin/www\");\n\nlet mongod;\nlet db, validID;\n\nvar app = require('../../../app');\n\ndescribe(\"Authors\", () => {\n  beforeEach(async () => {\n    try {\n      await Author.deleteMany({});\n      let author = new Author();\n      author.name = \"Yeats\";\n      author.introduction = \"Irish poet and one of the foremost figures of 20th-century literature. \" + \"A pillar of the Irish literary establishment, he helped to found the Abbey Theatre, \" + \"and in his later years served two terms as a Senator of the Irish Free State.\";\n      await author.save();\n      author = new Author();\n      author.name = \"Du Fu\";\n      author.introduction = \"Du Fu was a prominent Chinese poet of the Tang dynasty.\";\n      await author.save();\n      author = await Author.findOne({\n        name: \"Yeats\"\n      });\n      validID = author._id;\n    } catch (error) {\n      console.log(error);\n    }\n  });\n  describe(\"GET /authors\", () => {\n    it(\"should return all the authors\", done => {\n      request(server).get(\"/authors\").set(\"Accept\", \"application/json\").expect(\"Content-Type\", /json/).expect(200).end((err, res) => {\n        try {\n          expect(res.body).to.be.a(\"array\");\n          expect(res.body.length).to.equal(2);\n\n          let result = _.map(res.body, author => {\n            return {\n              name: author.name\n            };\n          });\n\n          expect(result).to.deep.include({\n            name: \"Yeats\"\n          });\n          expect(result).to.deep.include({\n            name: \"Du Fu\"\n          });\n          done();\n        } catch (e) {\n          done(e);\n        }\n      });\n    });\n  });\n  describe(\"GET /authors/:id\", () => {\n    describe(\"when the id is valid\", () => {\n      it(\"should return the matching author\", done => {\n        request(server).get(`/authors/${validID}`).set(\"Accept\", \"application/json\").expect(\"Content-Type\", /json/).expect(200).end((err, res) => {\n          expect(res.body[0]).to.have.property(\"name\", \"Yeats\");\n          done(err);\n        });\n      });\n    });\n    describe(\"when the id is invalid\", () => {\n      it(\"should return the NOT found message\", done => {\n        request(server).get(\"/authors/9999\").set(\"Accept\", \"application/json\").expect(\"Content-Type\", /json/).expect(200).end((err, res) => {\n          expect(res.body.message).equals(\"Author NOT Found!\");\n          done(err);\n        });\n      });\n    });\n  });\n  describe(\"POST /authors\", () => {\n    it(\"should return confirmation message and update datastore\", () => {\n      const author = {\n        name: \"Shakespeare\",\n        introduction: \"Great Great English play writer and poet\"\n      };\n      return request(server).post(\"/authors\").send(author).expect(200).then(res => {\n        expect(res.body.message).equals(\"Author Successfully Added!\");\n        validID = res.body.data._id;\n      });\n    });\n    after(() => {\n      return request(server).get(`/authors/${validID}`).expect(200).then(res => {\n        expect(res.body[0]).to.have.property(\"name\", \"Shakespeare\");\n        expect(res.body[0]).to.have.property(\"introduction\", \"Great Great English play writer and poet\");\n      });\n    });\n  });\n  describe.only(\"PUT /authors/:id/deleteWork\", () => {\n    describe(\"when the id is valid\", () => {\n      it(\"should return a message and the author work is added\", () => {\n        const poemId = {\n          poemId: \"5dc14e4fb7ee92384c501889\"\n        };\n        return request(server).put(`/authors/${validID}/deleteWork`).send(poemId).expect(200).then(resp => {\n          expect(resp.body).to.include({\n            message: \"Work Successfully deleted!\"\n          });\n        });\n      });\n    });\n    describe(\"when the id is invalid\", () => {\n      it(\"should return information is wrong\", () => {\n        const poemId = {\n          poemId: \"5dc14e4fb7ee92384c501889\"\n        };\n        return request(server).put(`/authors/34343/deleteWork`).send(poemId).expect(200).then(res => {\n          expect(res.body.message).equals(\"Author NOT Found!\");\n        });\n      });\n    });\n  });\n  describe(\"PUT /authors/:id/works\", () => {\n    describe(\"when the id is valid\", () => {\n      it(\"should return a message and the author work is added\", () => {\n        const poemId = {\n          poemId: \"5dc14e4fb7ee92384c501889\"\n        };\n        return request(server).put(`/authors/${validID}/works`).send(poemId).expect(200).then(resp => {\n          expect(resp.body).to.include({\n            message: \"Work Successfully Added!\"\n          });\n          expect(resp.body.data.works[0]).equals(\"5dc14e4fb7ee92384c501889\");\n        });\n      });\n      after(() => {\n        return request(server).get(`/authors/${validID}`).set(\"Accept\", \"application/json\").expect(\"Content-Type\", /json/).expect(200).then(resp => {\n          expect(resp.body[0].works[0]).equals(\"5dc14e4fb7ee92384c501889\");\n        });\n      });\n    });\n    describe(\"when the id is invalid\", () => {\n      it(\"should return information is wrong\", () => {\n        const poemId = {\n          poemId: \"5dc14e4fb7ee92384c501889\"\n        };\n        return request(server).put(`/authors/34343/works`).send(poemId).expect(200).then(res => {\n          expect(res.body.message).equals(\"Author NOT Found!\");\n        });\n      });\n    });\n  });\n  /*describe.only(\"PUT /authors/:id/like\", () => {\r\n      describe(\"when the id is valid\", () => {\r\n          it(\"should return a message and the author is liked\", () => {\r\n              const userCredentials = {\r\n                  email: 'LovYeats@lala.com',\r\n                  password: 'trytry123'\r\n              }\r\n              var authenticatedUser = request.agent(app);\r\n              before(function(done){\r\n                  authenticatedUser\r\n                      .post('/users/login')\r\n                      .send(userCredentials)\r\n                      .end(function(err, response){\r\n                          expect(response.statusCode).to.equal(200);\r\n                          done();\r\n                      });\r\n              });\r\n              authenticatedUser.put(`/authors/${validID}/like`)\r\n                  .expect(200)\r\n                  .then(resp => {\r\n                      expect(resp.body).to.include({message: \"Author Successfully Liked!\"});\r\n                  });\r\n          });\r\n          after(() => {\r\n              return request(server)\r\n                  .get(`/authors/${validID}`)\r\n                  .set(\"Accept\", \"application/json\")\r\n                  .expect(\"Content-Type\", /json/)\r\n                  .expect(200)\r\n                  .then(resp => {\r\n                      expect(resp.body[0].works[0]).equals(\"5dc14e4fb7ee92384c501889\");\r\n                  });\r\n          });\r\n      });*/\n\n  /*describe(\"when the id is invalid\", () => {\r\n      it(\"should return information is wrong\", () => {\r\n          const poemId = {poemId: \"5dc14e4fb7ee92384c501889\"};\r\n          return request(server)\r\n              .put(`/authors/34343/works`)\r\n              .send(poemId)\r\n              .expect(200)\r\n              .then(res => {\r\n                  expect(res.body.message).equals(\"Author NOT Found!\");\r\n              });\r\n      });\r\n  });\r\n  });*/\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhvcnNUZXN0LmpzIl0sIm5hbWVzIjpbImNoYWkiLCJyZXF1aXJlIiwiZXhwZWN0IiwicmVxdWVzdCIsIkF1dGhvciIsIm1vY2tTZXNzaW9uIiwiXyIsInNlcnZlciIsIm1vbmdvZCIsImRiIiwidmFsaWRJRCIsImFwcCIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImRlbGV0ZU1hbnkiLCJhdXRob3IiLCJuYW1lIiwiaW50cm9kdWN0aW9uIiwic2F2ZSIsImZpbmRPbmUiLCJfaWQiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJpdCIsImRvbmUiLCJnZXQiLCJzZXQiLCJlbmQiLCJlcnIiLCJyZXMiLCJib2R5IiwidG8iLCJiZSIsImEiLCJsZW5ndGgiLCJlcXVhbCIsInJlc3VsdCIsIm1hcCIsImRlZXAiLCJpbmNsdWRlIiwiZSIsImhhdmUiLCJwcm9wZXJ0eSIsIm1lc3NhZ2UiLCJlcXVhbHMiLCJwb3N0Iiwic2VuZCIsInRoZW4iLCJkYXRhIiwiYWZ0ZXIiLCJvbmx5IiwicG9lbUlkIiwicHV0IiwicmVzcCIsIndvcmtzIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxJQUFJLEdBQUdDLE9BQU8sQ0FBQyxNQUFELENBQXBCOztBQUNBLE1BQU1DLE1BQU0sR0FBR0YsSUFBSSxDQUFDRSxNQUFwQjs7QUFDQSxNQUFNQyxPQUFPLEdBQUdGLE9BQU8sQ0FBQyxXQUFELENBQXZCOztBQUNBLElBQUlHLE1BQU0sR0FBR0gsT0FBTyxDQUFDLHlCQUFELENBQXBCOztBQUNBLElBQUlJLFdBQVcsR0FBR0osT0FBTyxDQUFDLGNBQUQsQ0FBekI7O0FBRUEsTUFBTUssQ0FBQyxHQUFHTCxPQUFPLENBQUMsUUFBRCxDQUFqQjs7QUFDQSxJQUFJTSxNQUFNLEdBQUdOLE9BQU8sQ0FBQyxrQkFBRCxDQUFwQjs7QUFDQSxJQUFJTyxNQUFKO0FBQ0EsSUFBSUMsRUFBSixFQUFRQyxPQUFSOztBQUNBLElBQUlDLEdBQUcsR0FBR1YsT0FBTyxDQUFDLGNBQUQsQ0FBakI7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LE1BQUFBLEVBQUUsQ0FBQyxvQ0FBRCxFQUF1QyxNQUFNO0FBQzNDLGNBQU00QixNQUFNLEdBQUc7QUFBQ0EsVUFBQUEsTUFBTSxFQUFFO0FBQVQsU0FBZjtBQUNBLGVBQU9qRCxPQUFPLENBQUNJLE1BQUQsQ0FBUCxDQUNGOEMsR0FERSxDQUNHLHNCQURILEVBRUZOLElBRkUsQ0FFR0ssTUFGSCxFQUdGbEQsTUFIRSxDQUdLLEdBSEwsRUFJRjhDLElBSkUsQ0FJR2xCLEdBQUcsSUFBSTtBQUNUNUIsVUFBQUEsTUFBTSxDQUFDNEIsR0FBRyxDQUFDQyxJQUFKLENBQVNhLE9BQVYsQ0FBTixDQUF5QkMsTUFBekIsQ0FBZ0MsbUJBQWhDO0FBQ0gsU0FORSxDQUFQO0FBT0gsT0FUQyxDQUFGO0FBVUgsS0FYTyxDQUFSO0FBWUgsR0FwQ08sQ0FBUjtBQXNDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFrQ0k7Ozs7Ozs7Ozs7Ozs7QUFhUCxDQXBOTyxDQUFSIiwic291cmNlUm9vdCI6IkQ6XFxXZWJzdG9ybVxccG9ldHJ5V2ViXFx0ZXN0XFxmdW5jdGlvbmFsXFxhcGkiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjaGFpID0gcmVxdWlyZShcImNoYWlcIik7XHJcbmNvbnN0IGV4cGVjdCA9IGNoYWkuZXhwZWN0O1xyXG5jb25zdCByZXF1ZXN0ID0gcmVxdWlyZShcInN1cGVydGVzdFwiKTtcclxubGV0IEF1dGhvciA9IHJlcXVpcmUoXCIuLi8uLi8uLi9tb2RlbHMvYXV0aG9yc1wiKTtcclxubGV0IG1vY2tTZXNzaW9uID0gcmVxdWlyZSgnbW9jay1zZXNzaW9uJyk7XHJcblxyXG5jb25zdCBfID0gcmVxdWlyZShcImxvZGFzaFwiKTtcclxubGV0IHNlcnZlciA9IHJlcXVpcmUoXCIuLi8uLi8uLi9iaW4vd3d3XCIpO1xyXG5sZXQgbW9uZ29kO1xyXG5sZXQgZGIsIHZhbGlkSUQ7XHJcbnZhciBhcHAgPSByZXF1aXJlKCcuLi8uLi8uLi9hcHAnKTtcclxuXHJcbmRlc2NyaWJlKFwiQXV0aG9yc1wiLCAoKSA9PiB7XHJcbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCBBdXRob3IuZGVsZXRlTWFueSh7fSk7XHJcbiAgICAgICAgICAgIGxldCBhdXRob3IgPSBuZXcgQXV0aG9yKCk7XHJcbiAgICAgICAgICAgIGF1dGhvci5uYW1lID0gXCJZZWF0c1wiO1xyXG4gICAgICAgICAgICBhdXRob3IuaW50cm9kdWN0aW9uID0gXCJJcmlzaCBwb2V0IGFuZCBvbmUgb2YgdGhlIGZvcmVtb3N0IGZpZ3VyZXMgb2YgMjB0aC1jZW50dXJ5IGxpdGVyYXR1cmUuIFwiICtcclxuICAgICAgICAgICAgXCJBIHBpbGxhciBvZiB0aGUgSXJpc2ggbGl0ZXJhcnkgZXN0YWJsaXNobWVudCwgaGUgaGVscGVkIHRvIGZvdW5kIHRoZSBBYmJleSBUaGVhdHJlLCBcIiArXHJcbiAgICAgICAgICAgIFwiYW5kIGluIGhpcyBsYXRlciB5ZWFycyBzZXJ2ZWQgdHdvIHRlcm1zIGFzIGEgU2VuYXRvciBvZiB0aGUgSXJpc2ggRnJlZSBTdGF0ZS5cIjtcclxuICAgICAgICAgICAgYXdhaXQgYXV0aG9yLnNhdmUoKTtcclxuXHJcbiAgICAgICAgICAgIGF1dGhvciA9IG5ldyBBdXRob3IoKTtcclxuICAgICAgICAgICAgYXV0aG9yLm5hbWUgPSBcIkR1IEZ1XCI7XHJcbiAgICAgICAgICAgIGF1dGhvci5pbnRyb2R1Y3Rpb24gPSBcIkR1IEZ1IHdhcyBhIHByb21pbmVudCBDaGluZXNlIHBvZXQgb2YgdGhlIFRhbmcgZHluYXN0eS5cIjtcclxuICAgICAgICAgICAgYXdhaXQgYXV0aG9yLnNhdmUoKTtcclxuXHJcbiAgICAgICAgICAgIGF1dGhvciA9IGF3YWl0IEF1dGhvci5maW5kT25lKHsgbmFtZTpcIlllYXRzXCIgfSk7XHJcbiAgICAgICAgICAgIHZhbGlkSUQgPSBhdXRob3IuX2lkO1xyXG5cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoXCJHRVQgL2F1dGhvcnNcIiwgKCkgPT4ge1xyXG4gICAgICAgIGl0KFwic2hvdWxkIHJldHVybiBhbGwgdGhlIGF1dGhvcnNcIiwgZG9uZSA9PiB7XHJcbiAgICAgICAgICAgIHJlcXVlc3Qoc2VydmVyKVxyXG4gICAgICAgICAgICAgICAgLmdldChcIi9hdXRob3JzXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0KFwiQWNjZXB0XCIsIFwiYXBwbGljYXRpb24vanNvblwiKVxyXG4gICAgICAgICAgICAgICAgLmV4cGVjdChcIkNvbnRlbnQtVHlwZVwiLCAvanNvbi8pXHJcbiAgICAgICAgICAgICAgICAuZXhwZWN0KDIwMClcclxuICAgICAgICAgICAgICAgIC5lbmQoKGVyciwgcmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3QocmVzLmJvZHkpLnRvLmJlLmEoXCJhcnJheVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHJlcy5ib2R5Lmxlbmd0aCkudG8uZXF1YWwoMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSBfLm1hcChyZXMuYm9keSwgYXV0aG9yID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IG5hbWU6IGF1dGhvci5uYW1lfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvLmRlZXAuaW5jbHVkZSh7IG5hbWU6IFwiWWVhdHNcIiB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG8uZGVlcC5pbmNsdWRlKHsgbmFtZTogXCJEdSBGdVwiIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb25lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb25lKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoXCJHRVQgL2F1dGhvcnMvOmlkXCIsICgpID0+IHtcclxuICAgICAgICBkZXNjcmliZShcIndoZW4gdGhlIGlkIGlzIHZhbGlkXCIsICgpID0+IHtcclxuICAgICAgICAgICAgaXQoXCJzaG91bGQgcmV0dXJuIHRoZSBtYXRjaGluZyBhdXRob3JcIiwgZG9uZSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0KHNlcnZlcilcclxuICAgICAgICAgICAgICAgICAgICAuZ2V0KGAvYXV0aG9ycy8ke3ZhbGlkSUR9YClcclxuICAgICAgICAgICAgICAgICAgICAuc2V0KFwiQWNjZXB0XCIsIFwiYXBwbGljYXRpb24vanNvblwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5leHBlY3QoXCJDb250ZW50LVR5cGVcIiwgL2pzb24vKVxyXG4gICAgICAgICAgICAgICAgICAgIC5leHBlY3QoMjAwKVxyXG4gICAgICAgICAgICAgICAgICAgIC5lbmQoKGVyciwgcmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdChyZXMuYm9keVswXSkudG8uaGF2ZS5wcm9wZXJ0eShcIm5hbWVcIixcIlllYXRzXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb25lKGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRlc2NyaWJlKFwid2hlbiB0aGUgaWQgaXMgaW52YWxpZFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGl0KFwic2hvdWxkIHJldHVybiB0aGUgTk9UIGZvdW5kIG1lc3NhZ2VcIiwgZG9uZSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0KHNlcnZlcilcclxuICAgICAgICAgICAgICAgICAgICAuZ2V0KFwiL2F1dGhvcnMvOTk5OVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXQoXCJBY2NlcHRcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmV4cGVjdChcIkNvbnRlbnQtVHlwZVwiLCAvanNvbi8pXHJcbiAgICAgICAgICAgICAgICAgICAgLmV4cGVjdCgyMDApXHJcbiAgICAgICAgICAgICAgICAgICAgLmVuZCgoZXJyLCByZXMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHJlcy5ib2R5Lm1lc3NhZ2UpLmVxdWFscyhcIkF1dGhvciBOT1QgRm91bmQhXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb25lKGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICBkZXNjcmliZShcIlBPU1QgL2F1dGhvcnNcIiwgKCkgPT4ge1xyXG4gICAgICAgIGl0KFwic2hvdWxkIHJldHVybiBjb25maXJtYXRpb24gbWVzc2FnZSBhbmQgdXBkYXRlIGRhdGFzdG9yZVwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGF1dGhvciA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6XCJTaGFrZXNwZWFyZVwiLFxyXG4gICAgICAgICAgICAgICAgaW50cm9kdWN0aW9uOlwiR3JlYXQgR3JlYXQgRW5nbGlzaCBwbGF5IHdyaXRlciBhbmQgcG9ldFwiXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJldHVybiByZXF1ZXN0KHNlcnZlcilcclxuICAgICAgICAgICAgICAgIC5wb3N0KFwiL2F1dGhvcnNcIilcclxuICAgICAgICAgICAgICAgIC5zZW5kKGF1dGhvcilcclxuICAgICAgICAgICAgICAgIC5leHBlY3QoMjAwKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QocmVzLmJvZHkubWVzc2FnZSkuZXF1YWxzKFwiQXV0aG9yIFN1Y2Nlc3NmdWxseSBBZGRlZCFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRJRCA9IHJlcy5ib2R5LmRhdGEuX2lkO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYWZ0ZXIoKCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVxdWVzdChzZXJ2ZXIpXHJcbiAgICAgICAgICAgICAgICAuZ2V0KGAvYXV0aG9ycy8ke3ZhbGlkSUR9YClcclxuICAgICAgICAgICAgICAgIC5leHBlY3QoMjAwKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBleHBlY3QocmVzLmJvZHlbMF0pLnRvLmhhdmUucHJvcGVydHkoXCJuYW1lXCIsIFwiU2hha2VzcGVhcmVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHJlcy5ib2R5WzBdKS50by5oYXZlLnByb3BlcnR5KFwiaW50cm9kdWN0aW9uXCIsXCJHcmVhdCBHcmVhdCBFbmdsaXNoIHBsYXkgd3JpdGVyIGFuZCBwb2V0XCIpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIGRlc2NyaWJlLm9ubHkoXCJQVVQgL2F1dGhvcnMvOmlkL2RlbGV0ZVdvcmtcIiwgKCkgPT4ge1xyXG4gICAgICAgIGRlc2NyaWJlKFwid2hlbiB0aGUgaWQgaXMgdmFsaWRcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBpdChcInNob3VsZCByZXR1cm4gYSBtZXNzYWdlIGFuZCB0aGUgYXV0aG9yIHdvcmsgaXMgYWRkZWRcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcG9lbUlkID0ge3BvZW1JZDogXCI1ZGMxNGU0ZmI3ZWU5MjM4NGM1MDE4ODlcIn07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdChzZXJ2ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnB1dChgL2F1dGhvcnMvJHt2YWxpZElEfS9kZWxldGVXb3JrYClcclxuICAgICAgICAgICAgICAgICAgICAuc2VuZChwb2VtSWQpXHJcbiAgICAgICAgICAgICAgICAgICAgLmV4cGVjdCgyMDApXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdChyZXNwLmJvZHkpLnRvLmluY2x1ZGUoe21lc3NhZ2U6IFwiV29yayBTdWNjZXNzZnVsbHkgZGVsZXRlZCFcIn0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBkZXNjcmliZShcIndoZW4gdGhlIGlkIGlzIGludmFsaWRcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBpdChcInNob3VsZCByZXR1cm4gaW5mb3JtYXRpb24gaXMgd3JvbmdcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcG9lbUlkID0ge3BvZW1JZDogXCI1ZGMxNGU0ZmI3ZWU5MjM4NGM1MDE4ODlcIn07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdChzZXJ2ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnB1dChgL2F1dGhvcnMvMzQzNDMvZGVsZXRlV29ya2ApXHJcbiAgICAgICAgICAgICAgICAgICAgLnNlbmQocG9lbUlkKVxyXG4gICAgICAgICAgICAgICAgICAgIC5leHBlY3QoMjAwKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdChyZXMuYm9keS5tZXNzYWdlKS5lcXVhbHMoXCJBdXRob3IgTk9UIEZvdW5kIVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIGRlc2NyaWJlKFwiUFVUIC9hdXRob3JzLzppZC93b3Jrc1wiLCAoKSA9PiB7XHJcbiAgICAgICAgZGVzY3JpYmUoXCJ3aGVuIHRoZSBpZCBpcyB2YWxpZFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGl0KFwic2hvdWxkIHJldHVybiBhIG1lc3NhZ2UgYW5kIHRoZSBhdXRob3Igd29yayBpcyBhZGRlZFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwb2VtSWQgPSB7cG9lbUlkOiBcIjVkYzE0ZTRmYjdlZTkyMzg0YzUwMTg4OVwifTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0KHNlcnZlcilcclxuICAgICAgICAgICAgICAgICAgICAucHV0KGAvYXV0aG9ycy8ke3ZhbGlkSUR9L3dvcmtzYClcclxuICAgICAgICAgICAgICAgICAgICAuc2VuZChwb2VtSWQpXHJcbiAgICAgICAgICAgICAgICAgICAgLmV4cGVjdCgyMDApXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdChyZXNwLmJvZHkpLnRvLmluY2x1ZGUoe21lc3NhZ2U6IFwiV29yayBTdWNjZXNzZnVsbHkgQWRkZWQhXCJ9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHJlc3AuYm9keS5kYXRhLndvcmtzWzBdKS5lcXVhbHMoXCI1ZGMxNGU0ZmI3ZWU5MjM4NGM1MDE4ODlcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBhZnRlcigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdChzZXJ2ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmdldChgL2F1dGhvcnMvJHt2YWxpZElEfWApXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldChcIkFjY2VwdFwiLCBcImFwcGxpY2F0aW9uL2pzb25cIilcclxuICAgICAgICAgICAgICAgICAgICAuZXhwZWN0KFwiQ29udGVudC1UeXBlXCIsIC9qc29uLylcclxuICAgICAgICAgICAgICAgICAgICAuZXhwZWN0KDIwMClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHJlc3AuYm9keVswXS53b3Jrc1swXSkuZXF1YWxzKFwiNWRjMTRlNGZiN2VlOTIzODRjNTAxODg5XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBkZXNjcmliZShcIndoZW4gdGhlIGlkIGlzIGludmFsaWRcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBpdChcInNob3VsZCByZXR1cm4gaW5mb3JtYXRpb24gaXMgd3JvbmdcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcG9lbUlkID0ge3BvZW1JZDogXCI1ZGMxNGU0ZmI3ZWU5MjM4NGM1MDE4ODlcIn07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdChzZXJ2ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnB1dChgL2F1dGhvcnMvMzQzNDMvd29ya3NgKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZW5kKHBvZW1JZClcclxuICAgICAgICAgICAgICAgICAgICAuZXhwZWN0KDIwMClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3QocmVzLmJvZHkubWVzc2FnZSkuZXF1YWxzKFwiQXV0aG9yIE5PVCBGb3VuZCFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLypkZXNjcmliZS5vbmx5KFwiUFVUIC9hdXRob3JzLzppZC9saWtlXCIsICgpID0+IHtcclxuICAgICAgICBkZXNjcmliZShcIndoZW4gdGhlIGlkIGlzIHZhbGlkXCIsICgpID0+IHtcclxuICAgICAgICAgICAgaXQoXCJzaG91bGQgcmV0dXJuIGEgbWVzc2FnZSBhbmQgdGhlIGF1dGhvciBpcyBsaWtlZFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyQ3JlZGVudGlhbHMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6ICdMb3ZZZWF0c0BsYWxhLmNvbScsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICd0cnl0cnkxMjMnXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgYXV0aGVudGljYXRlZFVzZXIgPSByZXF1ZXN0LmFnZW50KGFwcCk7XHJcbiAgICAgICAgICAgICAgICBiZWZvcmUoZnVuY3Rpb24oZG9uZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgYXV0aGVudGljYXRlZFVzZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnBvc3QoJy91c2Vycy9sb2dpbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZW5kKHVzZXJDcmVkZW50aWFscylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmVuZChmdW5jdGlvbihlcnIsIHJlc3BvbnNlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXNDb2RlKS50by5lcXVhbCgyMDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgYXV0aGVudGljYXRlZFVzZXIucHV0KGAvYXV0aG9ycy8ke3ZhbGlkSUR9L2xpa2VgKVxyXG4gICAgICAgICAgICAgICAgICAgIC5leHBlY3QoMjAwKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3QocmVzcC5ib2R5KS50by5pbmNsdWRlKHttZXNzYWdlOiBcIkF1dGhvciBTdWNjZXNzZnVsbHkgTGlrZWQhXCJ9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGFmdGVyKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0KHNlcnZlcilcclxuICAgICAgICAgICAgICAgICAgICAuZ2V0KGAvYXV0aG9ycy8ke3ZhbGlkSUR9YClcclxuICAgICAgICAgICAgICAgICAgICAuc2V0KFwiQWNjZXB0XCIsIFwiYXBwbGljYXRpb24vanNvblwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5leHBlY3QoXCJDb250ZW50LVR5cGVcIiwgL2pzb24vKVxyXG4gICAgICAgICAgICAgICAgICAgIC5leHBlY3QoMjAwKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3QocmVzcC5ib2R5WzBdLndvcmtzWzBdKS5lcXVhbHMoXCI1ZGMxNGU0ZmI3ZWU5MjM4NGM1MDE4ODlcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pOyovXHJcbiAgICAgICAgLypkZXNjcmliZShcIndoZW4gdGhlIGlkIGlzIGludmFsaWRcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBpdChcInNob3VsZCByZXR1cm4gaW5mb3JtYXRpb24gaXMgd3JvbmdcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcG9lbUlkID0ge3BvZW1JZDogXCI1ZGMxNGU0ZmI3ZWU5MjM4NGM1MDE4ODlcIn07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdChzZXJ2ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnB1dChgL2F1dGhvcnMvMzQzNDMvd29ya3NgKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZW5kKHBvZW1JZClcclxuICAgICAgICAgICAgICAgICAgICAuZXhwZWN0KDIwMClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3QocmVzLmJvZHkubWVzc2FnZSkuZXF1YWxzKFwiQXV0aG9yIE5PVCBGb3VuZCFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7Ki9cclxufSk7XHJcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "authorsTest.js"
      ],
      "names": [
        "chai",
        "require",
        "expect",
        "request",
        "Author",
        "mockSession",
        "_",
        "server",
        "mongod",
        "db",
        "validID",
        "app",
        "describe",
        "beforeEach",
        "deleteMany",
        "author",
        "name",
        "introduction",
        "save",
        "findOne",
        "_id",
        "error",
        "console",
        "log",
        "it",
        "done",
        "get",
        "set",
        "end",
        "err",
        "res",
        "body",
        "to",
        "be",
        "a",
        "length",
        "equal",
        "result",
        "map",
        "deep",
        "include",
        "e",
        "have",
        "property",
        "message",
        "equals",
        "post",
        "send",
        "then",
        "data",
        "after",
        "only",
        "poemId",
        "put",
        "resp",
        "works"
      ],
      "mappings": "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",
      "sourceRoot": "D:\\Webstorm\\poetryWeb\\test\\functional\\api",
      "sourcesContent": [
        "const chai = require(\"chai\");\r\nconst expect = chai.expect;\r\nconst request = require(\"supertest\");\r\nlet Author = require(\"../../../models/authors\");\r\nlet mockSession = require('mock-session');\r\n\r\nconst _ = require(\"lodash\");\r\nlet server = require(\"../../../bin/www\");\r\nlet mongod;\r\nlet db, validID;\r\nvar app = require('../../../app');\r\n\r\ndescribe(\"Authors\", () => {\r\n    beforeEach(async () => {\r\n        try {\r\n            await Author.deleteMany({});\r\n            let author = new Author();\r\n            author.name = \"Yeats\";\r\n            author.introduction = \"Irish poet and one of the foremost figures of 20th-century literature. \" +\r\n            \"A pillar of the Irish literary establishment, he helped to found the Abbey Theatre, \" +\r\n            \"and in his later years served two terms as a Senator of the Irish Free State.\";\r\n            await author.save();\r\n\r\n            author = new Author();\r\n            author.name = \"Du Fu\";\r\n            author.introduction = \"Du Fu was a prominent Chinese poet of the Tang dynasty.\";\r\n            await author.save();\r\n\r\n            author = await Author.findOne({ name:\"Yeats\" });\r\n            validID = author._id;\r\n\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    });\r\n\r\n    describe(\"GET /authors\", () => {\r\n        it(\"should return all the authors\", done => {\r\n            request(server)\r\n                .get(\"/authors\")\r\n                .set(\"Accept\", \"application/json\")\r\n                .expect(\"Content-Type\", /json/)\r\n                .expect(200)\r\n                .end((err, res) => {\r\n                    try{\r\n                        expect(res.body).to.be.a(\"array\");\r\n                        expect(res.body.length).to.equal(2);\r\n                        let result = _.map(res.body, author => {\r\n                            return { name: author.name};\r\n                        });\r\n                        expect(result).to.deep.include({ name: \"Yeats\" });\r\n                        expect(result).to.deep.include({ name: \"Du Fu\" });\r\n                        done();\r\n                    } catch (e) {\r\n                        done(e);\r\n                    }\r\n                });\r\n        });\r\n    });\r\n\r\n    describe(\"GET /authors/:id\", () => {\r\n        describe(\"when the id is valid\", () => {\r\n            it(\"should return the matching author\", done => {\r\n                request(server)\r\n                    .get(`/authors/${validID}`)\r\n                    .set(\"Accept\", \"application/json\")\r\n                    .expect(\"Content-Type\", /json/)\r\n                    .expect(200)\r\n                    .end((err, res) => {\r\n                        expect(res.body[0]).to.have.property(\"name\",\"Yeats\");\r\n                        done(err);\r\n                    });\r\n            });\r\n        });\r\n        describe(\"when the id is invalid\", () => {\r\n            it(\"should return the NOT found message\", done => {\r\n                request(server)\r\n                    .get(\"/authors/9999\")\r\n                    .set(\"Accept\", \"application/json\")\r\n                    .expect(\"Content-Type\", /json/)\r\n                    .expect(200)\r\n                    .end((err, res) => {\r\n                        expect(res.body.message).equals(\"Author NOT Found!\");\r\n                        done(err);\r\n                    });\r\n            });\r\n        });\r\n    });\r\n    describe(\"POST /authors\", () => {\r\n        it(\"should return confirmation message and update datastore\", () => {\r\n            const author = {\r\n                name:\"Shakespeare\",\r\n                introduction:\"Great Great English play writer and poet\"\r\n            };\r\n            return request(server)\r\n                .post(\"/authors\")\r\n                .send(author)\r\n                .expect(200)\r\n                .then(res => {\r\n                    expect(res.body.message).equals(\"Author Successfully Added!\");\r\n                    validID = res.body.data._id;\r\n                });\r\n        });\r\n        after(() => {\r\n            return request(server)\r\n                .get(`/authors/${validID}`)\r\n                .expect(200)\r\n                .then(res => {\r\n                    expect(res.body[0]).to.have.property(\"name\", \"Shakespeare\");\r\n                    expect(res.body[0]).to.have.property(\"introduction\",\"Great Great English play writer and poet\");\r\n                });\r\n        });\r\n    });\r\n    describe.only(\"PUT /authors/:id/deleteWork\", () => {\r\n        describe(\"when the id is valid\", () => {\r\n            it(\"should return a message and the author work is added\", () => {\r\n                const poemId = {poemId: \"5dc14e4fb7ee92384c501889\"};\r\n                return request(server)\r\n                    .put(`/authors/${validID}/deleteWork`)\r\n                    .send(poemId)\r\n                    .expect(200)\r\n                    .then(resp => {\r\n                        expect(resp.body).to.include({message: \"Work Successfully deleted!\"});\r\n                    });\r\n            });\r\n        });\r\n        describe(\"when the id is invalid\", () => {\r\n            it(\"should return information is wrong\", () => {\r\n                const poemId = {poemId: \"5dc14e4fb7ee92384c501889\"};\r\n                return request(server)\r\n                    .put(`/authors/34343/deleteWork`)\r\n                    .send(poemId)\r\n                    .expect(200)\r\n                    .then(res => {\r\n                        expect(res.body.message).equals(\"Author NOT Found!\");\r\n                    });\r\n            });\r\n        });\r\n    });\r\n    describe(\"PUT /authors/:id/works\", () => {\r\n        describe(\"when the id is valid\", () => {\r\n            it(\"should return a message and the author work is added\", () => {\r\n                const poemId = {poemId: \"5dc14e4fb7ee92384c501889\"};\r\n                return request(server)\r\n                    .put(`/authors/${validID}/works`)\r\n                    .send(poemId)\r\n                    .expect(200)\r\n                    .then(resp => {\r\n                        expect(resp.body).to.include({message: \"Work Successfully Added!\"});\r\n                        expect(resp.body.data.works[0]).equals(\"5dc14e4fb7ee92384c501889\");\r\n                    });\r\n            });\r\n            after(() => {\r\n                return request(server)\r\n                    .get(`/authors/${validID}`)\r\n                    .set(\"Accept\", \"application/json\")\r\n                    .expect(\"Content-Type\", /json/)\r\n                    .expect(200)\r\n                    .then(resp => {\r\n                        expect(resp.body[0].works[0]).equals(\"5dc14e4fb7ee92384c501889\");\r\n                    });\r\n            });\r\n        });\r\n        describe(\"when the id is invalid\", () => {\r\n            it(\"should return information is wrong\", () => {\r\n                const poemId = {poemId: \"5dc14e4fb7ee92384c501889\"};\r\n                return request(server)\r\n                    .put(`/authors/34343/works`)\r\n                    .send(poemId)\r\n                    .expect(200)\r\n                    .then(res => {\r\n                        expect(res.body.message).equals(\"Author NOT Found!\");\r\n                    });\r\n            });\r\n        });\r\n    });\r\n\r\n    /*describe.only(\"PUT /authors/:id/like\", () => {\r\n        describe(\"when the id is valid\", () => {\r\n            it(\"should return a message and the author is liked\", () => {\r\n                const userCredentials = {\r\n                    email: 'LovYeats@lala.com',\r\n                    password: 'trytry123'\r\n                }\r\n                var authenticatedUser = request.agent(app);\r\n                before(function(done){\r\n                    authenticatedUser\r\n                        .post('/users/login')\r\n                        .send(userCredentials)\r\n                        .end(function(err, response){\r\n                            expect(response.statusCode).to.equal(200);\r\n                            done();\r\n                        });\r\n                });\r\n                authenticatedUser.put(`/authors/${validID}/like`)\r\n                    .expect(200)\r\n                    .then(resp => {\r\n                        expect(resp.body).to.include({message: \"Author Successfully Liked!\"});\r\n                    });\r\n            });\r\n            after(() => {\r\n                return request(server)\r\n                    .get(`/authors/${validID}`)\r\n                    .set(\"Accept\", \"application/json\")\r\n                    .expect(\"Content-Type\", /json/)\r\n                    .expect(200)\r\n                    .then(resp => {\r\n                        expect(resp.body[0].works[0]).equals(\"5dc14e4fb7ee92384c501889\");\r\n                    });\r\n            });\r\n        });*/\r\n        /*describe(\"when the id is invalid\", () => {\r\n            it(\"should return information is wrong\", () => {\r\n                const poemId = {poemId: \"5dc14e4fb7ee92384c501889\"};\r\n                return request(server)\r\n                    .put(`/authors/34343/works`)\r\n                    .send(poemId)\r\n                    .expect(200)\r\n                    .then(res => {\r\n                        expect(res.body.message).equals(\"Author NOT Found!\");\r\n                    });\r\n            });\r\n        });\r\n    });*/\r\n});\r\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1572963219159
  },
  "{\"sourceRoot\":\"D:\\\\Webstorm\\\\poetryWeb\\\\models\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Webstorm\\\\poetryWeb\",\"filename\":\"D:\\\\Webstorm\\\\poetryWeb\\\\models\\\\authors.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"test \",\"root\":\"D:\\\\Webstorm\\\\poetryWeb\",\"plugins\":[],\"presets\":[]}:7.3.4:test ": {
    "metadata": {},
    "options": {
      "sourceRoot": "D:\\Webstorm\\poetryWeb\\models",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "D:\\Webstorm\\poetryWeb",
      "filename": "D:\\Webstorm\\poetryWeb\\models\\authors.js",
      "babelrc": false,
      "configFile": false,
      "envName": "test ",
      "root": "D:\\Webstorm\\poetryWeb",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\Webstorm\\poetryWeb\\models\\authors.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "D:\\Webstorm\\poetryWeb\\models\\authors.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\Webstorm\\poetryWeb\\models",
        "sourceFileName": "authors.js"
      }
    },
    "ast": null,
    "code": "let mongoose = require('../routes/connectDB'); // mongoose.Promise = require('bluebird');\n\n\nlet Schema = mongoose.Schema;\nlet AuthorSchema = new Schema({\n  name: String,\n  introduction: String,\n  works: [{\n    type: Schema.Types.ObjectId,\n    ref: 'poems'\n  }],\n  likes: [{\n    type: Schema.Types.ObjectId,\n    ref: 'users'\n  }]\n}, {\n  collection: 'author'\n});\nvar Author = mongoose.model('Author', AuthorSchema);\nmodule.exports = Author;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhvcnMuanMiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJyZXF1aXJlIiwiU2NoZW1hIiwiQXV0aG9yU2NoZW1hIiwibmFtZSIsIlN0cmluZyIsImludHJvZHVjdGlvbiIsIndvcmtzIiwidHlwZSIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJsaWtlcyIsImNvbGxlY3Rpb24iLCJBdXRob3IiLCJtb2RlbCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLElBQUlBLFFBQVEsR0FBR0MsT0FBTyxDQUFDLHFCQUFELENBQXRCLEMsQ0FDQTs7O0FBRUEsSUFBSUMsTUFBTSxHQUFHRixRQUFRLENBQUNFLE1BQXRCO0FBQ0EsSUFBSUMsWUFBWSxHQUFHLElBQUlELE1BQUosQ0FBVztBQUN0QkUsRUFBQUEsSUFBSSxFQUFFQyxNQURnQjtBQUV0QkMsRUFBQUEsWUFBWSxFQUFFRCxNQUZRO0FBR3RCRSxFQUFBQSxLQUFLLEVBQUUsQ0FBQztBQUFDQyxJQUFBQSxJQUFJLEVBQUVOLE1BQU0sQ0FBQ08sS0FBUCxDQUFhQyxRQUFwQjtBQUE4QkMsSUFBQUEsR0FBRyxFQUFFO0FBQW5DLEdBQUQsQ0FIZTtBQUl0QkMsRUFBQUEsS0FBSyxFQUFFLENBQUM7QUFBQ0osSUFBQUEsSUFBSSxFQUFFTixNQUFNLENBQUNPLEtBQVAsQ0FBYUMsUUFBcEI7QUFBOEJDLElBQUFBLEdBQUcsRUFBRTtBQUFuQyxHQUFEO0FBSmUsQ0FBWCxFQU1mO0FBQUVFLEVBQUFBLFVBQVUsRUFBRTtBQUFkLENBTmUsQ0FBbkI7QUFXQSxJQUFJQyxNQUFNLEdBQUdkLFFBQVEsQ0FBQ2UsS0FBVCxDQUFlLFFBQWYsRUFBeUJaLFlBQXpCLENBQWI7QUFDQWEsTUFBTSxDQUFDQyxPQUFQLEdBQWlCSCxNQUFqQiIsInNvdXJjZVJvb3QiOiJEOlxcV2Vic3Rvcm1cXHBvZXRyeVdlYlxcbW9kZWxzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IG1vbmdvb3NlID0gcmVxdWlyZSgnLi4vcm91dGVzL2Nvbm5lY3REQicpO1xyXG4vLyBtb25nb29zZS5Qcm9taXNlID0gcmVxdWlyZSgnYmx1ZWJpcmQnKTtcclxuXHJcbmxldCBTY2hlbWEgPSBtb25nb29zZS5TY2hlbWE7XHJcbmxldCBBdXRob3JTY2hlbWEgPSBuZXcgU2NoZW1hKHtcclxuICAgICAgICBuYW1lOiBTdHJpbmcsXHJcbiAgICAgICAgaW50cm9kdWN0aW9uOiBTdHJpbmcsXHJcbiAgICAgICAgd29ya3M6IFt7dHlwZTogU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6ICdwb2Vtcyd9XSxcclxuICAgICAgICBsaWtlczogW3t0eXBlOiBTY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogJ3VzZXJzJ31dXHJcbiAgICB9LFxyXG4gICAgeyBjb2xsZWN0aW9uOiAnYXV0aG9yJ31cclxuKTtcclxuXHJcblxyXG5cclxudmFyIEF1dGhvciA9IG1vbmdvb3NlLm1vZGVsKCdBdXRob3InLCBBdXRob3JTY2hlbWEpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IEF1dGhvcjtcclxuIl19",
    "map": {
      "version": 3,
      "sources": [
        "authors.js"
      ],
      "names": [
        "mongoose",
        "require",
        "Schema",
        "AuthorSchema",
        "name",
        "String",
        "introduction",
        "works",
        "type",
        "Types",
        "ObjectId",
        "ref",
        "likes",
        "collection",
        "Author",
        "model",
        "module",
        "exports"
      ],
      "mappings": "AAAA,IAAIA,QAAQ,GAAGC,OAAO,CAAC,qBAAD,CAAtB,C,CACA;;;AAEA,IAAIC,MAAM,GAAGF,QAAQ,CAACE,MAAtB;AACA,IAAIC,YAAY,GAAG,IAAID,MAAJ,CAAW;AACtBE,EAAAA,IAAI,EAAEC,MADgB;AAEtBC,EAAAA,YAAY,EAAED,MAFQ;AAGtBE,EAAAA,KAAK,EAAE,CAAC;AAACC,IAAAA,IAAI,EAAEN,MAAM,CAACO,KAAP,CAAaC,QAApB;AAA8BC,IAAAA,GAAG,EAAE;AAAnC,GAAD,CAHe;AAItBC,EAAAA,KAAK,EAAE,CAAC;AAACJ,IAAAA,IAAI,EAAEN,MAAM,CAACO,KAAP,CAAaC,QAApB;AAA8BC,IAAAA,GAAG,EAAE;AAAnC,GAAD;AAJe,CAAX,EAMf;AAAEE,EAAAA,UAAU,EAAE;AAAd,CANe,CAAnB;AAWA,IAAIC,MAAM,GAAGd,QAAQ,CAACe,KAAT,CAAe,QAAf,EAAyBZ,YAAzB,CAAb;AACAa,MAAM,CAACC,OAAP,GAAiBH,MAAjB",
      "sourceRoot": "D:\\Webstorm\\poetryWeb\\models",
      "sourcesContent": [
        "let mongoose = require('../routes/connectDB');\r\n// mongoose.Promise = require('bluebird');\r\n\r\nlet Schema = mongoose.Schema;\r\nlet AuthorSchema = new Schema({\r\n        name: String,\r\n        introduction: String,\r\n        works: [{type: Schema.Types.ObjectId, ref: 'poems'}],\r\n        likes: [{type: Schema.Types.ObjectId, ref: 'users'}]\r\n    },\r\n    { collection: 'author'}\r\n);\r\n\r\n\r\n\r\nvar Author = mongoose.model('Author', AuthorSchema);\r\nmodule.exports = Author;\r\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1572830873514
  },
  "{\"sourceRoot\":\"D:\\\\Webstorm\\\\poetryWeb\\\\routes\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Webstorm\\\\poetryWeb\",\"filename\":\"D:\\\\Webstorm\\\\poetryWeb\\\\routes\\\\connectDB.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"test \",\"root\":\"D:\\\\Webstorm\\\\poetryWeb\",\"plugins\":[],\"presets\":[]}:7.3.4:test ": {
    "metadata": {},
    "options": {
      "sourceRoot": "D:\\Webstorm\\poetryWeb\\routes",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "D:\\Webstorm\\poetryWeb",
      "filename": "D:\\Webstorm\\poetryWeb\\routes\\connectDB.js",
      "babelrc": false,
      "configFile": false,
      "envName": "test ",
      "root": "D:\\Webstorm\\poetryWeb",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\Webstorm\\poetryWeb\\routes\\connectDB.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "D:\\Webstorm\\poetryWeb\\routes\\connectDB.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\Webstorm\\poetryWeb\\routes",
        "sourceFileName": "connectDB.js"
      }
    },
    "ast": null,
    "code": "const mongoose = require('mongoose');\n\nlet username = \"YutingJing_24\";\nlet password = \"cindyJing97\";\nlet mongodbUri = \"mongodb+srv://\" + username + \":\" + password + \"@cluster0-evhrz.mongodb.net/artifactsdb\";\nmongoose.connect(mongodbUri, {\n  useNewUrlParser: true,\n  useUnifiedTopology: true\n});\nvar db = mongoose.connection;\ndb.on('error', function (err) {\n  console.log('Unable to Connect to [ ' + db.name + ' ]', err);\n});\ndb.once('open', function () {\n  console.log('Successfully Connected to [ ' + db.name + ' ]');\n});\nmodule.exports = mongoose; // module.exports = db;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbm5lY3REQi5qcyJdLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwibW9uZ29kYlVyaSIsImNvbm5lY3QiLCJ1c2VOZXdVcmxQYXJzZXIiLCJ1c2VVbmlmaWVkVG9wb2xvZ3kiLCJkYiIsImNvbm5lY3Rpb24iLCJvbiIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJuYW1lIiwib25jZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLFFBQVEsR0FBR0MsT0FBTyxDQUFDLFVBQUQsQ0FBeEI7O0FBRUEsSUFBSUMsUUFBUSxHQUFHLGVBQWY7QUFDQSxJQUFJQyxRQUFRLEdBQUcsYUFBZjtBQUVBLElBQUlDLFVBQVUsR0FBQyxtQkFBaUJGLFFBQWpCLEdBQTRCLEdBQTVCLEdBQWtDQyxRQUFsQyxHQUE0Qyx5Q0FBM0Q7QUFFQUgsUUFBUSxDQUFDSyxPQUFULENBQWlCRCxVQUFqQixFQUE0QjtBQUFDRSxFQUFBQSxlQUFlLEVBQUUsSUFBbEI7QUFBd0JDLEVBQUFBLGtCQUFrQixFQUFFO0FBQTVDLENBQTVCO0FBRUEsSUFBSUMsRUFBRSxHQUFHUixRQUFRLENBQUNTLFVBQWxCO0FBRUFELEVBQUUsQ0FBQ0UsRUFBSCxDQUFNLE9BQU4sRUFBZSxVQUFVQyxHQUFWLEVBQWU7QUFDMUJDLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLDRCQUE0QkwsRUFBRSxDQUFDTSxJQUEvQixHQUFzQyxJQUFsRCxFQUF3REgsR0FBeEQ7QUFDSCxDQUZEO0FBSUFILEVBQUUsQ0FBQ08sSUFBSCxDQUFRLE1BQVIsRUFBZ0IsWUFBWTtBQUN4QkgsRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksaUNBQWlDTCxFQUFFLENBQUNNLElBQXBDLEdBQTJDLElBQXZEO0FBQ0gsQ0FGRDtBQUtBRSxNQUFNLENBQUNDLE9BQVAsR0FBaUJqQixRQUFqQixDLENBQ0EiLCJzb3VyY2VSb290IjoiRDpcXFdlYnN0b3JtXFxwb2V0cnlXZWJcXHJvdXRlcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcclxuXHJcbmxldCB1c2VybmFtZSA9IFwiWXV0aW5nSmluZ18yNFwiO1xyXG5sZXQgcGFzc3dvcmQgPSBcImNpbmR5SmluZzk3XCI7XHJcblxyXG5sZXQgbW9uZ29kYlVyaT1cIm1vbmdvZGIrc3J2Oi8vXCIrdXNlcm5hbWUgKyBcIjpcIiArIHBhc3N3b3JkICtcIkBjbHVzdGVyMC1ldmhyei5tb25nb2RiLm5ldC9hcnRpZmFjdHNkYlwiO1xyXG5cclxubW9uZ29vc2UuY29ubmVjdChtb25nb2RiVXJpLHt1c2VOZXdVcmxQYXJzZXI6IHRydWUsIHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZX0pO1xyXG5cclxudmFyIGRiID0gbW9uZ29vc2UuY29ubmVjdGlvbjtcclxuXHJcbmRiLm9uKCdlcnJvcicsIGZ1bmN0aW9uIChlcnIpIHtcclxuICAgIGNvbnNvbGUubG9nKCdVbmFibGUgdG8gQ29ubmVjdCB0byBbICcgKyBkYi5uYW1lICsgJyBdJywgZXJyKTtcclxufSk7XHJcblxyXG5kYi5vbmNlKCdvcGVuJywgZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc29sZS5sb2coJ1N1Y2Nlc3NmdWxseSBDb25uZWN0ZWQgdG8gWyAnICsgZGIubmFtZSArICcgXScpO1xyXG59KTtcclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IG1vbmdvb3NlO1xyXG4vLyBtb2R1bGUuZXhwb3J0cyA9IGRiO1xyXG5cclxuIl19",
    "map": {
      "version": 3,
      "sources": [
        "connectDB.js"
      ],
      "names": [
        "mongoose",
        "require",
        "username",
        "password",
        "mongodbUri",
        "connect",
        "useNewUrlParser",
        "useUnifiedTopology",
        "db",
        "connection",
        "on",
        "err",
        "console",
        "log",
        "name",
        "once",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AAEA,IAAIC,QAAQ,GAAG,eAAf;AACA,IAAIC,QAAQ,GAAG,aAAf;AAEA,IAAIC,UAAU,GAAC,mBAAiBF,QAAjB,GAA4B,GAA5B,GAAkCC,QAAlC,GAA4C,yCAA3D;AAEAH,QAAQ,CAACK,OAAT,CAAiBD,UAAjB,EAA4B;AAACE,EAAAA,eAAe,EAAE,IAAlB;AAAwBC,EAAAA,kBAAkB,EAAE;AAA5C,CAA5B;AAEA,IAAIC,EAAE,GAAGR,QAAQ,CAACS,UAAlB;AAEAD,EAAE,CAACE,EAAH,CAAM,OAAN,EAAe,UAAUC,GAAV,EAAe;AAC1BC,EAAAA,OAAO,CAACC,GAAR,CAAY,4BAA4BL,EAAE,CAACM,IAA/B,GAAsC,IAAlD,EAAwDH,GAAxD;AACH,CAFD;AAIAH,EAAE,CAACO,IAAH,CAAQ,MAAR,EAAgB,YAAY;AACxBH,EAAAA,OAAO,CAACC,GAAR,CAAY,iCAAiCL,EAAE,CAACM,IAApC,GAA2C,IAAvD;AACH,CAFD;AAKAE,MAAM,CAACC,OAAP,GAAiBjB,QAAjB,C,CACA",
      "sourceRoot": "D:\\Webstorm\\poetryWeb\\routes",
      "sourcesContent": [
        "const mongoose = require('mongoose');\r\n\r\nlet username = \"YutingJing_24\";\r\nlet password = \"cindyJing97\";\r\n\r\nlet mongodbUri=\"mongodb+srv://\"+username + \":\" + password +\"@cluster0-evhrz.mongodb.net/artifactsdb\";\r\n\r\nmongoose.connect(mongodbUri,{useNewUrlParser: true, useUnifiedTopology: true});\r\n\r\nvar db = mongoose.connection;\r\n\r\ndb.on('error', function (err) {\r\n    console.log('Unable to Connect to [ ' + db.name + ' ]', err);\r\n});\r\n\r\ndb.once('open', function () {\r\n    console.log('Successfully Connected to [ ' + db.name + ' ]');\r\n});\r\n\r\n\r\nmodule.exports = mongoose;\r\n// module.exports = db;\r\n\r\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1572830879155
  },
  "{\"sourceRoot\":\"D:\\\\Webstorm\\\\poetryWeb\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Webstorm\\\\poetryWeb\",\"filename\":\"D:\\\\Webstorm\\\\poetryWeb\\\\app.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"test \",\"root\":\"D:\\\\Webstorm\\\\poetryWeb\",\"plugins\":[],\"presets\":[]}:7.3.4:test ": {
    "metadata": {},
    "options": {
      "sourceRoot": "D:\\Webstorm\\poetryWeb",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "D:\\Webstorm\\poetryWeb",
      "filename": "D:\\Webstorm\\poetryWeb\\app.js",
      "babelrc": false,
      "configFile": false,
      "envName": "test ",
      "root": "D:\\Webstorm\\poetryWeb",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\Webstorm\\poetryWeb\\app.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "D:\\Webstorm\\poetryWeb\\app.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\Webstorm\\poetryWeb",
        "sourceFileName": "app.js"
      }
    },
    "ast": null,
    "code": "var express = require('express');\n\nvar path = require('path');\n\nvar logger = require('morgan');\n\nvar cookieParser = require('cookie-parser');\n\nvar bodyParser = require('body-parser');\n\nvar session = require('express-session');\n\nvar MongoStore = require('connect-mongo')(session);\n\nlet db = require('./routes/connectDB').connection;\n\nvar createError = require('http-errors');\n\nvar indexRouter = require('./routes/index');\n\nconst users = require('./routes/users');\n\nconst poems = require(\"./routes/poems\");\n\nconst authors = require(\"./routes/authors\");\n\nvar app = express(); // view engine setup\n\napp.set('views', path.join(__dirname, 'views'));\napp.set('view engine', 'ejs'); //use sessions for tracking logins\n\napp.use(session({\n  secret: 'work hard',\n  resave: true,\n  saveUninitialized: false,\n  store: new MongoStore({\n    mongooseConnection: db\n  })\n}));\napp.use(logger('dev'));\n/*\r\napp.use(express.json());\r\napp.use(express.urlencoded({ extended: false }));\r\napp.use(cookieParser());\r\napp.use(express.static(path.join(__dirname, 'public')));\r\n*/\n\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({\n  extended: false\n}));\napp.use(cookieParser());\napp.use(express.static(path.join(__dirname, 'public')));\n\nif (process.env.NODE_ENV !== \"test\") {\n  app.use(logger(\"dev\"));\n}\n\napp.use('/', indexRouter);\napp.use('/users', users);\napp.get('/users', users.findAllUsers);\napp.get('/users/:id', users.findOneUser);\napp.get('/usersLogout', users.userLogout);\napp.post('/usersRegister', users.addAUser);\napp.post('/users/login', users.userLogin);\napp.delete('/users/:id', users.deleteUser);\napp.get('/poems', poems.findAllPoems);\napp.get('/poems/:id', poems.findOnePoem);\napp.post('/poems', poems.addPoem);\n/*\r\napp.put('/poems/:id/like', poems.incrementLikes);\r\napp.put('/poems/:id/unlike',poems.decreaseLikes);*/\n\napp.delete('/poems/:id', poems.deletePoem); // app.get('/poems/likes', poems.findTotalLikes);\n\napp.get('/authors', authors.findAllAuthors);\napp.get('/authors/:id', authors.findOneAuthor);\napp.post('/authors', authors.addAuthor);\n/*\r\napp.put('/authors/:id/like',authors.incrementLikes);\r\napp.put('/authors/:id/unlike',authors.decreaseLikes);*/\n\napp.put('/authors/:id/works', authors.incrementWorks);\napp.put('/authors/:id/deleteWork', authors.deleteWorks);\napp.delete('/authors/:id', authors.deleteAuthor); // catch 404 and forward to error handler\n\napp.use(function (req, res, next) {\n  var err = new Error('Not Found');\n  err.status = 404;\n  next(err);\n}); // error handlers\n// development error handler\n// will print stacktrace\n\nif (app.get('env') === 'development') {\n  app.use(function (err, req, res, next) {\n    res.status(err.status || 500);\n    res.render('error', {\n      message: err.message,\n      error: err\n    });\n  });\n} // production error handler\n// no stacktraces leaked to user\n\n\napp.use(function (err, req, res, next) {\n  res.status(err.status || 500);\n  res.render('error', {\n    message: err.message,\n    error: {}\n  });\n});\nmodule.exports = app;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInBhdGgiLCJsb2dnZXIiLCJjb29raWVQYXJzZXIiLCJib2R5UGFyc2VyIiwic2Vzc2lvbiIsIk1vbmdvU3RvcmUiLCJkYiIsImNvbm5lY3Rpb24iLCJjcmVhdGVFcnJvciIsImluZGV4Um91dGVyIiwidXNlcnMiLCJwb2VtcyIsImF1dGhvcnMiLCJhcHAiLCJzZXQiLCJqb2luIiwiX19kaXJuYW1lIiwidXNlIiwic2VjcmV0IiwicmVzYXZlIiwic2F2ZVVuaW5pdGlhbGl6ZWQiLCJzdG9yZSIsIm1vbmdvb3NlQ29ubmVjdGlvbiIsImpzb24iLCJ1cmxlbmNvZGVkIiwiZXh0ZW5kZWQiLCJzdGF0aWMiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJnZXQiLCJmaW5kQWxsVXNlcnMiLCJmaW5kT25lVXNlciIsInVzZXJMb2dvdXQiLCJwb3N0IiwiYWRkQVVzZXIiLCJ1c2VyTG9naW4iLCJkZWxldGUiLCJkZWxldGVVc2VyIiwiZmluZEFsbFBvZW1zIiwiZmluZE9uZVBvZW0iLCJhZGRQb2VtIiwiZGVsZXRlUG9lbSIsImZpbmRBbGxBdXRob3JzIiwiZmluZE9uZUF1dGhvciIsImFkZEF1dGhvciIsInB1dCIsImluY3JlbWVudFdvcmtzIiwiZGVsZXRlV29ya3MiLCJkZWxldGVBdXRob3IiLCJyZXEiLCJyZXMiLCJuZXh0IiwiZXJyIiwiRXJyb3IiLCJzdGF0dXMiLCJyZW5kZXIiLCJtZXNzYWdlIiwiZXJyb3IiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFJQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFELENBQXJCOztBQUNBLElBQUlDLElBQUksR0FBR0QsT0FBTyxDQUFDLE1BQUQsQ0FBbEI7O0FBQ0EsSUFBSUUsTUFBTSxHQUFHRixPQUFPLENBQUMsUUFBRCxDQUFwQjs7QUFDQSxJQUFJRyxZQUFZLEdBQUdILE9BQU8sQ0FBQyxlQUFELENBQTFCOztBQUNBLElBQUlJLFVBQVUsR0FBR0osT0FBTyxDQUFDLGFBQUQsQ0FBeEI7O0FBQ0EsSUFBSUssT0FBTyxHQUFHTCxPQUFPLENBQUMsaUJBQUQsQ0FBckI7O0FBQ0EsSUFBSU0sVUFBVSxHQUFHTixPQUFPLENBQUMsZUFBRCxDQUFQLENBQXlCSyxPQUF6QixDQUFqQjs7QUFDQSxJQUFJRSxFQUFFLEdBQUdQLE9BQU8sQ0FBQyxvQkFBRCxDQUFQLENBQThCUSxVQUF2Qzs7QUFDQSxJQUFJQyxXQUFXLEdBQUdULE9BQU8sQ0FBQyxhQUFELENBQXpCOztBQUVBLElBQUlVLFdBQVcsR0FBR1YsT0FBTyxDQUFDLGdCQUFELENBQXpCOztBQUNBLE1BQU1XLEtBQUssR0FBR1gsT0FBTyxDQUFDLGdCQUFELENBQXJCOztBQUNBLE1BQU1ZLEtBQUssR0FBR1osT0FBTyxDQUFDLGdCQUFELENBQXJCOztBQUNBLE1BQU1hLE9BQU8sR0FBR2IsT0FBTyxDQUFDLGtCQUFELENBQXZCOztBQUVBLElBQUljLEdBQUcsR0FBR2YsT0FBTyxFQUFqQixDLENBRUE7O0FBQ0FlLEdBQUcsQ0FBQ0MsR0FBSixDQUFRLE9BQVIsRUFBaUJkLElBQUksQ0FBQ2UsSUFBTCxDQUFVQyxTQUFWLEVBQXFCLE9BQXJCLENBQWpCO0FBQ0FILEdBQUcsQ0FBQ0MsR0FBSixDQUFRLGFBQVIsRUFBdUIsS0FBdkIsRSxDQUVBOztBQUNBRCxHQUFHLENBQUNJLEdBQUosQ0FBUWIsT0FBTyxDQUFDO0FBQ1pjLEVBQUFBLE1BQU0sRUFBRSxXQURJO0FBRVpDLEVBQUFBLE1BQU0sRUFBRSxJQUZJO0FBR1pDLEVBQUFBLGlCQUFpQixFQUFFLEtBSFA7QUFJWkMsRUFBQUEsS0FBSyxFQUFFLElBQUloQixVQUFKLENBQWU7QUFDbEJpQixJQUFBQSxrQkFBa0IsRUFBRWhCO0FBREYsR0FBZjtBQUpLLENBQUQsQ0FBZjtBQVNBTyxHQUFHLENBQUNJLEdBQUosQ0FBUWhCLE1BQU0sQ0FBQyxLQUFELENBQWQ7QUFDQTs7Ozs7OztBQU9BWSxHQUFHLENBQUNJLEdBQUosQ0FBUWQsVUFBVSxDQUFDb0IsSUFBWCxFQUFSO0FBQ0FWLEdBQUcsQ0FBQ0ksR0FBSixDQUFRZCxVQUFVLENBQUNxQixVQUFYLENBQXNCO0FBQUVDLEVBQUFBLFFBQVEsRUFBRTtBQUFaLENBQXRCLENBQVI7QUFDQVosR0FBRyxDQUFDSSxHQUFKLENBQVFmLFlBQVksRUFBcEI7QUFDQVcsR0FBRyxDQUFDSSxHQUFKLENBQVFuQixPQUFPLENBQUM0QixNQUFSLENBQWUxQixJQUFJLENBQUNlLElBQUwsQ0FBVUMsU0FBVixFQUFxQixRQUFyQixDQUFmLENBQVI7O0FBQ0EsSUFBSVcsT0FBTyxDQUFDQyxHQUFSLENBQVlDLFFBQVosS0FBeUIsTUFBN0IsRUFBcUM7QUFDakNoQixFQUFBQSxHQUFHLENBQUNJLEdBQUosQ0FBUWhCLE1BQU0sQ0FBQyxLQUFELENBQWQ7QUFDSDs7QUFFRFksR0FBRyxDQUFDSSxHQUFKLENBQVEsR0FBUixFQUFhUixXQUFiO0FBQ0FJLEdBQUcsQ0FBQ0ksR0FBSixDQUFRLFFBQVIsRUFBa0JQLEtBQWxCO0FBRUFHLEdBQUcsQ0FBQ2lCLEdBQUosQ0FBUSxRQUFSLEVBQWtCcEIsS0FBSyxDQUFDcUIsWUFBeEI7QUFDQWxCLEdBQUcsQ0FBQ2lCLEdBQUosQ0FBUSxZQUFSLEVBQXNCcEIsS0FBSyxDQUFDc0IsV0FBNUI7QUFDQW5CLEdBQUcsQ0FBQ2lCLEdBQUosQ0FBUSxjQUFSLEVBQXVCcEIsS0FBSyxDQUFDdUIsVUFBN0I7QUFDQXBCLEdBQUcsQ0FBQ3FCLElBQUosQ0FBUyxnQkFBVCxFQUEwQnhCLEtBQUssQ0FBQ3lCLFFBQWhDO0FBQ0F0QixHQUFHLENBQUNxQixJQUFKLENBQVMsY0FBVCxFQUF3QnhCLEtBQUssQ0FBQzBCLFNBQTlCO0FBQ0F2QixHQUFHLENBQUN3QixNQUFKLENBQVcsWUFBWCxFQUF5QjNCLEtBQUssQ0FBQzRCLFVBQS9CO0FBRUF6QixHQUFHLENBQUNpQixHQUFKLENBQVEsUUFBUixFQUFrQm5CLEtBQUssQ0FBQzRCLFlBQXhCO0FBQ0ExQixHQUFHLENBQUNpQixHQUFKLENBQVEsWUFBUixFQUFzQm5CLEtBQUssQ0FBQzZCLFdBQTVCO0FBQ0EzQixHQUFHLENBQUNxQixJQUFKLENBQVMsUUFBVCxFQUFrQnZCLEtBQUssQ0FBQzhCLE9BQXhCO0FBQWlDOzs7O0FBR2pDNUIsR0FBRyxDQUFDd0IsTUFBSixDQUFXLFlBQVgsRUFBeUIxQixLQUFLLENBQUMrQixVQUEvQixFLENBQ0E7O0FBRUE3QixHQUFHLENBQUNpQixHQUFKLENBQVEsVUFBUixFQUFvQmxCLE9BQU8sQ0FBQytCLGNBQTVCO0FBQ0E5QixHQUFHLENBQUNpQixHQUFKLENBQVEsY0FBUixFQUF3QmxCLE9BQU8sQ0FBQ2dDLGFBQWhDO0FBQ0EvQixHQUFHLENBQUNxQixJQUFKLENBQVMsVUFBVCxFQUFvQnRCLE9BQU8sQ0FBQ2lDLFNBQTVCO0FBQXVDOzs7O0FBR3ZDaEMsR0FBRyxDQUFDaUMsR0FBSixDQUFRLG9CQUFSLEVBQTZCbEMsT0FBTyxDQUFDbUMsY0FBckM7QUFDQWxDLEdBQUcsQ0FBQ2lDLEdBQUosQ0FBUSx5QkFBUixFQUFrQ2xDLE9BQU8sQ0FBQ29DLFdBQTFDO0FBQ0FuQyxHQUFHLENBQUN3QixNQUFKLENBQVcsY0FBWCxFQUEyQnpCLE9BQU8sQ0FBQ3FDLFlBQW5DLEUsQ0FJQTs7QUFDQXBDLEdBQUcsQ0FBQ0ksR0FBSixDQUFRLFVBQVNpQyxHQUFULEVBQWNDLEdBQWQsRUFBbUJDLElBQW5CLEVBQXlCO0FBQzdCLE1BQUlDLEdBQUcsR0FBRyxJQUFJQyxLQUFKLENBQVUsV0FBVixDQUFWO0FBQ0FELEVBQUFBLEdBQUcsQ0FBQ0UsTUFBSixHQUFhLEdBQWI7QUFDQUgsRUFBQUEsSUFBSSxDQUFDQyxHQUFELENBQUo7QUFDSCxDQUpELEUsQ0FNQTtBQUVBO0FBQ0E7O0FBQ0EsSUFBSXhDLEdBQUcsQ0FBQ2lCLEdBQUosQ0FBUSxLQUFSLE1BQW1CLGFBQXZCLEVBQXNDO0FBQ2xDakIsRUFBQUEsR0FBRyxDQUFDSSxHQUFKLENBQVEsVUFBU29DLEdBQVQsRUFBY0gsR0FBZCxFQUFtQkMsR0FBbkIsRUFBd0JDLElBQXhCLEVBQThCO0FBQ2xDRCxJQUFBQSxHQUFHLENBQUNJLE1BQUosQ0FBV0YsR0FBRyxDQUFDRSxNQUFKLElBQWMsR0FBekI7QUFDQUosSUFBQUEsR0FBRyxDQUFDSyxNQUFKLENBQVcsT0FBWCxFQUFvQjtBQUNoQkMsTUFBQUEsT0FBTyxFQUFFSixHQUFHLENBQUNJLE9BREc7QUFFaEJDLE1BQUFBLEtBQUssRUFBRUw7QUFGUyxLQUFwQjtBQUlILEdBTkQ7QUFPSCxDLENBRUQ7QUFDQTs7O0FBQ0F4QyxHQUFHLENBQUNJLEdBQUosQ0FBUSxVQUFTb0MsR0FBVCxFQUFjSCxHQUFkLEVBQW1CQyxHQUFuQixFQUF3QkMsSUFBeEIsRUFBOEI7QUFDbENELEVBQUFBLEdBQUcsQ0FBQ0ksTUFBSixDQUFXRixHQUFHLENBQUNFLE1BQUosSUFBYyxHQUF6QjtBQUNBSixFQUFBQSxHQUFHLENBQUNLLE1BQUosQ0FBVyxPQUFYLEVBQW9CO0FBQ2hCQyxJQUFBQSxPQUFPLEVBQUVKLEdBQUcsQ0FBQ0ksT0FERztBQUVoQkMsSUFBQUEsS0FBSyxFQUFFO0FBRlMsR0FBcEI7QUFJSCxDQU5EO0FBU0FDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQi9DLEdBQWpCIiwic291cmNlUm9vdCI6IkQ6XFxXZWJzdG9ybVxccG9ldHJ5V2ViIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbnZhciBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xyXG52YXIgbG9nZ2VyID0gcmVxdWlyZSgnbW9yZ2FuJyk7XHJcbnZhciBjb29raWVQYXJzZXIgPSByZXF1aXJlKCdjb29raWUtcGFyc2VyJyk7XHJcbnZhciBib2R5UGFyc2VyID0gcmVxdWlyZSgnYm9keS1wYXJzZXInKTtcclxudmFyIHNlc3Npb24gPSByZXF1aXJlKCdleHByZXNzLXNlc3Npb24nKTtcclxudmFyIE1vbmdvU3RvcmUgPSByZXF1aXJlKCdjb25uZWN0LW1vbmdvJykoc2Vzc2lvbik7XHJcbmxldCBkYiA9IHJlcXVpcmUoJy4vcm91dGVzL2Nvbm5lY3REQicpLmNvbm5lY3Rpb247XHJcbnZhciBjcmVhdGVFcnJvciA9IHJlcXVpcmUoJ2h0dHAtZXJyb3JzJyk7XHJcblxyXG52YXIgaW5kZXhSb3V0ZXIgPSByZXF1aXJlKCcuL3JvdXRlcy9pbmRleCcpO1xyXG5jb25zdCB1c2VycyA9IHJlcXVpcmUoJy4vcm91dGVzL3VzZXJzJyk7XHJcbmNvbnN0IHBvZW1zID0gcmVxdWlyZShcIi4vcm91dGVzL3BvZW1zXCIpO1xyXG5jb25zdCBhdXRob3JzID0gcmVxdWlyZShcIi4vcm91dGVzL2F1dGhvcnNcIik7XHJcblxyXG52YXIgYXBwID0gZXhwcmVzcygpO1xyXG5cclxuLy8gdmlldyBlbmdpbmUgc2V0dXBcclxuYXBwLnNldCgndmlld3MnLCBwYXRoLmpvaW4oX19kaXJuYW1lLCAndmlld3MnKSk7XHJcbmFwcC5zZXQoJ3ZpZXcgZW5naW5lJywgJ2VqcycpO1xyXG5cclxuLy91c2Ugc2Vzc2lvbnMgZm9yIHRyYWNraW5nIGxvZ2luc1xyXG5hcHAudXNlKHNlc3Npb24oe1xyXG4gICAgc2VjcmV0OiAnd29yayBoYXJkJyxcclxuICAgIHJlc2F2ZTogdHJ1ZSxcclxuICAgIHNhdmVVbmluaXRpYWxpemVkOiBmYWxzZSxcclxuICAgIHN0b3JlOiBuZXcgTW9uZ29TdG9yZSh7XHJcbiAgICAgICAgbW9uZ29vc2VDb25uZWN0aW9uOiBkYlxyXG4gICAgfSlcclxufSkpO1xyXG5cclxuYXBwLnVzZShsb2dnZXIoJ2RldicpKTtcclxuLypcclxuYXBwLnVzZShleHByZXNzLmpzb24oKSk7XHJcbmFwcC51c2UoZXhwcmVzcy51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IGZhbHNlIH0pKTtcclxuYXBwLnVzZShjb29raWVQYXJzZXIoKSk7XHJcbmFwcC51c2UoZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKF9fZGlybmFtZSwgJ3B1YmxpYycpKSk7XHJcbiovXHJcblxyXG5hcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcclxuYXBwLnVzZShib2R5UGFyc2VyLnVybGVuY29kZWQoeyBleHRlbmRlZDogZmFsc2UgfSkpO1xyXG5hcHAudXNlKGNvb2tpZVBhcnNlcigpKTtcclxuYXBwLnVzZShleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4oX19kaXJuYW1lLCAncHVibGljJykpKTtcclxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInRlc3RcIikge1xyXG4gICAgYXBwLnVzZShsb2dnZXIoXCJkZXZcIikpXHJcbn1cclxuXHJcbmFwcC51c2UoJy8nLCBpbmRleFJvdXRlcik7XHJcbmFwcC51c2UoJy91c2VycycsIHVzZXJzKTtcclxuXHJcbmFwcC5nZXQoJy91c2VycycsIHVzZXJzLmZpbmRBbGxVc2Vycyk7XHJcbmFwcC5nZXQoJy91c2Vycy86aWQnLCB1c2Vycy5maW5kT25lVXNlcik7XHJcbmFwcC5nZXQoJy91c2Vyc0xvZ291dCcsdXNlcnMudXNlckxvZ291dCk7XHJcbmFwcC5wb3N0KCcvdXNlcnNSZWdpc3RlcicsdXNlcnMuYWRkQVVzZXIpO1xyXG5hcHAucG9zdCgnL3VzZXJzL2xvZ2luJyx1c2Vycy51c2VyTG9naW4pO1xyXG5hcHAuZGVsZXRlKCcvdXNlcnMvOmlkJywgdXNlcnMuZGVsZXRlVXNlcik7XHJcblxyXG5hcHAuZ2V0KCcvcG9lbXMnLCBwb2Vtcy5maW5kQWxsUG9lbXMpO1xyXG5hcHAuZ2V0KCcvcG9lbXMvOmlkJywgcG9lbXMuZmluZE9uZVBvZW0pXHJcbmFwcC5wb3N0KCcvcG9lbXMnLHBvZW1zLmFkZFBvZW0pOy8qXHJcbmFwcC5wdXQoJy9wb2Vtcy86aWQvbGlrZScsIHBvZW1zLmluY3JlbWVudExpa2VzKTtcclxuYXBwLnB1dCgnL3BvZW1zLzppZC91bmxpa2UnLHBvZW1zLmRlY3JlYXNlTGlrZXMpOyovXHJcbmFwcC5kZWxldGUoJy9wb2Vtcy86aWQnLCBwb2Vtcy5kZWxldGVQb2VtKTtcclxuLy8gYXBwLmdldCgnL3BvZW1zL2xpa2VzJywgcG9lbXMuZmluZFRvdGFsTGlrZXMpO1xyXG5cclxuYXBwLmdldCgnL2F1dGhvcnMnLCBhdXRob3JzLmZpbmRBbGxBdXRob3JzKTtcclxuYXBwLmdldCgnL2F1dGhvcnMvOmlkJywgYXV0aG9ycy5maW5kT25lQXV0aG9yKTtcclxuYXBwLnBvc3QoJy9hdXRob3JzJyxhdXRob3JzLmFkZEF1dGhvcik7LypcclxuYXBwLnB1dCgnL2F1dGhvcnMvOmlkL2xpa2UnLGF1dGhvcnMuaW5jcmVtZW50TGlrZXMpO1xyXG5hcHAucHV0KCcvYXV0aG9ycy86aWQvdW5saWtlJyxhdXRob3JzLmRlY3JlYXNlTGlrZXMpOyovXHJcbmFwcC5wdXQoJy9hdXRob3JzLzppZC93b3JrcycsYXV0aG9ycy5pbmNyZW1lbnRXb3Jrcyk7XHJcbmFwcC5wdXQoJy9hdXRob3JzLzppZC9kZWxldGVXb3JrJyxhdXRob3JzLmRlbGV0ZVdvcmtzKTtcclxuYXBwLmRlbGV0ZSgnL2F1dGhvcnMvOmlkJywgYXV0aG9ycy5kZWxldGVBdXRob3IpO1xyXG5cclxuXHJcblxyXG4vLyBjYXRjaCA0MDQgYW5kIGZvcndhcmQgdG8gZXJyb3IgaGFuZGxlclxyXG5hcHAudXNlKGZ1bmN0aW9uKHJlcSwgcmVzLCBuZXh0KSB7XHJcbiAgICB2YXIgZXJyID0gbmV3IEVycm9yKCdOb3QgRm91bmQnKTtcclxuICAgIGVyci5zdGF0dXMgPSA0MDQ7XHJcbiAgICBuZXh0KGVycik7XHJcbn0pO1xyXG5cclxuLy8gZXJyb3IgaGFuZGxlcnNcclxuXHJcbi8vIGRldmVsb3BtZW50IGVycm9yIGhhbmRsZXJcclxuLy8gd2lsbCBwcmludCBzdGFja3RyYWNlXHJcbmlmIChhcHAuZ2V0KCdlbnYnKSA9PT0gJ2RldmVsb3BtZW50Jykge1xyXG4gICAgYXBwLnVzZShmdW5jdGlvbihlcnIsIHJlcSwgcmVzLCBuZXh0KSB7XHJcbiAgICAgICAgcmVzLnN0YXR1cyhlcnIuc3RhdHVzIHx8IDUwMCk7XHJcbiAgICAgICAgcmVzLnJlbmRlcignZXJyb3InLCB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlLFxyXG4gICAgICAgICAgICBlcnJvcjogZXJyXHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy8gcHJvZHVjdGlvbiBlcnJvciBoYW5kbGVyXHJcbi8vIG5vIHN0YWNrdHJhY2VzIGxlYWtlZCB0byB1c2VyXHJcbmFwcC51c2UoZnVuY3Rpb24oZXJyLCByZXEsIHJlcywgbmV4dCkge1xyXG4gICAgcmVzLnN0YXR1cyhlcnIuc3RhdHVzIHx8IDUwMCk7XHJcbiAgICByZXMucmVuZGVyKCdlcnJvcicsIHtcclxuICAgICAgICBtZXNzYWdlOiBlcnIubWVzc2FnZSxcclxuICAgICAgICBlcnJvcjoge31cclxuICAgIH0pO1xyXG59KTtcclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGFwcDtcclxuXHJcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "app.js"
      ],
      "names": [
        "express",
        "require",
        "path",
        "logger",
        "cookieParser",
        "bodyParser",
        "session",
        "MongoStore",
        "db",
        "connection",
        "createError",
        "indexRouter",
        "users",
        "poems",
        "authors",
        "app",
        "set",
        "join",
        "__dirname",
        "use",
        "secret",
        "resave",
        "saveUninitialized",
        "store",
        "mongooseConnection",
        "json",
        "urlencoded",
        "extended",
        "static",
        "process",
        "env",
        "NODE_ENV",
        "get",
        "findAllUsers",
        "findOneUser",
        "userLogout",
        "post",
        "addAUser",
        "userLogin",
        "delete",
        "deleteUser",
        "findAllPoems",
        "findOnePoem",
        "addPoem",
        "deletePoem",
        "findAllAuthors",
        "findOneAuthor",
        "addAuthor",
        "put",
        "incrementWorks",
        "deleteWorks",
        "deleteAuthor",
        "req",
        "res",
        "next",
        "err",
        "Error",
        "status",
        "render",
        "message",
        "error",
        "module",
        "exports"
      ],
      "mappings": "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",
      "sourceRoot": "D:\\Webstorm\\poetryWeb",
      "sourcesContent": [
        "var express = require('express');\r\nvar path = require('path');\r\nvar logger = require('morgan');\r\nvar cookieParser = require('cookie-parser');\r\nvar bodyParser = require('body-parser');\r\nvar session = require('express-session');\r\nvar MongoStore = require('connect-mongo')(session);\r\nlet db = require('./routes/connectDB').connection;\r\nvar createError = require('http-errors');\r\n\r\nvar indexRouter = require('./routes/index');\r\nconst users = require('./routes/users');\r\nconst poems = require(\"./routes/poems\");\r\nconst authors = require(\"./routes/authors\");\r\n\r\nvar app = express();\r\n\r\n// view engine setup\r\napp.set('views', path.join(__dirname, 'views'));\r\napp.set('view engine', 'ejs');\r\n\r\n//use sessions for tracking logins\r\napp.use(session({\r\n    secret: 'work hard',\r\n    resave: true,\r\n    saveUninitialized: false,\r\n    store: new MongoStore({\r\n        mongooseConnection: db\r\n    })\r\n}));\r\n\r\napp.use(logger('dev'));\r\n/*\r\napp.use(express.json());\r\napp.use(express.urlencoded({ extended: false }));\r\napp.use(cookieParser());\r\napp.use(express.static(path.join(__dirname, 'public')));\r\n*/\r\n\r\napp.use(bodyParser.json());\r\napp.use(bodyParser.urlencoded({ extended: false }));\r\napp.use(cookieParser());\r\napp.use(express.static(path.join(__dirname, 'public')));\r\nif (process.env.NODE_ENV !== \"test\") {\r\n    app.use(logger(\"dev\"))\r\n}\r\n\r\napp.use('/', indexRouter);\r\napp.use('/users', users);\r\n\r\napp.get('/users', users.findAllUsers);\r\napp.get('/users/:id', users.findOneUser);\r\napp.get('/usersLogout',users.userLogout);\r\napp.post('/usersRegister',users.addAUser);\r\napp.post('/users/login',users.userLogin);\r\napp.delete('/users/:id', users.deleteUser);\r\n\r\napp.get('/poems', poems.findAllPoems);\r\napp.get('/poems/:id', poems.findOnePoem)\r\napp.post('/poems',poems.addPoem);/*\r\napp.put('/poems/:id/like', poems.incrementLikes);\r\napp.put('/poems/:id/unlike',poems.decreaseLikes);*/\r\napp.delete('/poems/:id', poems.deletePoem);\r\n// app.get('/poems/likes', poems.findTotalLikes);\r\n\r\napp.get('/authors', authors.findAllAuthors);\r\napp.get('/authors/:id', authors.findOneAuthor);\r\napp.post('/authors',authors.addAuthor);/*\r\napp.put('/authors/:id/like',authors.incrementLikes);\r\napp.put('/authors/:id/unlike',authors.decreaseLikes);*/\r\napp.put('/authors/:id/works',authors.incrementWorks);\r\napp.put('/authors/:id/deleteWork',authors.deleteWorks);\r\napp.delete('/authors/:id', authors.deleteAuthor);\r\n\r\n\r\n\r\n// catch 404 and forward to error handler\r\napp.use(function(req, res, next) {\r\n    var err = new Error('Not Found');\r\n    err.status = 404;\r\n    next(err);\r\n});\r\n\r\n// error handlers\r\n\r\n// development error handler\r\n// will print stacktrace\r\nif (app.get('env') === 'development') {\r\n    app.use(function(err, req, res, next) {\r\n        res.status(err.status || 500);\r\n        res.render('error', {\r\n            message: err.message,\r\n            error: err\r\n        });\r\n    });\r\n}\r\n\r\n// production error handler\r\n// no stacktraces leaked to user\r\napp.use(function(err, req, res, next) {\r\n    res.status(err.status || 500);\r\n    res.render('error', {\r\n        message: err.message,\r\n        error: {}\r\n    });\r\n});\r\n\r\n\r\nmodule.exports = app;\r\n\r\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1572963054981
  },
  "{\"sourceRoot\":\"D:\\\\Webstorm\\\\poetryWeb\\\\routes\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Webstorm\\\\poetryWeb\",\"filename\":\"D:\\\\Webstorm\\\\poetryWeb\\\\routes\\\\index.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"test \",\"root\":\"D:\\\\Webstorm\\\\poetryWeb\",\"plugins\":[],\"presets\":[]}:7.3.4:test ": {
    "metadata": {},
    "options": {
      "sourceRoot": "D:\\Webstorm\\poetryWeb\\routes",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "D:\\Webstorm\\poetryWeb",
      "filename": "D:\\Webstorm\\poetryWeb\\routes\\index.js",
      "babelrc": false,
      "configFile": false,
      "envName": "test ",
      "root": "D:\\Webstorm\\poetryWeb",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\Webstorm\\poetryWeb\\routes\\index.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "D:\\Webstorm\\poetryWeb\\routes\\index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\Webstorm\\poetryWeb\\routes",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "var express = require('express');\n\nvar router = express.Router();\n/* GET home page. */\n\nrouter.get('/', function (req, res, next) {\n  res.render('index', {\n    title: 'Daily Poem Recommendation'\n  });\n});\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImV4cHJlc3MiLCJyZXF1aXJlIiwicm91dGVyIiwiUm91dGVyIiwiZ2V0IiwicmVxIiwicmVzIiwibmV4dCIsInJlbmRlciIsInRpdGxlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBSUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBRCxDQUFyQjs7QUFDQSxJQUFJQyxNQUFNLEdBQUdGLE9BQU8sQ0FBQ0csTUFBUixFQUFiO0FBRUE7O0FBQ0FELE1BQU0sQ0FBQ0UsR0FBUCxDQUFXLEdBQVgsRUFBZ0IsVUFBU0MsR0FBVCxFQUFjQyxHQUFkLEVBQW1CQyxJQUFuQixFQUF5QjtBQUN2Q0QsRUFBQUEsR0FBRyxDQUFDRSxNQUFKLENBQVcsT0FBWCxFQUFvQjtBQUFFQyxJQUFBQSxLQUFLLEVBQUU7QUFBVCxHQUFwQjtBQUNELENBRkQ7QUFJQUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCVCxNQUFqQiIsInNvdXJjZVJvb3QiOiJEOlxcV2Vic3Rvcm1cXHBvZXRyeVdlYlxccm91dGVzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG52YXIgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxuLyogR0VUIGhvbWUgcGFnZS4gKi9cbnJvdXRlci5nZXQoJy8nLCBmdW5jdGlvbihyZXEsIHJlcywgbmV4dCkge1xuICByZXMucmVuZGVyKCdpbmRleCcsIHsgdGl0bGU6ICdEYWlseSBQb2VtIFJlY29tbWVuZGF0aW9uJyB9KTtcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "express",
        "require",
        "router",
        "Router",
        "get",
        "req",
        "res",
        "next",
        "render",
        "title",
        "module",
        "exports"
      ],
      "mappings": "AAAA,IAAIA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAArB;;AACA,IAAIC,MAAM,GAAGF,OAAO,CAACG,MAAR,EAAb;AAEA;;AACAD,MAAM,CAACE,GAAP,CAAW,GAAX,EAAgB,UAASC,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AACvCD,EAAAA,GAAG,CAACE,MAAJ,CAAW,OAAX,EAAoB;AAAEC,IAAAA,KAAK,EAAE;AAAT,GAApB;AACD,CAFD;AAIAC,MAAM,CAACC,OAAP,GAAiBT,MAAjB",
      "sourceRoot": "D:\\Webstorm\\poetryWeb\\routes",
      "sourcesContent": [
        "var express = require('express');\nvar router = express.Router();\n\n/* GET home page. */\nrouter.get('/', function(req, res, next) {\n  res.render('index', { title: 'Daily Poem Recommendation' });\n});\n\nmodule.exports = router;\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1571738737745
  },
  "{\"sourceRoot\":\"D:\\\\Webstorm\\\\poetryWeb\\\\routes\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Webstorm\\\\poetryWeb\",\"filename\":\"D:\\\\Webstorm\\\\poetryWeb\\\\routes\\\\users.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"test \",\"root\":\"D:\\\\Webstorm\\\\poetryWeb\",\"plugins\":[],\"presets\":[]}:7.3.4:test ": {
    "metadata": {},
    "options": {
      "sourceRoot": "D:\\Webstorm\\poetryWeb\\routes",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "D:\\Webstorm\\poetryWeb",
      "filename": "D:\\Webstorm\\poetryWeb\\routes\\users.js",
      "babelrc": false,
      "configFile": false,
      "envName": "test ",
      "root": "D:\\Webstorm\\poetryWeb",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\Webstorm\\poetryWeb\\routes\\users.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "D:\\Webstorm\\poetryWeb\\routes\\users.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\Webstorm\\poetryWeb\\routes",
        "sourceFileName": "users.js"
      }
    },
    "ast": null,
    "code": "let User = require(\"../models/users\");\n\nlet express = require('express');\n\nlet router = express.Router();\n/* GET users listing. */\n\n/*router.get('/', function(req, res, next) {\r\n  res.send('respond with a resource');\r\n});*/\n\nrouter.findAllUsers = (req, res) => {\n  // Return a JSON representation of our list\n  res.setHeader('Content-Type', 'application/json'); // res.send(JSON.stringify(poems,null,5));\n\n  User.find(function (err, users) {\n    if (err) res.send(err);\n    res.send(JSON.stringify(users, null, 5));\n  });\n};\n\nfunction getByValue(array, id) {\n  var result = array.filter(function (obj) {\n    return obj.id == id;\n  });\n  return result ? result[0] : null; // or undefined\n}\n\nrouter.findOneUser = (req, res) => {\n  res.setHeader('Content-Type', 'application/json');\n  User.find({\n    \"_id\": req.params.id\n  }, function (err, user) {\n    if (err) res.json({\n      message: 'User NOT Found!',\n      errmsg: err\n    });else res.send(JSON.stringify(user, null, 5));\n  });\n};\n\nrouter.addAUser = (req, res) => {\n  // confirm that user typed same password twice\n  if (req.body.password !== req.body.passwordConf) {\n    res.json({\n      message: \"Passwords do not match.\"\n    }); // return next(err);\n  } // If the email hasn't been registered\n  //Add a new user to our list if all the fields are filled (Register)\n  else if (req.body.email && req.body.username && req.body.password && req.body.passwordConf && req.body.gender) {\n      var user = new User();\n      user.username = req.body.username;\n      user.email = req.body.email;\n      user.password = req.body.password;\n      user.gender = req.body.gender;\n      user.save(function (err) {\n        if (err) res.json({\n          message: 'User NOT Added!',\n          errmsg: err\n        });else {\n          req.session.userId = user._id;\n          res.json({\n            message: 'User Successfully Added(Registered)!',\n            data: user\n          }); // return res.redi ('/profile');\n        }\n      });\n    } else {\n      res.json({\n        message: 'All fields required'\n      }); // var err = new Error('All fields required.');\n      // err.status = 400;\n      // return next(err);\n    }\n}; // GET users/login\n\n\nrouter.userLogin = (req, res) => {\n  if (req.body.logemail && req.body.logpassword) {\n    User.authenticate(req.body.logemail, req.body.logpassword, function (error, user) {\n      if (error || !user) {\n        res.json({\n          message: 'Wrong email or password!'\n        }); // var err = new Error('Wrong email or password.');\n        // err.status = 401;\n        // return next(err);\n      } else {\n        req.session.userId = user._id;\n        res.json({\n          data: req.session.userId,\n          message: \"User Successfully Login!\"\n        }); // return res.redi ('/profile');\n      }\n    });\n  }\n}; // GET users/logout\n\n\nrouter.userLogout = (req, res, next) => {\n  if (req.session) {\n    // delete session object\n    req.session.destroy(function (err) {\n      if (err) {\n        return next(err);\n      } else {\n        // return res.redirect('/');\n        res.json({\n          message: \"Successfully log out!\",\n          data: req.session\n        });\n      }\n    });\n  }\n};\n\nrouter.deleteUser = (req, res) => {\n  User.findByIdAndRemove(req.params.id, function (err) {\n    if (err) res.json({\n      message: 'User NOT DELETED!',\n      errmsg: err\n    });else res.json({\n      message: 'User Successfully Deleted!'\n    });\n  });\n};\n\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzLmpzIl0sIm5hbWVzIjpbIlVzZXIiLCJyZXF1aXJlIiwiZXhwcmVzcyIsInJvdXRlciIsIlJvdXRlciIsImZpbmRBbGxVc2VycyIsInJlcSIsInJlcyIsInNldEhlYWRlciIsImZpbmQiLCJlcnIiLCJ1c2VycyIsInNlbmQiLCJKU09OIiwic3RyaW5naWZ5IiwiZ2V0QnlWYWx1ZSIsImFycmF5IiwiaWQiLCJyZXN1bHQiLCJmaWx0ZXIiLCJvYmoiLCJmaW5kT25lVXNlciIsInBhcmFtcyIsInVzZXIiLCJqc29uIiwibWVzc2FnZSIsImVycm1zZyIsImFkZEFVc2VyIiwiYm9keSIsInBhc3N3b3JkIiwicGFzc3dvcmRDb25mIiwiZW1haWwiLCJ1c2VybmFtZSIsImdlbmRlciIsInNhdmUiLCJzZXNzaW9uIiwidXNlcklkIiwiX2lkIiwiZGF0YSIsInVzZXJMb2dpbiIsImxvZ2VtYWlsIiwibG9ncGFzc3dvcmQiLCJhdXRoZW50aWNhdGUiLCJlcnJvciIsInVzZXJMb2dvdXQiLCJuZXh0IiwiZGVzdHJveSIsImRlbGV0ZVVzZXIiLCJmaW5kQnlJZEFuZFJlbW92ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLElBQUlBLElBQUksR0FBR0MsT0FBTyxDQUFDLGlCQUFELENBQWxCOztBQUNBLElBQUlDLE9BQU8sR0FBR0QsT0FBTyxDQUFDLFNBQUQsQ0FBckI7O0FBQ0EsSUFBSUUsTUFBTSxHQUFHRCxPQUFPLENBQUNFLE1BQVIsRUFBYjtBQUVBOztBQUNBOzs7O0FBS0FELE1BQU0sQ0FBQ0UsWUFBUCxHQUFzQixDQUFDQyxHQUFELEVBQU1DLEdBQU4sS0FBYztBQUNsQztBQUNBQSxFQUFBQSxHQUFHLENBQUNDLFNBQUosQ0FBYyxjQUFkLEVBQThCLGtCQUE5QixFQUZrQyxDQUdsQzs7QUFDQVIsRUFBQUEsSUFBSSxDQUFDUyxJQUFMLENBQVUsVUFBU0MsR0FBVCxFQUFjQyxLQUFkLEVBQXFCO0FBQzdCLFFBQUlELEdBQUosRUFD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QyxDQWlCQTs7O0FBQ0F0QixNQUFNLENBQUN5QyxVQUFQLEdBQW9CLENBQUN0QyxHQUFELEVBQU1DLEdBQU4sRUFBV3NDLElBQVgsS0FBb0I7QUFDcEMsTUFBSXZDLEdBQUcsQ0FBQzZCLE9BQVIsRUFBaUI7QUFDYjtBQUNBN0IsSUFBQUEsR0FBRyxDQUFDNkIsT0FBSixDQUFZVyxPQUFaLENBQW9CLFVBQVNwQyxHQUFULEVBQWM7QUFDOUIsVUFBR0EsR0FBSCxFQUFRO0FBQ0osZUFBT21DLElBQUksQ0FBQ25DLEdBQUQsQ0FBWDtBQUNILE9BRkQsTUFFTztBQUNIO0FBQ0FILFFBQUFBLEdBQUcsQ0FBQ2lCLElBQUosQ0FBUztBQUFDQyxVQUFBQSxPQUFPLEVBQUUsdUJBQVY7QUFBbUNhLFVBQUFBLElBQUksRUFBQ2hDLEdBQUcsQ0FBQzZCO0FBQTVDLFNBQVQ7QUFDSDtBQUNKLEtBUEQ7QUFRSDtBQUNKLENBWkQ7O0FBY0FoQyxNQUFNLENBQUM0QyxVQUFQLEdBQW9CLENBQUN6QyxHQUFELEVBQU1DLEdBQU4sS0FBYztBQUNoQ1AsRUFBQUEsSUFBSSxDQUFDZ0QsaUJBQUwsQ0FBdUIxQyxHQUFHLENBQUNnQixNQUFKLENBQVdMLEVBQWxDLEVBQXNDLFVBQVNQLEdBQVQsRUFBYztBQUNsRCxRQUFJQSxHQUFKLEVBQ0VILEdBQUcsQ0FBQ2lCLElBQUosQ0FBUztBQUFFQyxNQUFBQSxPQUFPLEVBQUUsbUJBQVg7QUFBZ0NDLE1BQUFBLE1BQU0sRUFBR2hCO0FBQXpDLEtBQVQsRUFERixLQUdFSCxHQUFHLENBQUNpQixJQUFKLENBQVM7QUFBRUMsTUFBQUEsT0FBTyxFQUFFO0FBQVgsS0FBVDtBQUNILEdBTEQ7QUFNRCxDQVBEOztBQVNBd0IsTUFBTSxDQUFDQyxPQUFQLEdBQWlCL0MsTUFBakIiLCJzb3VyY2VSb290IjoiRDpcXFdlYnN0b3JtXFxwb2V0cnlXZWJcXHJvdXRlcyIsInNvdXJjZXNDb250ZW50IjpbImxldCBVc2VyID0gcmVxdWlyZShcIi4uL21vZGVscy91c2Vyc1wiKTtcclxubGV0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmxldCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xyXG5cclxuLyogR0VUIHVzZXJzIGxpc3RpbmcuICovXHJcbi8qcm91dGVyLmdldCgnLycsIGZ1bmN0aW9uKHJlcSwgcmVzLCBuZXh0KSB7XHJcbiAgcmVzLnNlbmQoJ3Jlc3BvbmQgd2l0aCBhIHJlc291cmNlJyk7XHJcbn0pOyovXHJcblxyXG5cclxucm91dGVyLmZpbmRBbGxVc2VycyA9IChyZXEsIHJlcykgPT4ge1xyXG4gIC8vIFJldHVybiBhIEpTT04gcmVwcmVzZW50YXRpb24gb2Ygb3VyIGxpc3RcclxuICByZXMuc2V0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xyXG4gIC8vIHJlcy5zZW5kKEpTT04uc3RyaW5naWZ5KHBvZW1zLG51bGwsNSkpO1xyXG4gIFVzZXIuZmluZChmdW5jdGlvbihlcnIsIHVzZXJzKSB7XHJcbiAgICBpZiAoZXJyKVxyXG4gICAgICByZXMuc2VuZChlcnIpO1xyXG4gICAgcmVzLnNlbmQoSlNPTi5zdHJpbmdpZnkodXNlcnMsbnVsbCw1KSk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBnZXRCeVZhbHVlKGFycmF5LCBpZCkge1xyXG4gIHZhciByZXN1bHQgID0gYXJyYXkuZmlsdGVyKGZ1bmN0aW9uKG9iail7cmV0dXJuIG9iai5pZCA9PSBpZDt9ICk7XHJcbiAgcmV0dXJuIHJlc3VsdCA/IHJlc3VsdFswXSA6IG51bGw7IC8vIG9yIHVuZGVmaW5lZFxyXG59XHJcblxyXG5yb3V0ZXIuZmluZE9uZVVzZXIgPSAocmVxLCByZXMpID0+IHtcclxuICByZXMuc2V0SGVhZGVyKCdDb250ZW50LVR5cGUnLCdhcHBsaWNhdGlvbi9qc29uJyk7XHJcbiAgVXNlci5maW5kKHsgXCJfaWRcIiA6IHJlcS5wYXJhbXMuaWQgfSxmdW5jdGlvbihlcnIsIHVzZXIpIHtcclxuICAgIGlmIChlcnIpXHJcbiAgICAgIHJlcy5qc29uKHsgbWVzc2FnZTogJ1VzZXIgTk9UIEZvdW5kIScsIGVycm1zZyA6IGVyciB9ICk7XHJcbiAgICBlbHNlXHJcbiAgICAgIHJlcy5zZW5kKEpTT04uc3RyaW5naWZ5KHVzZXIsbnVsbCw1KSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbnJvdXRlci5hZGRBVXNlciA9IChyZXEsIHJlcykgPT4ge1xyXG4gICAgLy8gY29uZmlybSB0aGF0IHVzZXIgdHlwZWQgc2FtZSBwYXNzd29yZCB0d2ljZVxyXG4gICAgaWYgKHJlcS5ib2R5LnBhc3N3b3JkICE9PSByZXEuYm9keS5wYXNzd29yZENvbmYpIHtcclxuICAgICAgICByZXMuanNvbih7IG1lc3NhZ2U6IFwiUGFzc3dvcmRzIGRvIG5vdCBtYXRjaC5cIn0gKTtcclxuICAgICAgICAvLyByZXR1cm4gbmV4dChlcnIpO1xyXG4gICAgfVxyXG4gICAgLy8gSWYgdGhlIGVtYWlsIGhhc24ndCBiZWVuIHJlZ2lzdGVyZWRcclxuICAgIC8vQWRkIGEgbmV3IHVzZXIgdG8gb3VyIGxpc3QgaWYgYWxsIHRoZSBmaWVsZHMgYXJlIGZpbGxlZCAoUmVnaXN0ZXIpXHJcbiAgICBlbHNlIGlmKHJlcS5ib2R5LmVtYWlsICYmIHJlcS5ib2R5LnVzZXJuYW1lICYmIHJlcS5ib2R5LnBhc3N3b3JkICYmIHJlcS5ib2R5LnBhc3N3b3JkQ29uZiAmJiByZXEuYm9keS5nZW5kZXIpIHtcclxuICAgICAgICB2YXIgdXNlciA9IG5ldyBVc2VyKCk7XHJcbiAgICAgICAgdXNlci51c2VybmFtZSA9IHJlcS5ib2R5LnVzZXJuYW1lO1xyXG4gICAgICAgIHVzZXIuZW1haWwgPSByZXEuYm9keS5lbWFpbDtcclxuICAgICAgICB1c2VyLnBhc3N3b3JkID0gcmVxLmJvZHkucGFzc3dvcmQ7XHJcbiAgICAgICAgdXNlci5nZW5kZXIgPSByZXEuYm9keS5nZW5kZXI7XHJcblxyXG4gICAgICAgIHVzZXIuc2F2ZShmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpXHJcbiAgICAgICAgICAgICAgICByZXMuanNvbih7bWVzc2FnZTogJ1VzZXIgTk9UIEFkZGVkIScsIGVycm1zZzogZXJyfSk7XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVxLnNlc3Npb24udXNlcklkID0gdXNlci5faWQ7XHJcbiAgICAgICAgICAgICAgICByZXMuanNvbih7bWVzc2FnZTogJ1VzZXIgU3VjY2Vzc2Z1bGx5IEFkZGVkKFJlZ2lzdGVyZWQpIScsIGRhdGE6IHVzZXJ9KTtcclxuICAgICAgICAgICAgICAgIC8vIHJldHVybiByZXMucmVkaSAoJy9wcm9maWxlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmVzLmpzb24oe21lc3NhZ2U6ICdBbGwgZmllbGRzIHJlcXVpcmVkJ30pO1xyXG4gICAgICAgIC8vIHZhciBlcnIgPSBuZXcgRXJyb3IoJ0FsbCBmaWVsZHMgcmVxdWlyZWQuJyk7XHJcbiAgICAgICAgLy8gZXJyLnN0YXR1cyA9IDQwMDtcclxuICAgICAgICAvLyByZXR1cm4gbmV4dChlcnIpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuLy8gR0VUIHVzZXJzL2xvZ2luXHJcbnJvdXRlci51c2VyTG9naW4gPSAocmVxLCByZXMpID0+IHtcclxuICAgIGlmIChyZXEuYm9keS5sb2dlbWFpbCAmJiByZXEuYm9keS5sb2dwYXNzd29yZCkge1xyXG4gICAgICAgIFVzZXIuYXV0aGVudGljYXRlKHJlcS5ib2R5LmxvZ2VtYWlsLCByZXEuYm9keS5sb2dwYXNzd29yZCwgZnVuY3Rpb24gKGVycm9yLCB1c2VyKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvciB8fCAhdXNlcikge1xyXG4gICAgICAgICAgICAgICAgcmVzLmpzb24oe21lc3NhZ2U6ICdXcm9uZyBlbWFpbCBvciBwYXNzd29yZCEnfSlcclxuICAgICAgICAgICAgICAgIC8vIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1dyb25nIGVtYWlsIG9yIHBhc3N3b3JkLicpO1xyXG4gICAgICAgICAgICAgICAgLy8gZXJyLnN0YXR1cyA9IDQwMTtcclxuICAgICAgICAgICAgICAgIC8vIHJldHVybiBuZXh0KGVycik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXEuc2Vzc2lvbi51c2VySWQgPSB1c2VyLl9pZDtcclxuICAgICAgICAgICAgICAgIHJlcy5qc29uKHtkYXRhOiByZXEuc2Vzc2lvbi51c2VySWQsIG1lc3NhZ2U6IFwiVXNlciBTdWNjZXNzZnVsbHkgTG9naW4hXCJ9KTtcclxuICAgICAgICAgICAgICAgIC8vIHJldHVybiByZXMucmVkaSAoJy9wcm9maWxlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gR0VUIHVzZXJzL2xvZ291dFxyXG5yb3V0ZXIudXNlckxvZ291dCA9IChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4gICAgaWYgKHJlcS5zZXNzaW9uKSB7XHJcbiAgICAgICAgLy8gZGVsZXRlIHNlc3Npb24gb2JqZWN0XHJcbiAgICAgICAgcmVxLnNlc3Npb24uZGVzdHJveShmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgaWYoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV4dChlcnIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gcmV0dXJuIHJlcy5yZWRpcmVjdCgnLycpO1xyXG4gICAgICAgICAgICAgICAgcmVzLmpzb24oe21lc3NhZ2U6IFwiU3VjY2Vzc2Z1bGx5IGxvZyBvdXQhXCIsIGRhdGE6cmVxLnNlc3Npb259KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59O1xyXG5cclxucm91dGVyLmRlbGV0ZVVzZXIgPSAocmVxLCByZXMpID0+IHtcclxuICBVc2VyLmZpbmRCeUlkQW5kUmVtb3ZlKHJlcS5wYXJhbXMuaWQsIGZ1bmN0aW9uKGVycikge1xyXG4gICAgaWYgKGVycilcclxuICAgICAgcmVzLmpzb24oeyBtZXNzYWdlOiAnVXNlciBOT1QgREVMRVRFRCEnLCBlcnJtc2cgOiBlcnIgfSApO1xyXG4gICAgZWxzZVxyXG4gICAgICByZXMuanNvbih7IG1lc3NhZ2U6ICdVc2VyIFN1Y2Nlc3NmdWxseSBEZWxldGVkISd9KTtcclxuICB9KTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcm91dGVyOyJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "users.js"
      ],
      "names": [
        "User",
        "require",
        "express",
        "router",
        "Router",
        "findAllUsers",
        "req",
        "res",
        "setHeader",
        "find",
        "err",
        "users",
        "send",
        "JSON",
        "stringify",
        "getByValue",
        "array",
        "id",
        "result",
        "filter",
        "obj",
        "findOneUser",
        "params",
        "user",
        "json",
        "message",
        "errmsg",
        "addAUser",
        "body",
        "password",
        "passwordConf",
        "email",
        "username",
        "gender",
        "save",
        "session",
        "userId",
        "_id",
        "data",
        "userLogin",
        "logemail",
        "logpassword",
        "authenticate",
        "error",
        "userLogout",
        "next",
        "destroy",
        "deleteUser",
        "findByIdAndRemove",
        "module",
        "exports"
      ],
      "mappings": "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",
      "sourceRoot": "D:\\Webstorm\\poetryWeb\\routes",
      "sourcesContent": [
        "let User = require(\"../models/users\");\r\nlet express = require('express');\r\nlet router = express.Router();\r\n\r\n/* GET users listing. */\r\n/*router.get('/', function(req, res, next) {\r\n  res.send('respond with a resource');\r\n});*/\r\n\r\n\r\nrouter.findAllUsers = (req, res) => {\r\n  // Return a JSON representation of our list\r\n  res.setHeader('Content-Type', 'application/json');\r\n  // res.send(JSON.stringify(poems,null,5));\r\n  User.find(function(err, users) {\r\n    if (err)\r\n      res.send(err);\r\n    res.send(JSON.stringify(users,null,5));\r\n  });\r\n};\r\n\r\nfunction getByValue(array, id) {\r\n  var result  = array.filter(function(obj){return obj.id == id;} );\r\n  return result ? result[0] : null; // or undefined\r\n}\r\n\r\nrouter.findOneUser = (req, res) => {\r\n  res.setHeader('Content-Type','application/json');\r\n  User.find({ \"_id\" : req.params.id },function(err, user) {\r\n    if (err)\r\n      res.json({ message: 'User NOT Found!', errmsg : err } );\r\n    else\r\n      res.send(JSON.stringify(user,null,5));\r\n  });\r\n}\r\n\r\nrouter.addAUser = (req, res) => {\r\n    // confirm that user typed same password twice\r\n    if (req.body.password !== req.body.passwordConf) {\r\n        res.json({ message: \"Passwords do not match.\"} );\r\n        // return next(err);\r\n    }\r\n    // If the email hasn't been registered\r\n    //Add a new user to our list if all the fields are filled (Register)\r\n    else if(req.body.email && req.body.username && req.body.password && req.body.passwordConf && req.body.gender) {\r\n        var user = new User();\r\n        user.username = req.body.username;\r\n        user.email = req.body.email;\r\n        user.password = req.body.password;\r\n        user.gender = req.body.gender;\r\n\r\n        user.save(function (err) {\r\n            if (err)\r\n                res.json({message: 'User NOT Added!', errmsg: err});\r\n            else {\r\n                req.session.userId = user._id;\r\n                res.json({message: 'User Successfully Added(Registered)!', data: user});\r\n                // return res.redi ('/profile');\r\n            }\r\n        })\r\n    }\r\n    else {\r\n        res.json({message: 'All fields required'});\r\n        // var err = new Error('All fields required.');\r\n        // err.status = 400;\r\n        // return next(err);\r\n    }\r\n};\r\n\r\n// GET users/login\r\nrouter.userLogin = (req, res) => {\r\n    if (req.body.logemail && req.body.logpassword) {\r\n        User.authenticate(req.body.logemail, req.body.logpassword, function (error, user) {\r\n            if (error || !user) {\r\n                res.json({message: 'Wrong email or password!'})\r\n                // var err = new Error('Wrong email or password.');\r\n                // err.status = 401;\r\n                // return next(err);\r\n            } else {\r\n                req.session.userId = user._id;\r\n                res.json({data: req.session.userId, message: \"User Successfully Login!\"});\r\n                // return res.redi ('/profile');\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n// GET users/logout\r\nrouter.userLogout = (req, res, next) => {\r\n    if (req.session) {\r\n        // delete session object\r\n        req.session.destroy(function(err) {\r\n            if(err) {\r\n                return next(err);\r\n            } else {\r\n                // return res.redirect('/');\r\n                res.json({message: \"Successfully log out!\", data:req.session});\r\n            }\r\n        });\r\n    }\r\n};\r\n\r\nrouter.deleteUser = (req, res) => {\r\n  User.findByIdAndRemove(req.params.id, function(err) {\r\n    if (err)\r\n      res.json({ message: 'User NOT DELETED!', errmsg : err } );\r\n    else\r\n      res.json({ message: 'User Successfully Deleted!'});\r\n  });\r\n};\r\n\r\nmodule.exports = router;"
      ]
    },
    "sourceType": "module",
    "mtime": 1572947537980
  },
  "{\"sourceRoot\":\"D:\\\\Webstorm\\\\poetryWeb\\\\models\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Webstorm\\\\poetryWeb\",\"filename\":\"D:\\\\Webstorm\\\\poetryWeb\\\\models\\\\users.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"test \",\"root\":\"D:\\\\Webstorm\\\\poetryWeb\",\"plugins\":[],\"presets\":[]}:7.3.4:test ": {
    "metadata": {},
    "options": {
      "sourceRoot": "D:\\Webstorm\\poetryWeb\\models",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "D:\\Webstorm\\poetryWeb",
      "filename": "D:\\Webstorm\\poetryWeb\\models\\users.js",
      "babelrc": false,
      "configFile": false,
      "envName": "test ",
      "root": "D:\\Webstorm\\poetryWeb",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\Webstorm\\poetryWeb\\models\\users.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "D:\\Webstorm\\poetryWeb\\models\\users.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\Webstorm\\poetryWeb\\models",
        "sourceFileName": "users.js"
      }
    },
    "ast": null,
    "code": "let mongoose = require('../routes/connectDB');\n\nvar bcrypt = require('bcrypt');\n\nlet Schema = mongoose.Schema;\nlet UserSchema = new Schema({\n  username: {\n    type: String,\n    unique: true,\n    required: true,\n    trim: true\n  },\n  email: {\n    type: String,\n    unique: true,\n    required: true,\n    trim: true\n  },\n  password: {\n    type: String,\n    required: true\n  },\n  gender: String,\n  likes: [{\n    type: Schema.Types.ObjectId,\n    ref: 'poems'\n  }]\n}, {\n  collection: 'users'\n}); //authenticate input against database\n\nUserSchema.statics.authenticate = function (email, password, callback) {\n  User.findOne({\n    email: email\n  }).exec(function (err, user) {\n    if (err) {\n      return callback(err);\n    } else if (!user) {\n      var err = new Error('User not found.');\n      err.status = 401;\n      return callback(err);\n    }\n\n    bcrypt.compare(password, user.password, function (err, result) {\n      if (result === true) {\n        return callback(null, user);\n      } else {\n        return callback();\n      }\n    });\n  });\n}; //hashing a password before saving it to the database\n\n\nUserSchema.pre('save', function (next) {\n  var user = this;\n  bcrypt.hash(user.password, 10, function (err, hash) {\n    if (err) {\n      return next(err);\n    }\n\n    user.password = hash;\n    next();\n  });\n});\nvar User = mongoose.model('User', UserSchema);\nmodule.exports = User;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzLmpzIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwicmVxdWlyZSIsImJjcnlwdCIsIlNjaGVtYSIsIlVzZXJTY2hlbWEiLCJ1c2VybmFtZSIsInR5cGUiLCJTdHJpbmciLCJ1bmlxdWUiLCJyZXF1aXJlZCIsInRyaW0iLCJlbWFpbCIsInBhc3N3b3JkIiwiZ2VuZGVyIiwibGlrZXMiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwiY29sbGVjdGlvbiIsInN0YXRpY3MiLCJhdXRoZW50aWNhdGUiLCJjYWxsYmFjayIsIlVzZXIiLCJmaW5kT25lIiwiZXhlYyIsImVyciIsInVzZXIiLCJFcnJvciIsInN0YXR1cyIsImNvbXBhcmUiLCJyZXN1bHQiLCJwcmUiLCJuZXh0IiwiaGFzaCIsIm1vZGVsIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBSUEsUUFBUSxHQUFHQyxPQUFPLENBQUMscUJBQUQsQ0FBdEI7O0FBQ0EsSUFBSUMsTUFBTSxHQUFHRCxPQUFPLENBQUMsUUFBRCxDQUFwQjs7QUFFQSxJQUFJRSxNQUFNLEdBQUdILFFBQVEsQ0FBQ0csTUFBdEI7QUFDQSxJQUFJQyxVQUFVLEdBQUcsSUFBSUQsTUFBSixDQUFXO0FBQ3BCRSxFQUFBQSxRQUFRLEVBQUU7QUFDTkMsSUFBQUEsSUFBSSxFQUFFQyxNQURBO0FBRU5DLElBQUFBLE1BQU0sRUFBRSxJQUZGO0FBR05DLElBQUFBLFFBQVEsRUFBRSxJQUhKO0FBSU5DLElBQUFBLElBQUksRUFBRTtBQUpBLEdBRFU7QUFPcEJDLEVBQUFBLEtBQUssRUFBRTtBQUNITCxJQUFBQSxJQUFJLEVBQUVDLE1BREg7QUFFSEMsSUFBQUEsTUFBTSxFQUFFLElBRkw7QUFHSEMsSUFBQUEsUUFBUSxFQUFFLElBSFA7QUFJSEMsSUFBQUEsSUFBSSxFQUFFO0FBSkgsR0FQYTtBQWFwQkUsRUFBQUEsUUFBUSxFQUFFO0FBQ05OLElBQUFBLElBQUksRUFBRUMsTUFEQTtBQUVORSxJQUFBQSxRQUFRLEVBQUU7QUFGSixHQWJVO0FBaUJwQkksRUFBQUEsTUFBTSxFQUFDTixNQWpCYTtBQWtCcEJPLEVBQUFBLEtBQUssRUFBRSxDQUFDO0FBQUNSLElBQUFBLElBQUksRUFBRUgsTUFBTSxDQUFDWSxLQUFQLENBQWFDLFFBQXBCO0FBQThCQyxJQUFBQSxHQUFHLEVBQUU7QUFBbkMsR0FBRDtBQWxCYSxDQUFYLEVBb0JiO0FBQUVDLEVBQUFBLFVBQVUsRUFBRTtBQUFkLENBcEJhLENBQWpCLEMsQ0F1QkE7O0FBQ0FkLFVBQVUsQ0FBQ2UsT0FBWCxDQUFtQkMsWUFBbkIsR0FBa0MsVUFBVVQsS0FBVixFQUFpQkMsUUFBakIsRUFBMkJTLFFBQTNCLEVBQXFDO0FBQ25FQyxFQUFBQSxJQUFJLENBQUNDLE9BQUwsQ0FBYTtBQUFDWixJQUFBQSxLQUFLLEVBQUVBO0FBQVIsR0FBYixFQUNLYSxJQURMLENBQ1UsVUFBVUMsR0FBVixFQUFlQyxJQUFmLEVBQXFCO0FBQ3ZCLFFBQUlELEdBQUosRUFBUztBQUNMLGFBQU9KLFFBQVEsQ0FBQ0ksR0FBRCxDQUFmO0FBQ0gsS0FGRCxNQUdLLElBQUksQ0FBQ0MsSUFBTCxFQUFXO0FBQ1osVUFBSUQsR0FBRyxHQUFHLElBQUlFLEtBQUosQ0FBVSxpQkFBVixDQUFWO0FBQ0FGLE1BQUFBLEdBQUcsQ0FBQ0csTUFBSixHQUFhLEdBQWI7QUFDQSxhQUFPUCxRQUFRLENBQUNJLEdBQUQsQ0FBZjtBQUNIOztBQUNEdkIsSUFBQUEsTUFBTSxDQUFDMkIsT0FBUCxDQUFlakIsUUFBZixFQUF5QmMsSUFBSSxDQUFDZCxRQUE5QixFQUF3QyxVQUFVYSxHQUFWLEVBQWVLLE1BQWYsRUFBdUI7QUFDM0QsVUFBSUEsTUFBTSxLQUFLLElBQWYsRUFBcUI7QUFDakIsZUFBT1QsUUFBUSxDQUFDLElBQUQsRUFBT0ssSUFBUCxDQUFmO0FBQ0gsT0FGRCxNQUVPO0FBQ0gsZUFBT0wsUUFBUSxFQUFmO0FBQ0g7QUFDSixLQU5EO0FBT0gsR0FqQkw7QUFrQkgsQ0FuQkQsQyxDQXNCQTs7O0FBQ0FqQixVQUFVLENBQUMyQixHQUFYLENBQWUsTUFBZixFQUF1QixVQUFVQyxJQUFWLEVBQWdCO0FBQy9CLE1BQUlOLElBQUksR0FBRyxJQUFYO0FBQ0F4QixFQUFBQSxNQUFNLENBQUMrQixJQUFQLENBQVlQLElBQUksQ0FBQ2QsUUFBakIsRUFBMkIsRUFBM0IsRUFBK0IsVUFBVWEsR0FBVixFQUFlUSxJQUFmLEVBQXFCO0FBQzVDLFFBQUlSLEdBQUosRUFBUztBQUNELGFBQU9PLElBQUksQ0FBQ1AsR0FBRCxDQUFYO0FBQ1A7O0FBQ0RDLElBQUFBLElBQUksQ0FBQ2QsUUFBTCxHQUFnQnFCLElBQWhCO0FBQ0FELElBQUFBLElBQUk7QUFDWCxHQU5EO0FBT1AsQ0FURDtBQVlBLElBQUlWLElBQUksR0FBR3RCLFFBQVEsQ0FBQ2tDLEtBQVQsQ0FBZSxNQUFmLEVBQXVCOUIsVUFBdkIsQ0FBWDtBQUNBK0IsTUFBTSxDQUFDQyxPQUFQLEdBQWlCZCxJQUFqQiIsInNvdXJjZVJvb3QiOiJEOlxcV2Vic3Rvcm1cXHBvZXRyeVdlYlxcbW9kZWxzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IG1vbmdvb3NlID0gcmVxdWlyZSgnLi4vcm91dGVzL2Nvbm5lY3REQicpO1xyXG52YXIgYmNyeXB0ID0gcmVxdWlyZSgnYmNyeXB0Jyk7XHJcblxyXG5sZXQgU2NoZW1hID0gbW9uZ29vc2UuU2NoZW1hO1xyXG5sZXQgVXNlclNjaGVtYSA9IG5ldyBTY2hlbWEoe1xyXG4gICAgICAgIHVzZXJuYW1lOiB7XHJcbiAgICAgICAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgICAgICAgdW5pcXVlOiB0cnVlLFxyXG4gICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICAgICAgdHJpbTogdHJ1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW1haWw6IHtcclxuICAgICAgICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICAgICAgICB1bmlxdWU6IHRydWUsXHJcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgICAgICB0cmltOiB0cnVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBwYXNzd29yZDoge1xyXG4gICAgICAgICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2VuZGVyOlN0cmluZyxcclxuICAgICAgICBsaWtlczogW3t0eXBlOiBTY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogJ3BvZW1zJ31dXHJcbiAgICB9LFxyXG4gICAgeyBjb2xsZWN0aW9uOiAndXNlcnMnfVxyXG4pO1xyXG5cclxuLy9hdXRoZW50aWNhdGUgaW5wdXQgYWdhaW5zdCBkYXRhYmFzZVxyXG5Vc2VyU2NoZW1hLnN0YXRpY3MuYXV0aGVudGljYXRlID0gZnVuY3Rpb24gKGVtYWlsLCBwYXNzd29yZCwgY2FsbGJhY2spIHtcclxuICAgIFVzZXIuZmluZE9uZSh7ZW1haWw6IGVtYWlsfSlcclxuICAgICAgICAuZXhlYyhmdW5jdGlvbiAoZXJyLCB1c2VyKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoIXVzZXIpIHtcclxuICAgICAgICAgICAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1VzZXIgbm90IGZvdW5kLicpO1xyXG4gICAgICAgICAgICAgICAgZXJyLnN0YXR1cyA9IDQwMTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkLCBmdW5jdGlvbiAoZXJyLCByZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgdXNlcik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG59XHJcblxyXG5cclxuLy9oYXNoaW5nIGEgcGFzc3dvcmQgYmVmb3JlIHNhdmluZyBpdCB0byB0aGUgZGF0YWJhc2VcclxuVXNlclNjaGVtYS5wcmUoJ3NhdmUnLCBmdW5jdGlvbiAobmV4dCkge1xyXG4gICAgICAgIHZhciB1c2VyID0gdGhpcztcclxuICAgICAgICBiY3J5cHQuaGFzaCh1c2VyLnBhc3N3b3JkLCAxMCwgZnVuY3Rpb24gKGVyciwgaGFzaCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV4dChlcnIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdXNlci5wYXNzd29yZCA9IGhhc2g7XHJcbiAgICAgICAgICAgICAgICBuZXh0KCk7XHJcbiAgICAgICAgfSlcclxufSk7XHJcblxyXG5cclxudmFyIFVzZXIgPSBtb25nb29zZS5tb2RlbCgnVXNlcicsIFVzZXJTY2hlbWEpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IFVzZXI7Il19",
    "map": {
      "version": 3,
      "sources": [
        "users.js"
      ],
      "names": [
        "mongoose",
        "require",
        "bcrypt",
        "Schema",
        "UserSchema",
        "username",
        "type",
        "String",
        "unique",
        "required",
        "trim",
        "email",
        "password",
        "gender",
        "likes",
        "Types",
        "ObjectId",
        "ref",
        "collection",
        "statics",
        "authenticate",
        "callback",
        "User",
        "findOne",
        "exec",
        "err",
        "user",
        "Error",
        "status",
        "compare",
        "result",
        "pre",
        "next",
        "hash",
        "model",
        "module",
        "exports"
      ],
      "mappings": "AAAA,IAAIA,QAAQ,GAAGC,OAAO,CAAC,qBAAD,CAAtB;;AACA,IAAIC,MAAM,GAAGD,OAAO,CAAC,QAAD,CAApB;;AAEA,IAAIE,MAAM,GAAGH,QAAQ,CAACG,MAAtB;AACA,IAAIC,UAAU,GAAG,IAAID,MAAJ,CAAW;AACpBE,EAAAA,QAAQ,EAAE;AACNC,IAAAA,IAAI,EAAEC,MADA;AAENC,IAAAA,MAAM,EAAE,IAFF;AAGNC,IAAAA,QAAQ,EAAE,IAHJ;AAINC,IAAAA,IAAI,EAAE;AAJA,GADU;AAOpBC,EAAAA,KAAK,EAAE;AACHL,IAAAA,IAAI,EAAEC,MADH;AAEHC,IAAAA,MAAM,EAAE,IAFL;AAGHC,IAAAA,QAAQ,EAAE,IAHP;AAIHC,IAAAA,IAAI,EAAE;AAJH,GAPa;AAapBE,EAAAA,QAAQ,EAAE;AACNN,IAAAA,IAAI,EAAEC,MADA;AAENE,IAAAA,QAAQ,EAAE;AAFJ,GAbU;AAiBpBI,EAAAA,MAAM,EAACN,MAjBa;AAkBpBO,EAAAA,KAAK,EAAE,CAAC;AAACR,IAAAA,IAAI,EAAEH,MAAM,CAACY,KAAP,CAAaC,QAApB;AAA8BC,IAAAA,GAAG,EAAE;AAAnC,GAAD;AAlBa,CAAX,EAoBb;AAAEC,EAAAA,UAAU,EAAE;AAAd,CApBa,CAAjB,C,CAuBA;;AACAd,UAAU,CAACe,OAAX,CAAmBC,YAAnB,GAAkC,UAAUT,KAAV,EAAiBC,QAAjB,EAA2BS,QAA3B,EAAqC;AACnEC,EAAAA,IAAI,CAACC,OAAL,CAAa;AAACZ,IAAAA,KAAK,EAAEA;AAAR,GAAb,EACKa,IADL,CACU,UAAUC,GAAV,EAAeC,IAAf,EAAqB;AACvB,QAAID,GAAJ,EAAS;AACL,aAAOJ,QAAQ,CAACI,GAAD,CAAf;AACH,KAFD,MAGK,IAAI,CAACC,IAAL,EAAW;AACZ,UAAID,GAAG,GAAG,IAAIE,KAAJ,CAAU,iBAAV,CAAV;AACAF,MAAAA,GAAG,CAACG,MAAJ,GAAa,GAAb;AACA,aAAOP,QAAQ,CAACI,GAAD,CAAf;AACH;;AACDvB,IAAAA,MAAM,CAAC2B,OAAP,CAAejB,QAAf,EAAyBc,IAAI,CAACd,QAA9B,EAAwC,UAAUa,GAAV,EAAeK,MAAf,EAAuB;AAC3D,UAAIA,MAAM,KAAK,IAAf,EAAqB;AACjB,eAAOT,QAAQ,CAAC,IAAD,EAAOK,IAAP,CAAf;AACH,OAFD,MAEO;AACH,eAAOL,QAAQ,EAAf;AACH;AACJ,KAND;AAOH,GAjBL;AAkBH,CAnBD,C,CAsBA;;;AACAjB,UAAU,CAAC2B,GAAX,CAAe,MAAf,EAAuB,UAAUC,IAAV,EAAgB;AAC/B,MAAIN,IAAI,GAAG,IAAX;AACAxB,EAAAA,MAAM,CAAC+B,IAAP,CAAYP,IAAI,CAACd,QAAjB,EAA2B,EAA3B,EAA+B,UAAUa,GAAV,EAAeQ,IAAf,EAAqB;AAC5C,QAAIR,GAAJ,EAAS;AACD,aAAOO,IAAI,CAACP,GAAD,CAAX;AACP;;AACDC,IAAAA,IAAI,CAACd,QAAL,GAAgBqB,IAAhB;AACAD,IAAAA,IAAI;AACX,GAND;AAOP,CATD;AAYA,IAAIV,IAAI,GAAGtB,QAAQ,CAACkC,KAAT,CAAe,MAAf,EAAuB9B,UAAvB,CAAX;AACA+B,MAAM,CAACC,OAAP,GAAiBd,IAAjB",
      "sourceRoot": "D:\\Webstorm\\poetryWeb\\models",
      "sourcesContent": [
        "let mongoose = require('../routes/connectDB');\r\nvar bcrypt = require('bcrypt');\r\n\r\nlet Schema = mongoose.Schema;\r\nlet UserSchema = new Schema({\r\n        username: {\r\n            type: String,\r\n            unique: true,\r\n            required: true,\r\n            trim: true\r\n        },\r\n        email: {\r\n            type: String,\r\n            unique: true,\r\n            required: true,\r\n            trim: true\r\n        },\r\n        password: {\r\n            type: String,\r\n            required: true,\r\n        },\r\n        gender:String,\r\n        likes: [{type: Schema.Types.ObjectId, ref: 'poems'}]\r\n    },\r\n    { collection: 'users'}\r\n);\r\n\r\n//authenticate input against database\r\nUserSchema.statics.authenticate = function (email, password, callback) {\r\n    User.findOne({email: email})\r\n        .exec(function (err, user) {\r\n            if (err) {\r\n                return callback(err)\r\n            }\r\n            else if (!user) {\r\n                var err = new Error('User not found.');\r\n                err.status = 401;\r\n                return callback(err);\r\n            }\r\n            bcrypt.compare(password, user.password, function (err, result) {\r\n                if (result === true) {\r\n                    return callback(null, user);\r\n                } else {\r\n                    return callback();\r\n                }\r\n            })\r\n        });\r\n}\r\n\r\n\r\n//hashing a password before saving it to the database\r\nUserSchema.pre('save', function (next) {\r\n        var user = this;\r\n        bcrypt.hash(user.password, 10, function (err, hash) {\r\n                if (err) {\r\n                        return next(err);\r\n                }\r\n                user.password = hash;\r\n                next();\r\n        })\r\n});\r\n\r\n\r\nvar User = mongoose.model('User', UserSchema);\r\nmodule.exports = User;"
      ]
    },
    "sourceType": "module",
    "mtime": 1572880122542
  },
  "{\"sourceRoot\":\"D:\\\\Webstorm\\\\poetryWeb\\\\routes\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Webstorm\\\\poetryWeb\",\"filename\":\"D:\\\\Webstorm\\\\poetryWeb\\\\routes\\\\poems.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"test \",\"root\":\"D:\\\\Webstorm\\\\poetryWeb\",\"plugins\":[],\"presets\":[]}:7.3.4:test ": {
    "metadata": {},
    "options": {
      "sourceRoot": "D:\\Webstorm\\poetryWeb\\routes",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "D:\\Webstorm\\poetryWeb",
      "filename": "D:\\Webstorm\\poetryWeb\\routes\\poems.js",
      "babelrc": false,
      "configFile": false,
      "envName": "test ",
      "root": "D:\\Webstorm\\poetryWeb",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\Webstorm\\poetryWeb\\routes\\poems.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "D:\\Webstorm\\poetryWeb\\routes\\poems.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\Webstorm\\poetryWeb\\routes",
        "sourceFileName": "poems.js"
      }
    },
    "ast": null,
    "code": "let Poem = require(\"../models/poems\");\n\nlet User = require(\"../models/users\");\n\nlet express = require('express');\n\nlet router = express.Router();\n\nrouter.findAllPoems = (req, res) => {\n  // Return a JSON representation of our list\n  res.setHeader('Content-Type', 'application/json');\n  Poem.find(function (err, poems) {\n    if (err) res.send(err);\n    res.send(JSON.stringify(poems, null, 5));\n  });\n};\n\nfunction getByValue(array, id) {\n  var result = array.filter(function (obj) {\n    return obj.id == id;\n  });\n  return result ? result[0] : null; // or undefined\n}\n\nrouter.findOnePoem = (req, res) => {\n  res.setHeader('Content-Type', 'application/json');\n  Poem.find({\n    \"_id\": req.params.id\n  }, function (err, poem) {\n    if (err) res.json({\n      message: 'Poem NOT Found!',\n      errmsg: err\n    });else res.send(JSON.stringify(poem, null, 5));\n  });\n};\n\nrouter.addPoem = (req, res) => {\n  //Add a new donation to our list\n  var poem = new Poem();\n  poem.title = req.body.title;\n  poem.author = req.body.author;\n  poem.save(function (err) {\n    if (err) res.json({\n      message: 'Poem NOT Added!',\n      errmsg: err\n    });else res.json({\n      message: 'Poem Successfully Added!',\n      data: poem\n    });\n  });\n};\n\nrouter.incrementLikes = (req, res) => {\n  Poem.findById(req.params.id, function (err, poem) {\n    if (err) res.json({\n      message: 'Poem NOT Found!',\n      errmsg: err\n    });else {\n      poem.likes.push(req.session.userId);\n      /*if(poem.find( { likes: req.session.userId} )){\r\n          res.json({ message: 'You have already liked this poem!', errmsg : err } );\r\n      }\r\n      else {\r\n          poem.likes.push(req.session.userId);\r\n          //record which poem user liked, but didn't work. So users don't know what poems they have liked\r\n          User.findById(req.session.userId, function(err,user){\r\n              if (err)\r\n                  res.json({ message: 'User NOT Found!', errmsg : err } );\r\n              else {\r\n                  user.likes.push(poem._id);\r\n              }\r\n          })*/\n\n      poem.save(function (err) {\n        if (err) res.json({\n          message: 'Poem NOT liked!',\n          errmsg: err\n        });else res.json({\n          message: 'Poem Successfully Liked!',\n          data: poem\n        });\n      });\n    }\n  });\n};\n\nrouter.decreaseLikes = (req, res) => {\n  Poem.findById(req.params.id, function (err, poem) {\n    if (err) res.json({\n      message: 'Poem NOT Found!',\n      errmsg: err\n    });else {\n      poem.likes.remove(req.session.userId);\n      poem.save(function (err) {\n        if (err) res.json({\n          message: 'Poem NOT liked!',\n          errmsg: err\n        });else res.json({\n          message: 'Poem Successfully Unliked!',\n          data: poem\n        });\n      });\n    }\n  });\n};\n\nrouter.deletePoem = (req, res) => {\n  Poem.findByIdAndRemove(req.params.id, function (err) {\n    if (err) res.json({\n      message: 'Poem NOT DELETED!',\n      errmsg: err\n    });else res.json({\n      message: 'Poem Successfully Deleted!'\n    });\n  });\n};\n/*\r\nfunction getTotalLikes(array) {\r\n    let totalLikes = 0;\r\n    array.forEach(function(obj) { totalLikes += obj.likes; });\r\n    return totalLikes;\r\n}\r\n\r\nrouter.findTotalLikes = (req, res) => {\r\n    Poem.find(function(err, poem) {\r\n        if (err)\r\n            res.send(err);\r\n        else\r\n            res.json({ totalLikes : getTotalLikes(poem) });\r\n    });\r\n}*/\n\n\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvZW1zLmpzIl0sIm5hbWVzIjpbIlBvZW0iLCJyZXF1aXJlIiwiVXNlciIsImV4cHJlc3MiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJmaW5kQWxsUG9lbXMiLCJyZXEiLCJyZXMiLCJzZXRIZWFkZXIiLCJmaW5kIiwiZXJyIiwicG9lbXMiLCJzZW5kIiwiSlNPTiIsInN0cmluZ2lmeSIsImdldEJ5VmFsdWUiLCJhcnJheSIsImlkIiwicmVzdWx0IiwiZmlsdGVyIiwib2JqIiwiZmluZE9uZVBvZW0iLCJwYXJhbXMiLCJwb2VtIiwianNvbiIsIm1lc3NhZ2UiLCJlcnJtc2ciLCJhZGRQb2VtIiwidGl0bGUiLCJib2R5IiwiYXV0aG9yIiwic2F2ZSIsImRhdGEiLCJpbmNyZW1lbnRMaWtlcyIsImZpbmRCeUlkIiwibGlrZXMiLCJwdXNoIiwic2Vzc2lvbiIsInVzZXJJZCIsImRlY3JlYXNlTGlrZXMiLCJyZW1vdmUiLCJkZWxldGVQb2VtIiwiZmluZEJ5SWRBbmRSZW1vdmUiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFJQSxJQUFJLEdBQUdDLE9BQU8sQ0FBQyxpQkFBRCxDQUFsQjs7QUFDQSxJQUFJQyxJQUFJLEdBQUdELE9BQU8sQ0FBQyxpQkFBRCxDQUFsQjs7QUFDQSxJQUFJRSxPQUFPLEdBQUdGLE9BQU8sQ0FBQyxTQUFELENBQXJCOztBQUNBLElBQUlHLE1BQU0sR0FBR0QsT0FBTyxDQUFDRSxNQUFSLEVBQWI7O0FBRUFELE1BQU0sQ0FBQ0UsWUFBUCxHQUFzQixDQUFDQyxHQUFELEVBQU1DLEdBQU4sS0FBYztBQUNoQztBQUNBQSxFQUFBQSxHQUFHLENBQUNDLFNBQUosQ0FBYyxjQUFkLEVBQThCLGtCQUE5QjtBQUNBVCxFQUFBQSxJQUFJLENBQUNVLElBQUwsQ0FBVSxVQUFTQyxHQUFULEVBQWNDLEtBQWQsRUFBcUI7QUFDM0IsUUFBSUQsR0FBSixFQUNJSCxHQUFHLENBQUNLLElBQUosQ0FBU0YsR0FBVDtBQUNKSCxJQUFBQSxHQUFHLENBQUNLLElBQUosQ0FBU0MsSUFBSSxDQUFDQyxTQUFMLENBQWVILEtBQWYsRUFBcUIsSUFBckIsRUFBMEIsQ0FBMUIsQ0FBVDtBQUNILEdBSkQ7QUFLSCxDQVJEOztBQVVBLFNBQVNJLFVBQVQsQ0FBb0JDLEtBQXBCLEVBQTJCQyxFQUEzQixFQUErQjtBQUMzQixNQUFJQyxNQUFNLEdBQUlGLEtBQUssQ0FBQ0csTUFBTixDQUFhLFVBQVNDLEdBQVQsRUFBYTtBQUFDLFdBQU9BLEdBQUcsQ0FBQ0gsRUFBSixJQUFVQSxFQUFqQjtBQUFxQixHQUFoRCxDQUFkO0FBQ0EsU0FBT0MsTUFBTSxHQUFHQSxNQUFNLENBQUMsQ0FBRCxDQUFULEdBQWUsSUFBNUIsQ0FGMkIsQ0FFTztBQUNyQzs7QUFFRGYsTUFBTSxDQUFDa0IsV0FBUCxHQUFxQixDQUFDZixHQUFELEVBQU1DLEdBQU4sS0FBYztBQUMvQkEsRUFBQUEsR0FBRyxDQUFDQyxTQUFKLENBQWMsY0FBZCxFQUE2QixrQkFBN0I7QUFFQVQsRUFBQUEsSUFBSSxDQUFDVSxJQUFMLENBQVU7QUFBRSxXQUFRSCxHQUFHLENBQUNnQixNQUFKLENBQVdMO0FBQXJCLEdBQVYsRUFBb0MsVUFBU1AsR0FBVCxFQUFjYSxJQUFkLEVBQW9CO0FBQ3BELFFBQUliLEdBQUosRUFDSUgsR0FBRyxDQUFDaUIsSUFBSixDQUFTO0FBQUVDLE1BQUFBLE9BQU8sRUFBRSxpQkFBWDtBQUE4QkMsTUFBQUEsTUFBTSxFQUFHaEI7QUFBdkMsS0FBVCxFQURKLEtBR0lILEdBQUcsQ0FBQ0ssSUFBSixDQUFTQyxJQUFJLENBQUNDLFNBQUwsQ0FBZVMsSUFBZixFQUFvQixJQUFwQixFQUF5QixDQUF6QixDQUFUO0FBQ1AsR0FMRDtBQU1ILENBVEQ7O0FBV0FwQixNQUFNLENBQUN3QixPQUFQLEdBQWlCLENBQUNyQixHQUFELEVBQU1DLEdBQU4sS0FBYztBQUMzQjtBQUNBLE1BQUlnQixJQUFJLEdBQUcsSUFBSXhCLElBQUosRUFBWDtBQUVBd0IsRUFBQUEsSUFBSSxDQUFDSyxLQUFMLEdBQWF0QixHQUFHLENBQUN1QixJQUFKLENBQVNELEtBQXRCO0FBQ0FMLEVBQUFBLElBQUksQ0FBQ08sTUFBTCxHQUFjeEIsR0FBRyxDQUFDdUIsSUFBSixDQUFTQyxNQUF2QjtBQUVBUCxFQUFBQSxJQUFJLENBQUNRLElBQUwsQ0FBVSxVQUFTckIsR0FBVCxFQUFjO0FBQ3BCLFFBQUlBLEdBQUosRUFDSUgsR0FBRyxDQUFDaUIsSUFBSixDQUFTO0FBQUVDLE1BQUFBLE9BQU8sRUFBRSxpQkFBWDtBQUE4QkMsTUFBQUEsTUFBTSxFQUFHaEI7QUFBdkMsS0FBVCxFQURKLEtBR0lILEdBQUcsQ0FBQ2lCLElBQUosQ0FBUztBQUFFQyxNQUFBQSxPQUFPLEVBQUUsMEJBQVg7QUFBdUNPLE1BQUFBLElBQUksRUFBRVQ7QUFBN0MsS0FBVDtBQUNQLEdBTEQ7QUFNSCxDQWJEOztBQWdCQXBCLE1BQU0sQ0FBQzhCLGNBQVAsR0FBd0IsQ0FBQzNCLEdBQUQsRUFBTUMsR0FBTixLQUFjO0FBQ2xDUixFQUFBQSxJQUFJLENBQUNtQyxRQUFMLENBQWM1QixHQUFHLENBQUNnQixNQUFKLENBQVdMLEVBQXpCLEVBQTZCLFVBQVNQLEdBQVQsRUFBYWEsSUFBYixFQUFtQjtBQUM1QyxRQUFJYixHQUFKLEVBQ0lILEdBQUcsQ0FBQ2lCLElBQUosQ0FBUztBQUFFQyxNQUFBQSxPQUFPLEVBQUUsaUJBQVg7QUFBOEJDLE1BQUFBLE1BQU0sRUFBR2hCO0FBQXZDLEtBQVQsRUFESixLQUVLO0FBQ0RhLE1BQUFBLElBQUksQ0FBQ1ksS0FBTCxDQUFXQyxJQUFYLENBQWdCOUIsR0FBRyxDQUFDK0IsT0FBSixDQUFZQyxNQUE1QjtBQUNBOzs7Ozs7Ozs7Ozs7OztBQWFBZixNQUFBQSxJQUFJLENBQUNRLElBQUwsQ0FBVSxVQUFVckIsR0FBVixFQUFlO0FBQ3JCLFlBQUlBLEdBQUosRUFDSUgsR0FBRyxDQUFDaUIsSUFBSixDQUFTO0FBQUVDLFVBQUFBLE9BQU8sRUFBRSxpQkFBWDtBQUE4QkMsVUFBQUEsTUFBTSxFQUFHaEI7QUFBdkMsU0FBVCxFQURKLEtBR0lILEdBQUcsQ0FBQ2lCLElBQUosQ0FBUztBQUFFQyxVQUFBQSxPQUFPLEVBQUUsMEJBQVg7QUFBdUNPLFVBQUFBLElBQUksRUFBRVQ7QUFBN0MsU0FBVDtBQUNQLE9BTEQ7QUFNSDtBQUNKLEdBekJEO0FBMEJILENBM0JEOztBQTZCQXBCLE1BQU0sQ0FBQ29DLGFBQVAsR0FBdUIsQ0FBQ2pDLEdBQUQsRUFBTUMsR0FBTixLQUFjO0FBQ2pDUixFQUFBQSxJQUFJLENBQUNtQyxRQUFMLENBQWM1QixHQUFHLENBQUNnQixNQUFKLENBQVdMLEVBQXpCLEVBQTZCLFVBQVNQLEdBQVQsRUFBYWEsSUFBYixFQUFtQjtBQUM1QyxRQUFJYixHQUFKLEVBQ0lILEdBQUcsQ0FBQ2lCLElBQUosQ0FBUztBQUFFQyxNQUFBQSxPQUFPLEVBQUUsaUJBQVg7QUFBOEJDLE1BQUFBLE1BQU0sRUFBR2hCO0FBQXZDLEtBQVQsRUFESixLQUVLO0FBQ0RhLE1BQUFBLElBQUksQ0FBQ1ksS0FBTCxDQUFXSyxNQUFYLENBQWtCbEMsR0FBRyxDQUFDK0IsT0FBSixDQUFZQyxNQUE5QjtBQUNBZixNQUFBQSxJQUFJLENBQUNRLElBQUwsQ0FBVSxVQUFVckIsR0FBVixFQUFlO0FBQ3JCLFlBQUlBLEdBQUosRUFDSUgsR0FBRyxDQUFDaUIsSUFBSixDQUFTO0FBQUVDLFVBQUFBLE9BQU8sRUFBRSxpQkFBWDtBQUE4QkMsVUFBQUEsTUFBTSxFQUFHaEI7QUFBdkMsU0FBVCxFQURKLEtBR0lILEdBQUcsQ0FBQ2lCLElBQUosQ0FBUztBQUFFQyxVQUFBQSxPQUFPLEVBQUUsNEJBQVg7QUFBeUNPLFVBQUFBLElBQUksRUFBRVQ7QUFBL0MsU0FBVDtBQUNQLE9BTEQ7QUFNSDtBQUNKLEdBWkQ7QUFhSCxDQWREOztBQWdCQXBCLE1BQU0sQ0FBQ3NDLFVBQVAsR0FBb0IsQ0FBQ25DLEdBQUQsRUFBTUMsR0FBTixLQUFjO0FBQzlCUixFQUFBQSxJQUFJLENBQUMyQyxpQkFBTCxDQUF1QnBDLEdBQUcsQ0FBQ2dCLE1BQUosQ0FBV0wsRUFBbEMsRUFBc0MsVUFBU1AsR0FBVCxFQUFjO0FBQ2hELFFBQUlBLEdBQUosRUFDSUgsR0FBRyxDQUFDaUIsSUFBSixDQUFTO0FBQUVDLE1BQUFBLE9BQU8sRUFBRSxtQkFBWDtBQUFnQ0MsTUFBQUEsTUFBTSxFQUFHaEI7QUFBekMsS0FBVCxFQURKLEtBR0lILEdBQUcsQ0FBQ2lCLElBQUosQ0FBUztBQUFFQyxNQUFBQSxPQUFPLEVBQUU7QUFBWCxLQUFUO0FBQ1AsR0FMRDtBQU1ILENBUEQ7QUFTQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFnQkFrQixNQUFNLENBQUNDLE9BQVAsR0FBaUJ6QyxNQUFqQiIsInNvdXJjZVJvb3QiOiJEOlxcV2Vic3Rvcm1cXHBvZXRyeVdlYlxccm91dGVzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IFBvZW0gPSByZXF1aXJlKFwiLi4vbW9kZWxzL3BvZW1zXCIpXHJcbmxldCBVc2VyID0gcmVxdWlyZShcIi4uL21vZGVscy91c2Vyc1wiKVxyXG5sZXQgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcclxubGV0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG5yb3V0ZXIuZmluZEFsbFBvZW1zID0gKHJlcSwgcmVzKSA9PiB7XHJcbiAgICAvLyBSZXR1cm4gYSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIG91ciBsaXN0XHJcbiAgICByZXMuc2V0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xyXG4gICAgUG9lbS5maW5kKGZ1bmN0aW9uKGVyciwgcG9lbXMpIHtcclxuICAgICAgICBpZiAoZXJyKVxyXG4gICAgICAgICAgICByZXMuc2VuZChlcnIpO1xyXG4gICAgICAgIHJlcy5zZW5kKEpTT04uc3RyaW5naWZ5KHBvZW1zLG51bGwsNSkpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBnZXRCeVZhbHVlKGFycmF5LCBpZCkge1xyXG4gICAgdmFyIHJlc3VsdCAgPSBhcnJheS5maWx0ZXIoZnVuY3Rpb24ob2JqKXtyZXR1cm4gb2JqLmlkID09IGlkO30gKTtcclxuICAgIHJldHVybiByZXN1bHQgPyByZXN1bHRbMF0gOiBudWxsOyAvLyBvciB1bmRlZmluZWRcclxufVxyXG5cclxucm91dGVyLmZpbmRPbmVQb2VtID0gKHJlcSwgcmVzKSA9PiB7XHJcbiAgICByZXMuc2V0SGVhZGVyKCdDb250ZW50LVR5cGUnLCdhcHBsaWNhdGlvbi9qc29uJyk7XHJcblxyXG4gICAgUG9lbS5maW5kKHsgXCJfaWRcIiA6IHJlcS5wYXJhbXMuaWQgfSxmdW5jdGlvbihlcnIsIHBvZW0pIHtcclxuICAgICAgICBpZiAoZXJyKVxyXG4gICAgICAgICAgICByZXMuanNvbih7IG1lc3NhZ2U6ICdQb2VtIE5PVCBGb3VuZCEnLCBlcnJtc2cgOiBlcnIgfSApO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcmVzLnNlbmQoSlNPTi5zdHJpbmdpZnkocG9lbSxudWxsLDUpKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxucm91dGVyLmFkZFBvZW0gPSAocmVxLCByZXMpID0+IHtcclxuICAgIC8vQWRkIGEgbmV3IGRvbmF0aW9uIHRvIG91ciBsaXN0XHJcbiAgICB2YXIgcG9lbSA9IG5ldyBQb2VtKCk7XHJcblxyXG4gICAgcG9lbS50aXRsZSA9IHJlcS5ib2R5LnRpdGxlO1xyXG4gICAgcG9lbS5hdXRob3IgPSByZXEuYm9keS5hdXRob3I7XHJcblxyXG4gICAgcG9lbS5zYXZlKGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgIGlmIChlcnIpXHJcbiAgICAgICAgICAgIHJlcy5qc29uKHsgbWVzc2FnZTogJ1BvZW0gTk9UIEFkZGVkIScsIGVycm1zZyA6IGVyciB9ICk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXMuanNvbih7IG1lc3NhZ2U6ICdQb2VtIFN1Y2Nlc3NmdWxseSBBZGRlZCEnLCBkYXRhOiBwb2VtIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5cclxucm91dGVyLmluY3JlbWVudExpa2VzID0gKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBQb2VtLmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQsIGZ1bmN0aW9uKGVycixwb2VtKSB7XHJcbiAgICAgICAgaWYgKGVycilcclxuICAgICAgICAgICAgcmVzLmpzb24oeyBtZXNzYWdlOiAnUG9lbSBOT1QgRm91bmQhJywgZXJybXNnIDogZXJyIH0gKTtcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcG9lbS5saWtlcy5wdXNoKHJlcS5zZXNzaW9uLnVzZXJJZCk7XHJcbiAgICAgICAgICAgIC8qaWYocG9lbS5maW5kKCB7IGxpa2VzOiByZXEuc2Vzc2lvbi51c2VySWR9ICkpe1xyXG4gICAgICAgICAgICAgICAgcmVzLmpzb24oeyBtZXNzYWdlOiAnWW91IGhhdmUgYWxyZWFkeSBsaWtlZCB0aGlzIHBvZW0hJywgZXJybXNnIDogZXJyIH0gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHBvZW0ubGlrZXMucHVzaChyZXEuc2Vzc2lvbi51c2VySWQpO1xyXG4gICAgICAgICAgICAgICAgLy9yZWNvcmQgd2hpY2ggcG9lbSB1c2VyIGxpa2VkLCBidXQgZGlkbid0IHdvcmsuIFNvIHVzZXJzIGRvbid0IGtub3cgd2hhdCBwb2VtcyB0aGV5IGhhdmUgbGlrZWRcclxuICAgICAgICAgICAgICAgIFVzZXIuZmluZEJ5SWQocmVxLnNlc3Npb24udXNlcklkLCBmdW5jdGlvbihlcnIsdXNlcil7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycilcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmpzb24oeyBtZXNzYWdlOiAnVXNlciBOT1QgRm91bmQhJywgZXJybXNnIDogZXJyIH0gKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlci5saWtlcy5wdXNoKHBvZW0uX2lkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KSovXHJcbiAgICAgICAgICAgIHBvZW0uc2F2ZShmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlcy5qc29uKHsgbWVzc2FnZTogJ1BvZW0gTk9UIGxpa2VkIScsIGVycm1zZyA6IGVyciB9ICk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzLmpzb24oeyBtZXNzYWdlOiAnUG9lbSBTdWNjZXNzZnVsbHkgTGlrZWQhJywgZGF0YTogcG9lbSB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn07XHJcblxyXG5yb3V0ZXIuZGVjcmVhc2VMaWtlcyA9IChyZXEsIHJlcykgPT4ge1xyXG4gICAgUG9lbS5maW5kQnlJZChyZXEucGFyYW1zLmlkLCBmdW5jdGlvbihlcnIscG9lbSkge1xyXG4gICAgICAgIGlmIChlcnIpXHJcbiAgICAgICAgICAgIHJlcy5qc29uKHsgbWVzc2FnZTogJ1BvZW0gTk9UIEZvdW5kIScsIGVycm1zZyA6IGVyciB9ICk7XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBvZW0ubGlrZXMucmVtb3ZlKHJlcS5zZXNzaW9uLnVzZXJJZCk7XHJcbiAgICAgICAgICAgIHBvZW0uc2F2ZShmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlcy5qc29uKHsgbWVzc2FnZTogJ1BvZW0gTk9UIGxpa2VkIScsIGVycm1zZyA6IGVyciB9ICk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzLmpzb24oeyBtZXNzYWdlOiAnUG9lbSBTdWNjZXNzZnVsbHkgVW5saWtlZCEnLCBkYXRhOiBwb2VtIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufTtcclxuXHJcbnJvdXRlci5kZWxldGVQb2VtID0gKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBQb2VtLmZpbmRCeUlkQW5kUmVtb3ZlKHJlcS5wYXJhbXMuaWQsIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgIGlmIChlcnIpXHJcbiAgICAgICAgICAgIHJlcy5qc29uKHsgbWVzc2FnZTogJ1BvZW0gTk9UIERFTEVURUQhJywgZXJybXNnIDogZXJyIH0gKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJlcy5qc29uKHsgbWVzc2FnZTogJ1BvZW0gU3VjY2Vzc2Z1bGx5IERlbGV0ZWQhJ30pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qXHJcbmZ1bmN0aW9uIGdldFRvdGFsTGlrZXMoYXJyYXkpIHtcclxuICAgIGxldCB0b3RhbExpa2VzID0gMDtcclxuICAgIGFycmF5LmZvckVhY2goZnVuY3Rpb24ob2JqKSB7IHRvdGFsTGlrZXMgKz0gb2JqLmxpa2VzOyB9KTtcclxuICAgIHJldHVybiB0b3RhbExpa2VzO1xyXG59XHJcblxyXG5yb3V0ZXIuZmluZFRvdGFsTGlrZXMgPSAocmVxLCByZXMpID0+IHtcclxuICAgIFBvZW0uZmluZChmdW5jdGlvbihlcnIsIHBvZW0pIHtcclxuICAgICAgICBpZiAoZXJyKVxyXG4gICAgICAgICAgICByZXMuc2VuZChlcnIpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcmVzLmpzb24oeyB0b3RhbExpa2VzIDogZ2V0VG90YWxMaWtlcyhwb2VtKSB9KTtcclxuICAgIH0pO1xyXG59Ki9cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcm91dGVyOyJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "poems.js"
      ],
      "names": [
        "Poem",
        "require",
        "User",
        "express",
        "router",
        "Router",
        "findAllPoems",
        "req",
        "res",
        "setHeader",
        "find",
        "err",
        "poems",
        "send",
        "JSON",
        "stringify",
        "getByValue",
        "array",
        "id",
        "result",
        "filter",
        "obj",
        "findOnePoem",
        "params",
        "poem",
        "json",
        "message",
        "errmsg",
        "addPoem",
        "title",
        "body",
        "author",
        "save",
        "data",
        "incrementLikes",
        "findById",
        "likes",
        "push",
        "session",
        "userId",
        "decreaseLikes",
        "remove",
        "deletePoem",
        "findByIdAndRemove",
        "module",
        "exports"
      ],
      "mappings": "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",
      "sourceRoot": "D:\\Webstorm\\poetryWeb\\routes",
      "sourcesContent": [
        "let Poem = require(\"../models/poems\")\r\nlet User = require(\"../models/users\")\r\nlet express = require('express');\r\nlet router = express.Router();\r\n\r\nrouter.findAllPoems = (req, res) => {\r\n    // Return a JSON representation of our list\r\n    res.setHeader('Content-Type', 'application/json');\r\n    Poem.find(function(err, poems) {\r\n        if (err)\r\n            res.send(err);\r\n        res.send(JSON.stringify(poems,null,5));\r\n    });\r\n};\r\n\r\nfunction getByValue(array, id) {\r\n    var result  = array.filter(function(obj){return obj.id == id;} );\r\n    return result ? result[0] : null; // or undefined\r\n}\r\n\r\nrouter.findOnePoem = (req, res) => {\r\n    res.setHeader('Content-Type','application/json');\r\n\r\n    Poem.find({ \"_id\" : req.params.id },function(err, poem) {\r\n        if (err)\r\n            res.json({ message: 'Poem NOT Found!', errmsg : err } );\r\n        else\r\n            res.send(JSON.stringify(poem,null,5));\r\n    });\r\n};\r\n\r\nrouter.addPoem = (req, res) => {\r\n    //Add a new donation to our list\r\n    var poem = new Poem();\r\n\r\n    poem.title = req.body.title;\r\n    poem.author = req.body.author;\r\n\r\n    poem.save(function(err) {\r\n        if (err)\r\n            res.json({ message: 'Poem NOT Added!', errmsg : err } );\r\n        else\r\n            res.json({ message: 'Poem Successfully Added!', data: poem });\r\n    });\r\n};\r\n\r\n\r\nrouter.incrementLikes = (req, res) => {\r\n    Poem.findById(req.params.id, function(err,poem) {\r\n        if (err)\r\n            res.json({ message: 'Poem NOT Found!', errmsg : err } );\r\n        else {\r\n            poem.likes.push(req.session.userId);\r\n            /*if(poem.find( { likes: req.session.userId} )){\r\n                res.json({ message: 'You have already liked this poem!', errmsg : err } );\r\n            }\r\n            else {\r\n                poem.likes.push(req.session.userId);\r\n                //record which poem user liked, but didn't work. So users don't know what poems they have liked\r\n                User.findById(req.session.userId, function(err,user){\r\n                    if (err)\r\n                        res.json({ message: 'User NOT Found!', errmsg : err } );\r\n                    else {\r\n                        user.likes.push(poem._id);\r\n                    }\r\n                })*/\r\n            poem.save(function (err) {\r\n                if (err)\r\n                    res.json({ message: 'Poem NOT liked!', errmsg : err } );\r\n                else\r\n                    res.json({ message: 'Poem Successfully Liked!', data: poem });\r\n            });\r\n        }\r\n    });\r\n};\r\n\r\nrouter.decreaseLikes = (req, res) => {\r\n    Poem.findById(req.params.id, function(err,poem) {\r\n        if (err)\r\n            res.json({ message: 'Poem NOT Found!', errmsg : err } );\r\n        else {\r\n            poem.likes.remove(req.session.userId);\r\n            poem.save(function (err) {\r\n                if (err)\r\n                    res.json({ message: 'Poem NOT liked!', errmsg : err } );\r\n                else\r\n                    res.json({ message: 'Poem Successfully Unliked!', data: poem });\r\n            });\r\n        }\r\n    });\r\n};\r\n\r\nrouter.deletePoem = (req, res) => {\r\n    Poem.findByIdAndRemove(req.params.id, function(err) {\r\n        if (err)\r\n            res.json({ message: 'Poem NOT DELETED!', errmsg : err } );\r\n        else\r\n            res.json({ message: 'Poem Successfully Deleted!'});\r\n    });\r\n}\r\n\r\n/*\r\nfunction getTotalLikes(array) {\r\n    let totalLikes = 0;\r\n    array.forEach(function(obj) { totalLikes += obj.likes; });\r\n    return totalLikes;\r\n}\r\n\r\nrouter.findTotalLikes = (req, res) => {\r\n    Poem.find(function(err, poem) {\r\n        if (err)\r\n            res.send(err);\r\n        else\r\n            res.json({ totalLikes : getTotalLikes(poem) });\r\n    });\r\n}*/\r\n\r\nmodule.exports = router;"
      ]
    },
    "sourceType": "module",
    "mtime": 1572197681938
  },
  "{\"sourceRoot\":\"D:\\\\Webstorm\\\\poetryWeb\\\\models\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Webstorm\\\\poetryWeb\",\"filename\":\"D:\\\\Webstorm\\\\poetryWeb\\\\models\\\\poems.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"test \",\"root\":\"D:\\\\Webstorm\\\\poetryWeb\",\"plugins\":[],\"presets\":[]}:7.3.4:test ": {
    "metadata": {},
    "options": {
      "sourceRoot": "D:\\Webstorm\\poetryWeb\\models",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "D:\\Webstorm\\poetryWeb",
      "filename": "D:\\Webstorm\\poetryWeb\\models\\poems.js",
      "babelrc": false,
      "configFile": false,
      "envName": "test ",
      "root": "D:\\Webstorm\\poetryWeb",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\Webstorm\\poetryWeb\\models\\poems.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "D:\\Webstorm\\poetryWeb\\models\\poems.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\Webstorm\\poetryWeb\\models",
        "sourceFileName": "poems.js"
      }
    },
    "ast": null,
    "code": "let mongoose = require('../routes/connectDB'); // mongoose.Promise = require('bluebird');\n\n\nlet Schema = mongoose.Schema;\nlet PoemSchema = new Schema({\n  title: String,\n  author: String,\n  likes: [{\n    type: Schema.Types.ObjectId,\n    ref: 'users'\n  }]\n}, {\n  collection: 'poetry'\n});\nvar Poem = mongoose.model('Poem', PoemSchema);\nmodule.exports = Poem;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvZW1zLmpzIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwicmVxdWlyZSIsIlNjaGVtYSIsIlBvZW1TY2hlbWEiLCJ0aXRsZSIsIlN0cmluZyIsImF1dGhvciIsImxpa2VzIiwidHlwZSIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJjb2xsZWN0aW9uIiwiUG9lbSIsIm1vZGVsIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBSUEsUUFBUSxHQUFHQyxPQUFPLENBQUMscUJBQUQsQ0FBdEIsQyxDQUNBOzs7QUFFQSxJQUFJQyxNQUFNLEdBQUdGLFFBQVEsQ0FBQ0UsTUFBdEI7QUFDQSxJQUFJQyxVQUFVLEdBQUcsSUFBSUQsTUFBSixDQUFXO0FBQ3BCRSxFQUFBQSxLQUFLLEVBQUVDLE1BRGE7QUFFcEJDLEVBQUFBLE1BQU0sRUFBRUQsTUFGWTtBQUdwQkUsRUFBQUEsS0FBSyxFQUFFLENBQUM7QUFBQ0MsSUFBQUEsSUFBSSxFQUFFTixNQUFNLENBQUNPLEtBQVAsQ0FBYUMsUUFBcEI7QUFBOEJDLElBQUFBLEdBQUcsRUFBRTtBQUFuQyxHQUFEO0FBSGEsQ0FBWCxFQUtiO0FBQUVDLEVBQUFBLFVBQVUsRUFBRTtBQUFkLENBTGEsQ0FBakI7QUFTQSxJQUFJQyxJQUFJLEdBQUdiLFFBQVEsQ0FBQ2MsS0FBVCxDQUFlLE1BQWYsRUFBdUJYLFVBQXZCLENBQVg7QUFDQVksTUFBTSxDQUFDQyxPQUFQLEdBQWlCSCxJQUFqQiIsInNvdXJjZVJvb3QiOiJEOlxcV2Vic3Rvcm1cXHBvZXRyeVdlYlxcbW9kZWxzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IG1vbmdvb3NlID0gcmVxdWlyZSgnLi4vcm91dGVzL2Nvbm5lY3REQicpO1xyXG4vLyBtb25nb29zZS5Qcm9taXNlID0gcmVxdWlyZSgnYmx1ZWJpcmQnKTtcclxuXHJcbmxldCBTY2hlbWEgPSBtb25nb29zZS5TY2hlbWE7XHJcbmxldCBQb2VtU2NoZW1hID0gbmV3IFNjaGVtYSh7XHJcbiAgICAgICAgdGl0bGU6IFN0cmluZyxcclxuICAgICAgICBhdXRob3I6IFN0cmluZyxcclxuICAgICAgICBsaWtlczogW3t0eXBlOiBTY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogJ3VzZXJzJ31dXHJcbiAgICB9LFxyXG4gICAgeyBjb2xsZWN0aW9uOiAncG9ldHJ5J31cclxuKTtcclxuXHJcblxyXG52YXIgUG9lbSA9IG1vbmdvb3NlLm1vZGVsKCdQb2VtJywgUG9lbVNjaGVtYSk7XHJcbm1vZHVsZS5leHBvcnRzID0gUG9lbTsiXX0=",
    "map": {
      "version": 3,
      "sources": [
        "poems.js"
      ],
      "names": [
        "mongoose",
        "require",
        "Schema",
        "PoemSchema",
        "title",
        "String",
        "author",
        "likes",
        "type",
        "Types",
        "ObjectId",
        "ref",
        "collection",
        "Poem",
        "model",
        "module",
        "exports"
      ],
      "mappings": "AAAA,IAAIA,QAAQ,GAAGC,OAAO,CAAC,qBAAD,CAAtB,C,CACA;;;AAEA,IAAIC,MAAM,GAAGF,QAAQ,CAACE,MAAtB;AACA,IAAIC,UAAU,GAAG,IAAID,MAAJ,CAAW;AACpBE,EAAAA,KAAK,EAAEC,MADa;AAEpBC,EAAAA,MAAM,EAAED,MAFY;AAGpBE,EAAAA,KAAK,EAAE,CAAC;AAACC,IAAAA,IAAI,EAAEN,MAAM,CAACO,KAAP,CAAaC,QAApB;AAA8BC,IAAAA,GAAG,EAAE;AAAnC,GAAD;AAHa,CAAX,EAKb;AAAEC,EAAAA,UAAU,EAAE;AAAd,CALa,CAAjB;AASA,IAAIC,IAAI,GAAGb,QAAQ,CAACc,KAAT,CAAe,MAAf,EAAuBX,UAAvB,CAAX;AACAY,MAAM,CAACC,OAAP,GAAiBH,IAAjB",
      "sourceRoot": "D:\\Webstorm\\poetryWeb\\models",
      "sourcesContent": [
        "let mongoose = require('../routes/connectDB');\r\n// mongoose.Promise = require('bluebird');\r\n\r\nlet Schema = mongoose.Schema;\r\nlet PoemSchema = new Schema({\r\n        title: String,\r\n        author: String,\r\n        likes: [{type: Schema.Types.ObjectId, ref: 'users'}]\r\n    },\r\n    { collection: 'poetry'}\r\n);\r\n\r\n\r\nvar Poem = mongoose.model('Poem', PoemSchema);\r\nmodule.exports = Poem;"
      ]
    },
    "sourceType": "module",
    "mtime": 1572904998948
  },
  "{\"sourceRoot\":\"D:\\\\Webstorm\\\\poetryWeb\\\\routes\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Webstorm\\\\poetryWeb\",\"filename\":\"D:\\\\Webstorm\\\\poetryWeb\\\\routes\\\\authors.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"test \",\"root\":\"D:\\\\Webstorm\\\\poetryWeb\",\"plugins\":[],\"presets\":[]}:7.3.4:test ": {
    "metadata": {},
    "options": {
      "sourceRoot": "D:\\Webstorm\\poetryWeb\\routes",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "D:\\Webstorm\\poetryWeb",
      "filename": "D:\\Webstorm\\poetryWeb\\routes\\authors.js",
      "babelrc": false,
      "configFile": false,
      "envName": "test ",
      "root": "D:\\Webstorm\\poetryWeb",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\Webstorm\\poetryWeb\\routes\\authors.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "D:\\Webstorm\\poetryWeb\\routes\\authors.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\Webstorm\\poetryWeb\\routes",
        "sourceFileName": "authors.js"
      }
    },
    "ast": null,
    "code": "let Poem = require(\"../models/poems\");\n\nlet Author = require(\"../models/authors\");\n\nlet express = require('express');\n\nlet router = express.Router();\n\nrouter.findAllAuthors = (req, res) => {\n  // Return a JSON representation of our list\n  res.setHeader('Content-Type', 'application/json');\n  Author.find(function (err, author) {\n    if (err) res.send(err);\n    res.send(JSON.stringify(author, null, 5));\n  });\n};\n\nrouter.findOneAuthor = (req, res) => {\n  res.setHeader('Content-Type', 'application/json');\n  Author.find({\n    \"_id\": req.params.id\n  }, function (err, author) {\n    if (err) res.json({\n      message: 'Author NOT Found!',\n      errmsg: err\n    });else res.send(JSON.stringify(author, null, 5));\n  });\n};\n\nrouter.addAuthor = (req, res) => {\n  //Add a new donation to our list\n  var author = new Author();\n  author.name = req.body.name;\n  author.introduction = req.body.introduction;\n  author.save(function (err) {\n    if (err) res.json({\n      message: 'Author NOT Added!',\n      errmsg: err\n    });else res.json({\n      message: 'Author Successfully Added!',\n      data: author\n    });\n  });\n};\n\nrouter.incrementLikes = (req, res) => {\n  Author.findById(req.params.id, function (err, author) {\n    if (err) res.json({\n      message: 'Author NOT Found!',\n      errmsg: err\n    });else {\n      author.likes.push(req.session.userId);\n      author.save(function (err) {\n        if (err) res.json({\n          message: 'Author NOT liked!',\n          errmsg: err\n        });else res.json({\n          message: 'Author Successfully Liked!',\n          data: author\n        });\n      });\n    }\n  });\n};\n\nrouter.decreaseLikes = (req, res) => {\n  Author.findById(req.params.id, function (err, author) {\n    if (err) res.json({\n      message: 'Author NOT Found!',\n      errmsg: err\n    });else {\n      author.likes.remove(req.session.userId);\n      author.save(function (err) {\n        if (err) res.json({\n          message: 'Author NOT liked!',\n          errmsg: err\n        });else res.json({\n          message: 'Author Successfully Unliked!',\n          data: author\n        });\n      });\n    }\n  });\n};\n\nrouter.incrementWorks = (req, res) => {\n  Author.findById(req.params.id, function (err, author) {\n    if (err) res.json({\n      message: 'Author NOT Found!',\n      errmsg: err\n    });else {\n      author.works.push(req.body.poemId);\n      author.save(function (err) {\n        if (err) res.json({\n          message: 'Work NOT Added!',\n          errmsg: err\n        });else res.json({\n          message: 'Work Successfully Added!',\n          data: author\n        });\n      });\n    }\n  });\n};\n\nrouter.deleteWorks = (req, res) => {\n  Author.findById(req.params.id, function (err, author) {\n    if (err) res.json({\n      message: 'Author NOT Found!',\n      errmsg: err\n    });else {\n      author.works.remove(req.body.poemId);\n      author.save(function (err) {\n        if (err) res.json({\n          message: 'Author NOT liked!',\n          errmsg: err\n        });else res.json({\n          message: 'Work Successfully deleted!',\n          data: author\n        });\n      });\n    }\n  });\n};\n\nrouter.deleteAuthor = (req, res) => {\n  Author.findByIdAndRemove(req.params.id, function (err) {\n    if (err) res.json({\n      message: 'Author NOT DELETED!',\n      errmsg: err\n    });else res.json({\n      message: 'Author Successfully Deleted!'\n    });\n  });\n};\n\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhvcnMuanMiXSwibmFtZXMiOlsiUG9lbSIsInJlcXVpcmUiLCJBdXRob3IiLCJleHByZXNzIiwicm91dGVyIiwiUm91dGVyIiwiZmluZEFsbEF1dGhvcnMiLCJyZXEiLCJyZXMiLCJzZXRIZWFkZXIiLCJmaW5kIiwiZXJyIiwiYXV0aG9yIiwic2VuZCIsIkpTT04iLCJzdHJpbmdpZnkiLCJmaW5kT25lQXV0aG9yIiwicGFyYW1zIiwiaWQiLCJqc29uIiwibWVzc2FnZSIsImVycm1zZyIsImFkZEF1dGhvciIsIm5hbWUiLCJib2R5IiwiaW50cm9kdWN0aW9uIiwic2F2ZSIsImRhdGEiLCJpbmNyZW1lbnRMaWtlcyIsImZpbmRCeUlkIiwibGlrZXMiLCJwdXNoIiwic2Vzc2lvbiIsInVzZXJJZCIsImRlY3JlYXNlTGlrZXMiLCJyZW1vdmUiLCJpbmNyZW1lbnRXb3JrcyIsIndvcmtzIiwicG9lbUlkIiwiZGVsZXRlV29ya3MiLCJkZWxldGVBdXRob3IiLCJmaW5kQnlJZEFuZFJlbW92ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLElBQUlBLElBQUksR0FBR0MsT0FBTyxDQUFDLGlCQUFELENBQWxCOztBQUNBLElBQUlDLE1BQU0sR0FBR0QsT0FBTyxDQUFDLG1CQUFELENBQXBCOztBQUNBLElBQUlFLE9BQU8sR0FBR0YsT0FBTyxDQUFDLFNBQUQsQ0FBckI7O0FBQ0EsSUFBSUcsTUFBTSxHQUFHRCxPQUFPLENBQUNFLE1BQVIsRUFBYjs7QUFFQUQsTUFBTSxDQUFDRSxjQUFQLEdBQXdCLENBQUNDLEdBQUQsRUFBTUMsR0FBTixLQUFjO0FBQ2xDO0FBQ0FBLEVBQUFBLEdBQUcsQ0FBQ0MsU0FBSixDQUFjLGNBQWQsRUFBOEIsa0JBQTlCO0FBQ0FQLEVBQUFBLE1BQU0sQ0FBQ1EsSUFBUCxDQUFZLFVBQVNDLEdBQVQsRUFBY0MsTUFBZCxFQUFzQjtBQUM5QixRQUFJRCxHQUFKLEVBQ0lILEdBQUcsQ0FBQ0ssSUFBSixDQUFTRixH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QWFILENBZEQ7O0FBZ0JBUixNQUFNLENBQUNvQyxZQUFQLEdBQXNCLENBQUNqQyxHQUFELEVBQU1DLEdBQU4sS0FBYztBQUNoQ04sRUFBQUEsTUFBTSxDQUFDdUMsaUJBQVAsQ0FBeUJsQyxHQUFHLENBQUNVLE1BQUosQ0FBV0MsRUFBcEMsRUFBd0MsVUFBU1AsR0FBVCxFQUFjO0FBQ2xELFFBQUlBLEdBQUosRUFDSUgsR0FBRyxDQUFDVyxJQUFKLENBQVM7QUFBRUMsTUFBQUEsT0FBTyxFQUFFLHFCQUFYO0FBQWtDQyxNQUFBQSxNQUFNLEVBQUdWO0FBQTNDLEtBQVQsRUFESixLQUdJSCxHQUFHLENBQUNXLElBQUosQ0FBUztBQUFFQyxNQUFBQSxPQUFPLEVBQUU7QUFBWCxLQUFUO0FBQ1AsR0FMRDtBQU1ILENBUEQ7O0FBVUFzQixNQUFNLENBQUNDLE9BQVAsR0FBaUJ2QyxNQUFqQiIsInNvdXJjZVJvb3QiOiJEOlxcV2Vic3Rvcm1cXHBvZXRyeVdlYlxccm91dGVzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IFBvZW0gPSByZXF1aXJlKFwiLi4vbW9kZWxzL3BvZW1zXCIpXHJcbmxldCBBdXRob3IgPSByZXF1aXJlKFwiLi4vbW9kZWxzL2F1dGhvcnNcIilcclxubGV0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmxldCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xyXG5cclxucm91dGVyLmZpbmRBbGxBdXRob3JzID0gKHJlcSwgcmVzKSA9PiB7XHJcbiAgICAvLyBSZXR1cm4gYSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIG91ciBsaXN0XHJcbiAgICByZXMuc2V0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xyXG4gICAgQXV0aG9yLmZpbmQoZnVuY3Rpb24oZXJyLCBhdXRob3IpIHtcclxuICAgICAgICBpZiAoZXJyKVxyXG4gICAgICAgICAgICByZXMuc2VuZChlcnIpO1xyXG4gICAgICAgIHJlcy5zZW5kKEpTT04uc3RyaW5naWZ5KGF1dGhvcixudWxsLDUpKTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxucm91dGVyLmZpbmRPbmVBdXRob3IgPSAocmVxLCByZXMpID0+IHtcclxuICAgIHJlcy5zZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScsJ2FwcGxpY2F0aW9uL2pzb24nKTtcclxuXHJcbiAgICBBdXRob3IuZmluZCh7IFwiX2lkXCIgOiByZXEucGFyYW1zLmlkIH0sZnVuY3Rpb24oZXJyLCBhdXRob3IpIHtcclxuICAgICAgICBpZiAoZXJyKVxyXG4gICAgICAgICAgICByZXMuanNvbih7IG1lc3NhZ2U6ICdBdXRob3IgTk9UIEZvdW5kIScsIGVycm1zZyA6IGVyciB9ICk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXMuc2VuZChKU09OLnN0cmluZ2lmeShhdXRob3IsbnVsbCw1KSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxucm91dGVyLmFkZEF1dGhvciA9IChyZXEsIHJlcykgPT4ge1xyXG4gICAgLy9BZGQgYSBuZXcgZG9uYXRpb24gdG8gb3VyIGxpc3RcclxuICAgIHZhciBhdXRob3IgPSBuZXcgQXV0aG9yKCk7XHJcblxyXG4gICAgYXV0aG9yLm5hbWUgPSByZXEuYm9keS5uYW1lO1xyXG4gICAgYXV0aG9yLmludHJvZHVjdGlvbiA9IHJlcS5ib2R5LmludHJvZHVjdGlvbjtcclxuXHJcbiAgICBhdXRob3Iuc2F2ZShmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICBpZiAoZXJyKVxyXG4gICAgICAgICAgICByZXMuanNvbih7IG1lc3NhZ2U6ICdBdXRob3IgTk9UIEFkZGVkIScsIGVycm1zZyA6IGVyciB9ICk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXMuanNvbih7IG1lc3NhZ2U6ICdBdXRob3IgU3VjY2Vzc2Z1bGx5IEFkZGVkIScsIGRhdGE6IGF1dGhvciB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5cclxucm91dGVyLmluY3JlbWVudExpa2VzID0gKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBBdXRob3IuZmluZEJ5SWQocmVxLnBhcmFtcy5pZCwgZnVuY3Rpb24oZXJyLGF1dGhvcikge1xyXG4gICAgICAgIGlmIChlcnIpXHJcbiAgICAgICAgICAgIHJlcy5qc29uKHsgbWVzc2FnZTogJ0F1dGhvciBOT1QgRm91bmQhJywgZXJybXNnIDogZXJyIH0gKTtcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgYXV0aG9yLmxpa2VzLnB1c2gocmVxLnNlc3Npb24udXNlcklkKTtcclxuICAgICAgICAgICAgYXV0aG9yLnNhdmUoZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycilcclxuICAgICAgICAgICAgICAgICAgICByZXMuanNvbih7IG1lc3NhZ2U6ICdBdXRob3IgTk9UIGxpa2VkIScsIGVycm1zZyA6IGVyciB9ICk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzLmpzb24oeyBtZXNzYWdlOiAnQXV0aG9yIFN1Y2Nlc3NmdWxseSBMaWtlZCEnLCBkYXRhOiBhdXRob3IgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG5cclxucm91dGVyLmRlY3JlYXNlTGlrZXMgPSAocmVxLCByZXMpID0+IHtcclxuICAgIEF1dGhvci5maW5kQnlJZChyZXEucGFyYW1zLmlkLCBmdW5jdGlvbihlcnIsYXV0aG9yKSB7XHJcbiAgICAgICAgaWYgKGVycilcclxuICAgICAgICAgICAgcmVzLmpzb24oeyBtZXNzYWdlOiAnQXV0aG9yIE5PVCBGb3VuZCEnLCBlcnJtc2cgOiBlcnIgfSApO1xyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBhdXRob3IubGlrZXMucmVtb3ZlKHJlcS5zZXNzaW9uLnVzZXJJZCk7XHJcbiAgICAgICAgICAgIGF1dGhvci5zYXZlKGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnIpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzLmpzb24oeyBtZXNzYWdlOiAnQXV0aG9yIE5PVCBsaWtlZCEnLCBlcnJtc2cgOiBlcnIgfSApO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHJlcy5qc29uKHsgbWVzc2FnZTogJ0F1dGhvciBTdWNjZXNzZnVsbHkgVW5saWtlZCEnLCBkYXRhOiBhdXRob3IgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG5cclxuXHJcbnJvdXRlci5pbmNyZW1lbnRXb3JrcyA9IChyZXEsIHJlcykgPT4ge1xyXG4gICAgQXV0aG9yLmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQsIGZ1bmN0aW9uKGVycixhdXRob3IpIHtcclxuICAgICAgICBpZiAoZXJyKVxyXG4gICAgICAgICAgICByZXMuanNvbih7IG1lc3NhZ2U6ICdBdXRob3IgTk9UIEZvdW5kIScsIGVycm1zZyA6IGVyciB9ICk7XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGF1dGhvci53b3Jrcy5wdXNoKHJlcS5ib2R5LnBvZW1JZCk7XHJcbiAgICAgICAgICAgIGF1dGhvci5zYXZlKGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnIpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzLmpzb24oeyBtZXNzYWdlOiAnV29yayBOT1QgQWRkZWQhJywgZXJybXNnIDogZXJyIH0gKTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICByZXMuanNvbih7IG1lc3NhZ2U6ICdXb3JrIFN1Y2Nlc3NmdWxseSBBZGRlZCEnLCBkYXRhOiBhdXRob3IgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG5cclxucm91dGVyLmRlbGV0ZVdvcmtzID0gKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBBdXRob3IuZmluZEJ5SWQocmVxLnBhcmFtcy5pZCwgZnVuY3Rpb24oZXJyLGF1dGhvcikge1xyXG4gICAgICAgIGlmIChlcnIpXHJcbiAgICAgICAgICAgIHJlcy5qc29uKHsgbWVzc2FnZTogJ0F1dGhvciBOT1QgRm91bmQhJywgZXJybXNnIDogZXJyIH0gKTtcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgYXV0aG9yLndvcmtzLnJlbW92ZShyZXEuYm9keS5wb2VtSWQpO1xyXG4gICAgICAgICAgICBhdXRob3Iuc2F2ZShmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlcy5qc29uKHsgbWVzc2FnZTogJ0F1dGhvciBOT1QgbGlrZWQhJywgZXJybXNnIDogZXJyIH0gKTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICByZXMuanNvbih7IG1lc3NhZ2U6ICdXb3JrIFN1Y2Nlc3NmdWxseSBkZWxldGVkIScsIGRhdGE6IGF1dGhvciB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn07XHJcblxyXG5yb3V0ZXIuZGVsZXRlQXV0aG9yID0gKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBBdXRob3IuZmluZEJ5SWRBbmRSZW1vdmUocmVxLnBhcmFtcy5pZCwgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgaWYgKGVycilcclxuICAgICAgICAgICAgcmVzLmpzb24oeyBtZXNzYWdlOiAnQXV0aG9yIE5PVCBERUxFVEVEIScsIGVycm1zZyA6IGVyciB9ICk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXMuanNvbih7IG1lc3NhZ2U6ICdBdXRob3IgU3VjY2Vzc2Z1bGx5IERlbGV0ZWQhJ30pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjsiXX0=",
    "map": {
      "version": 3,
      "sources": [
        "authors.js"
      ],
      "names": [
        "Poem",
        "require",
        "Author",
        "express",
        "router",
        "Router",
        "findAllAuthors",
        "req",
        "res",
        "setHeader",
        "find",
        "err",
        "author",
        "send",
        "JSON",
        "stringify",
        "findOneAuthor",
        "params",
        "id",
        "json",
        "message",
        "errmsg",
        "addAuthor",
        "name",
        "body",
        "introduction",
        "save",
        "data",
        "incrementLikes",
        "findById",
        "likes",
        "push",
        "session",
        "userId",
        "decreaseLikes",
        "remove",
        "incrementWorks",
        "works",
        "poemId",
        "deleteWorks",
        "deleteAuthor",
        "findByIdAndRemove",
        "module",
        "exports"
      ],
      "mappings": "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",
      "sourceRoot": "D:\\Webstorm\\poetryWeb\\routes",
      "sourcesContent": [
        "let Poem = require(\"../models/poems\")\r\nlet Author = require(\"../models/authors\")\r\nlet express = require('express');\r\nlet router = express.Router();\r\n\r\nrouter.findAllAuthors = (req, res) => {\r\n    // Return a JSON representation of our list\r\n    res.setHeader('Content-Type', 'application/json');\r\n    Author.find(function(err, author) {\r\n        if (err)\r\n            res.send(err);\r\n        res.send(JSON.stringify(author,null,5));\r\n    });\r\n};\r\n\r\nrouter.findOneAuthor = (req, res) => {\r\n    res.setHeader('Content-Type','application/json');\r\n\r\n    Author.find({ \"_id\" : req.params.id },function(err, author) {\r\n        if (err)\r\n            res.json({ message: 'Author NOT Found!', errmsg : err } );\r\n        else\r\n            res.send(JSON.stringify(author,null,5));\r\n    });\r\n}\r\n\r\nrouter.addAuthor = (req, res) => {\r\n    //Add a new donation to our list\r\n    var author = new Author();\r\n\r\n    author.name = req.body.name;\r\n    author.introduction = req.body.introduction;\r\n\r\n    author.save(function(err) {\r\n        if (err)\r\n            res.json({ message: 'Author NOT Added!', errmsg : err } );\r\n        else\r\n            res.json({ message: 'Author Successfully Added!', data: author });\r\n    });\r\n}\r\n\r\n\r\nrouter.incrementLikes = (req, res) => {\r\n    Author.findById(req.params.id, function(err,author) {\r\n        if (err)\r\n            res.json({ message: 'Author NOT Found!', errmsg : err } );\r\n        else {\r\n            author.likes.push(req.session.userId);\r\n            author.save(function (err) {\r\n                if (err)\r\n                    res.json({ message: 'Author NOT liked!', errmsg : err } );\r\n                else\r\n                    res.json({ message: 'Author Successfully Liked!', data: author });\r\n            });\r\n        }\r\n    });\r\n};\r\n\r\nrouter.decreaseLikes = (req, res) => {\r\n    Author.findById(req.params.id, function(err,author) {\r\n        if (err)\r\n            res.json({ message: 'Author NOT Found!', errmsg : err } );\r\n        else {\r\n            author.likes.remove(req.session.userId);\r\n            author.save(function (err) {\r\n                if (err)\r\n                    res.json({ message: 'Author NOT liked!', errmsg : err } );\r\n                else\r\n                    res.json({ message: 'Author Successfully Unliked!', data: author });\r\n            });\r\n        }\r\n    });\r\n};\r\n\r\n\r\nrouter.incrementWorks = (req, res) => {\r\n    Author.findById(req.params.id, function(err,author) {\r\n        if (err)\r\n            res.json({ message: 'Author NOT Found!', errmsg : err } );\r\n        else {\r\n            author.works.push(req.body.poemId);\r\n            author.save(function (err) {\r\n                if (err)\r\n                    res.json({ message: 'Work NOT Added!', errmsg : err } );\r\n                else\r\n                    res.json({ message: 'Work Successfully Added!', data: author });\r\n            });\r\n        }\r\n    });\r\n};\r\n\r\nrouter.deleteWorks = (req, res) => {\r\n    Author.findById(req.params.id, function(err,author) {\r\n        if (err)\r\n            res.json({ message: 'Author NOT Found!', errmsg : err } );\r\n        else {\r\n            author.works.remove(req.body.poemId);\r\n            author.save(function (err) {\r\n                if (err)\r\n                    res.json({ message: 'Author NOT liked!', errmsg : err } );\r\n                else\r\n                    res.json({ message: 'Work Successfully deleted!', data: author });\r\n            });\r\n        }\r\n    });\r\n};\r\n\r\nrouter.deleteAuthor = (req, res) => {\r\n    Author.findByIdAndRemove(req.params.id, function(err) {\r\n        if (err)\r\n            res.json({ message: 'Author NOT DELETED!', errmsg : err } );\r\n        else\r\n            res.json({ message: 'Author Successfully Deleted!'});\r\n    });\r\n}\r\n\r\n\r\nmodule.exports = router;"
      ]
    },
    "sourceType": "module",
    "mtime": 1572959102511
  },
  "{\"sourceRoot\":\"D:\\\\Webstorm\\\\poetryWeb\\\\test\\\\functional\\\\api\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Webstorm\\\\poetryWeb\",\"filename\":\"D:\\\\Webstorm\\\\poetryWeb\\\\test\\\\functional\\\\api\\\\usersTest.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"test \",\"root\":\"D:\\\\Webstorm\\\\poetryWeb\",\"plugins\":[],\"presets\":[]}:7.3.4:test ": {
    "metadata": {},
    "options": {
      "sourceRoot": "D:\\Webstorm\\poetryWeb\\test\\functional\\api",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "D:\\Webstorm\\poetryWeb",
      "filename": "D:\\Webstorm\\poetryWeb\\test\\functional\\api\\usersTest.js",
      "babelrc": false,
      "configFile": false,
      "envName": "test ",
      "root": "D:\\Webstorm\\poetryWeb",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\Webstorm\\poetryWeb\\test\\functional\\api\\usersTest.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "D:\\Webstorm\\poetryWeb\\test\\functional\\api\\usersTest.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\Webstorm\\poetryWeb\\test\\functional\\api",
        "sourceFileName": "usersTest.js"
      }
    },
    "ast": null,
    "code": "const chai = require(\"chai\");\n\nconst server = require(\"../../../bin/www\");\n\nconst expect = chai.expect;\n\nconst request = require(\"supertest\");\n\nconst _ = require(\"lodash\");\n\nlet User = require(\"../../../models/users\");\n\nlet validID;\nlet idForTest;\ndescribe(\"Users\", () => {\n  beforeEach(async () => {\n    try {\n      await User.deleteMany({});\n      let user = new User();\n      user.username = \"YeatsFans\";\n      user.email = \"LovYeats@lala.com\";\n      user.password = \"trytry123\";\n      user.gender = \"Male\";\n      await user.save();\n      user = new User();\n      user.username = \"DufuFans\";\n      user.email = \"LoveDF@haha.com\";\n      user.password = \"trytry345\";\n      user.gender = \"Female\";\n      await user.save();\n      user = await User.findOne({\n        username: \"YeatsFans\"\n      });\n      validID = user._id;\n    } catch (error) {\n      console.log(error);\n    }\n  });\n  describe(\"GET /users\", () => {\n    it(\"should return all the users\", done => {\n      request(server).get(\"/users\").set(\"Accept\", \"application/json\").expect(\"Content-Type\", /json/).expect(200).end((err, res) => {\n        try {\n          expect(res.body).to.be.a(\"array\");\n          expect(res.body.length).to.equal(2);\n\n          let result = _.map(res.body, user => {\n            return {\n              username: user.username\n            };\n          });\n\n          expect(result).to.deep.include({\n            username: \"YeatsFans\"\n          });\n          expect(result).to.deep.include({\n            username: \"DufuFans\"\n          });\n          done();\n        } catch (e) {\n          done(e);\n        }\n      });\n    });\n  });\n  describe(\"GET /users/:id\", () => {\n    describe(\"when the id is valid\", () => {\n      it(\"should return the matching user\", done => {\n        request(server).get(`/users/${validID}`).set(\"Accept\", \"application/json\").expect(\"Content-Type\", /json/).expect(200).end((err, res) => {\n          expect(res.body[0]).to.have.property(\"username\", \"YeatsFans\");\n          done(err);\n        });\n      });\n    });\n    describe(\"when the id is invalid\", () => {\n      it(\"should return the NOT found message\", done => {\n        request(server).get(\"/users/9999\").set(\"Accept\", \"application/json\").expect(\"Content-Type\", /json/).expect(200).end((err, res) => {\n          expect(res.body.message).equals(\"User NOT Found!\");\n          done(err);\n        });\n      });\n    });\n  });\n  describe(\"POST /users/login\", () => {\n    describe(\"when the logemail and logpassword are valid\", () => {\n      it(\"should return confirmation message and update datastore\", () => {\n        const user = {\n          logemail: \"LoveDF@haha.com\",\n          logpassword: \"trytry345\"\n        };\n        return request(server).post(\"/users/login\").send(user).expect(200).then(res => {\n          expect(res.body.message).equals(\"User Successfully Login!\");\n          validID = res.body.data;\n        });\n      });\n      after(() => {\n        return request(server).get(`/users/${validID}`).expect(200).then(res => {\n          expect(res.body[0]).to.have.property(\"username\", \"DufuFans\");\n        });\n      });\n    });\n    describe(\"when the logemail is invalid\", () => {\n      it(\"should return information is wrong\", () => {\n        const user = {\n          logemail: \"LoveF@haha.com\",\n          logpassword: \"trytry345\"\n        };\n        return request(server).post(\"/users/login\").send(user).expect(200).then(res => {\n          expect(res.body.message).equals(\"Wrong email or password!\");\n        });\n      });\n    });\n    describe(\"when the logpassword is invalid\", () => {\n      it(\"should return information is wrong\", () => {\n        const user = {\n          logemail: \"LoveDF@haha.com\",\n          logpassword: \"try345\"\n        };\n        return request(server).post(\"/users/login\").send(user).expect(200).then(res => {\n          expect(res.body.message).equals(\"Wrong email or password!\");\n        });\n      });\n    });\n  });\n  describe(\"POST /usersRegister\", () => {\n    describe(\"when the all fields are filled and valid, password and passwordConf match\", () => {\n      it(\"should return the matching user\", () => {\n        const user = {\n          email: \"LoveWS@ho.com\",\n          username: \"WilliamShakespeareFan\",\n          password: \"trytry456\",\n          passwordConf: \"trytry456\",\n          gender: \"Female\"\n        };\n        return request(server).post(\"/usersRegister\").send(user).expect(200).then(res => {\n          expect(res.body.message).equals(\"User Successfully Added(Registered)!\");\n          validID = res.body.data._id;\n        });\n      });\n      after(() => {\n        return request(server).get(`/users/${validID}`).expect(200).then(res => {\n          expect(res.body[0]).to.have.property(\"username\", \"WilliamShakespeareFan\");\n        });\n      });\n    });\n    describe(\"when the not all fields are filled\", () => {\n      it(\"should return the err message\", () => {\n        const user = {\n          email: \"LoveWS@ho.com\",\n          password: \"trytry456\",\n          passwordConf: \"trytry456\",\n          gender: \"Female\"\n        };\n        return request(server).post(\"/usersRegister\").send(user).expect(200).then(res => {\n          expect(res.body.message).equals(\"All fields required\");\n        });\n      });\n    });\n    describe(\"when the password and passwordConf dont match\", () => {\n      it(\"should return error message\", () => {\n        const user = {\n          email: \"LoveWS@ho.com\",\n          username: \"WilliamShakespeareFan\",\n          password: \"trytry456\",\n          passwordConf: \"trytr456\",\n          gender: \"Female\"\n        };\n        return request(server).post(\"/usersRegister\").send(user).expect(200).then(res => {\n          expect(res.body.message).equals(\"Passwords do not match.\");\n        });\n        /*.set(\"Accept\", \"application/json\")\r\n        .expect(\"Content-Type\", /json/)\r\n        .expect(200)\r\n        .end((err, res) => {\r\n            expect(res.body.message).equals(\"Passwords do not match.\");\r\n            done(err);\r\n        });*/\n      });\n    });\n  });\n  describe(\"DELETE /users\", () => {\n    describe(\"when the id is valid\", () => {\n      it(\"should return confirmation message and delete datastore\", () => {\n        return request(server).delete(`/users/${validID}`).expect(200).then(res => {\n          expect(res.body.message).equals('User Successfully Deleted!');\n        });\n      });\n      after(() => {\n        return request(server).get(`/users/${validID}`).expect(200).expect([]);\n      });\n    });\n    describe(\"when the id is invalid\", () => {\n      it(\"should return confirmation message and delete datastore\", () => {\n        return request(server).delete(\"/donations/1100001\").expect(404).expect({});\n      });\n    });\n  });\n  describe(\"GET /usersLogout\", () => {\n    describe(\"when the id is valid\", () => {\n      it(\"should return the matching user\", done => {\n        request(server).get(\"/usersLogout\").set(\"Accept\", \"application/json\").expect(\"Content-Type\", /json/).expect(200).end((err, res) => {\n          expect(res.body.message).equals(\"Successfully log out!\");\n          done(err);\n        });\n      });\n    });\n  });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzVGVzdC5qcyJdLCJuYW1lcyI6WyJjaGFpIiwicmVxdWlyZSIsInNlcnZlciIsImV4cGVjdCIsInJlcXVlc3QiLCJfIiwiVXNlciIsInZhbGlkSUQiLCJpZEZvclRlc3QiLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJkZWxldGVNYW55IiwidXNlciIsInVzZXJuYW1lIiwiZW1haWwiLCJwYXNzd29yZCIsImdlbmRlciIsInNhdmUiLCJmaW5kT25lIiwiX2lkIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwiaXQiLCJkb25lIiwiZ2V0Iiwic2V0IiwiZW5kIiwiZXJyIiwicmVzIiwiYm9keSIsInRvIiwiYmUiLCJhIiwibGVuZ3RoIiwiZXF1YWwiLCJyZXN1bHQiLCJtYXAiLCJkZWVwIiwiaW5jbHVkZSIsImUiLCJoYXZlIiwicHJvcGVydHkiLCJtZXNzYWdlIiwiZXF1YWxzIiwibG9nZW1haWwiLCJsb2dwYXNzd29yZCIsInBvc3QiLCJzZW5kIiwidGhlbiIsImRhdGEiLCJhZnRlciIsInBhc3N3b3JkQ29uZiIsImRlbGV0ZSJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsSUFBSSxHQUFHQyxPQUFPLENBQUMsTUFBRCxDQUFwQjs7QUFDQSxNQUFNQyxNQUFNLEdBQUdELE9BQU8sQ0FBQyxrQkFBRCxDQUF0Qjs7QUFDQSxNQUFNRSxNQUFNLEdBQUdILElBQUksQ0FBQ0csTUFBcEI7O0FBQ0EsTUFBTUMsT0FBTyxHQUFHSCxPQUFPLENBQUMsV0FBRCxDQUF2Qjs7QUFDQSxNQUFNSSxDQUFDLEdBQUdKLE9BQU8sQ0FBQyxRQUFELENBQWpCOztBQUVBLElBQUlLLElBQUksR0FBR0wsT0FBTyxDQUFDLHVCQUFELENBQWxCOztBQUNBLElBQUlNLE9BQUo7QUFDQSxJQUFJQyxTQUFKO0FBRUFDLFFBQVEsQ0FBQyxPQUFELEVBQVUsTUFBTTtBQUNwQkMsRUFBQUEsVUFBVSxDQUFDLFlBQVk7QUFDbkIsUUFBSTtBQUNBLFlBQU1KLElBQUksQ0FBQ0ssVUFBTCxD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LGtCQUZuQixFQUdLdkIsTUFITCxDQUdZLGNBSFosRUFHNEIsTUFINUIsRUFJS0EsTUFKTCxDQUlZLEdBSlosRUFLS3dCLEdBTEwsQ0FLUyxDQUFDQyxHQUFELEVBQU1DLEdBQU4sS0FBYztBQUNmMUIsVUFBQUEsTUFBTSxDQUFDMEIsR0FBRyxDQUFDQyxJQUFKLENBQVNhLE9BQVYsQ0FBTixDQUF5QkMsTUFBekIsQ0FBZ0MsdUJBQWhDO0FBQ0FwQixVQUFBQSxJQUFJLENBQUNJLEdBQUQsQ0FBSjtBQUNILFNBUkw7QUFTSCxPQVZDLENBQUY7QUFXSCxLQVpPLENBQVI7QUFhSCxHQWRPLENBQVI7QUFnQkgsQ0FwUE8sQ0FBUiIsInNvdXJjZVJvb3QiOiJEOlxcV2Vic3Rvcm1cXHBvZXRyeVdlYlxcdGVzdFxcZnVuY3Rpb25hbFxcYXBpIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgY2hhaSA9IHJlcXVpcmUoXCJjaGFpXCIpO1xyXG5jb25zdCBzZXJ2ZXIgPSByZXF1aXJlKFwiLi4vLi4vLi4vYmluL3d3d1wiKTtcclxuY29uc3QgZXhwZWN0ID0gY2hhaS5leHBlY3Q7XHJcbmNvbnN0IHJlcXVlc3QgPSByZXF1aXJlKFwic3VwZXJ0ZXN0XCIpO1xyXG5jb25zdCBfID0gcmVxdWlyZShcImxvZGFzaFwiKTtcclxuXHJcbmxldCBVc2VyID0gcmVxdWlyZShcIi4uLy4uLy4uL21vZGVscy91c2Vyc1wiKTtcclxubGV0IHZhbGlkSUQ7XHJcbmxldCBpZEZvclRlc3Q7XHJcblxyXG5kZXNjcmliZShcIlVzZXJzXCIsICgpID0+IHtcclxuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IFVzZXIuZGVsZXRlTWFueSh7fSk7XHJcbiAgICAgICAgICAgIGxldCB1c2VyID0gbmV3IFVzZXIoKTtcclxuICAgICAgICAgICAgdXNlci51c2VybmFtZSA9IFwiWWVhdHNGYW5zXCI7XHJcbiAgICAgICAgICAgIHVzZXIuZW1haWwgPSBcIkxvdlllYXRzQGxhbGEuY29tXCJcclxuICAgICAgICAgICAgdXNlci5wYXNzd29yZD0gXCJ0cnl0cnkxMjNcIjtcclxuICAgICAgICAgICAgdXNlci5nZW5kZXI9XCJNYWxlXCI7XHJcbiAgICAgICAgICAgIGF3YWl0IHVzZXIuc2F2ZSgpO1xyXG5cclxuICAgICAgICAgICAgdXNlciA9IG5ldyBVc2VyKCk7XHJcbiAgICAgICAgICAgIHVzZXIudXNlcm5hbWUgPSBcIkR1ZnVGYW5zXCI7XHJcbiAgICAgICAgICAgIHVzZXIuZW1haWwgPSBcIkxvdmVERkBoYWhhLmNvbVwiXHJcbiAgICAgICAgICAgIHVzZXIucGFzc3dvcmQ9IFwidHJ5dHJ5MzQ1XCI7XHJcbiAgICAgICAgICAgIHVzZXIuZ2VuZGVyPVwiRmVtYWxlXCI7XHJcbiAgICAgICAgICAgIGF3YWl0IHVzZXIuc2F2ZSgpO1xyXG5cclxuICAgICAgICAgICAgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7dXNlcm5hbWU6XCJZZWF0c0ZhbnNcIn0pO1xyXG4gICAgICAgICAgICB2YWxpZElEID0gdXNlci5faWQ7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgZGVzY3JpYmUoXCJHRVQgL3VzZXJzXCIsICgpID0+IHtcclxuICAgICAgICBpdChcInNob3VsZCByZXR1cm4gYWxsIHRoZSB1c2Vyc1wiLCBkb25lID0+IHtcclxuICAgICAgICAgICAgcmVxdWVzdChzZXJ2ZXIpXHJcbiAgICAgICAgICAgICAgICAuZ2V0KFwiL3VzZXJzXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0KFwiQWNjZXB0XCIsIFwiYXBwbGljYXRpb24vanNvblwiKVxyXG4gICAgICAgICAgICAgICAgLmV4cGVjdChcIkNvbnRlbnQtVHlwZVwiLCAvanNvbi8pXHJcbiAgICAgICAgICAgICAgICAuZXhwZWN0KDIwMClcclxuICAgICAgICAgICAgICAgIC5lbmQoKGVyciwgcmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3QocmVzLmJvZHkpLnRvLmJlLmEoXCJhcnJheVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHJlcy5ib2R5Lmxlbmd0aCkudG8uZXF1YWwoMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSBfLm1hcChyZXMuYm9keSwgdXNlciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyB1c2VybmFtZTogdXNlci51c2VybmFtZX07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3QocmVzdWx0KS50by5kZWVwLmluY2x1ZGUoeyB1c2VybmFtZTogXCJZZWF0c0ZhbnNcIiB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG8uZGVlcC5pbmNsdWRlKHsgdXNlcm5hbWU6IFwiRHVmdUZhbnNcIiB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9uZShlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgZGVzY3JpYmUoXCJHRVQgL3VzZXJzLzppZFwiLCAoKSA9PiB7XHJcbiAgICAgICAgZGVzY3JpYmUoXCJ3aGVuIHRoZSBpZCBpcyB2YWxpZFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGl0KFwic2hvdWxkIHJldHVybiB0aGUgbWF0Y2hpbmcgdXNlclwiLCBkb25lID0+IHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3Qoc2VydmVyKVxyXG4gICAgICAgICAgICAgICAgICAgIC5nZXQoYC91c2Vycy8ke3ZhbGlkSUR9YClcclxuICAgICAgICAgICAgICAgICAgICAuc2V0KFwiQWNjZXB0XCIsIFwiYXBwbGljYXRpb24vanNvblwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5leHBlY3QoXCJDb250ZW50LVR5cGVcIiwgL2pzb24vKVxyXG4gICAgICAgICAgICAgICAgICAgIC5leHBlY3QoMjAwKVxyXG4gICAgICAgICAgICAgICAgICAgIC5lbmQoKGVyciwgcmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdChyZXMuYm9keVswXSkudG8uaGF2ZS5wcm9wZXJ0eShcInVzZXJuYW1lXCIsXCJZZWF0c0ZhbnNcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvbmUoZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZGVzY3JpYmUoXCJ3aGVuIHRoZSBpZCBpcyBpbnZhbGlkXCIsICgpID0+IHtcclxuICAgICAgICAgICAgaXQoXCJzaG91bGQgcmV0dXJuIHRoZSBOT1QgZm91bmQgbWVzc2FnZVwiLCBkb25lID0+IHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3Qoc2VydmVyKVxyXG4gICAgICAgICAgICAgICAgICAgIC5nZXQoXCIvdXNlcnMvOTk5OVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXQoXCJBY2NlcHRcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmV4cGVjdChcIkNvbnRlbnQtVHlwZVwiLCAvanNvbi8pXHJcbiAgICAgICAgICAgICAgICAgICAgLmV4cGVjdCgyMDApXHJcbiAgICAgICAgICAgICAgICAgICAgLmVuZCgoZXJyLCByZXMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHJlcy5ib2R5Lm1lc3NhZ2UpLmVxdWFscyhcIlVzZXIgTk9UIEZvdW5kIVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9uZShlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgZGVzY3JpYmUoXCJQT1NUIC91c2Vycy9sb2dpblwiLCAoKSA9PiB7XHJcbiAgICAgICAgZGVzY3JpYmUoXCJ3aGVuIHRoZSBsb2dlbWFpbCBhbmQgbG9ncGFzc3dvcmQgYXJlIHZhbGlkXCIsICgpID0+IHtcclxuICAgICAgICAgICAgaXQoXCJzaG91bGQgcmV0dXJuIGNvbmZpcm1hdGlvbiBtZXNzYWdlIGFuZCB1cGRhdGUgZGF0YXN0b3JlXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXIgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nZW1haWwgOlwiTG92ZURGQGhhaGEuY29tXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgbG9ncGFzc3dvcmQ6IFwidHJ5dHJ5MzQ1XCJcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdChzZXJ2ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnBvc3QoXCIvdXNlcnMvbG9naW5cIilcclxuICAgICAgICAgICAgICAgICAgICAuc2VuZCh1c2VyKVxyXG4gICAgICAgICAgICAgICAgICAgIC5leHBlY3QoMjAwKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdChyZXMuYm9keS5tZXNzYWdlKS5lcXVhbHMoXCJVc2VyIFN1Y2Nlc3NmdWxseSBMb2dpbiFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkSUQgPSByZXMuYm9keS5kYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYWZ0ZXIoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3Qoc2VydmVyKVxyXG4gICAgICAgICAgICAgICAgICAgIC5nZXQoYC91c2Vycy8ke3ZhbGlkSUR9YClcclxuICAgICAgICAgICAgICAgICAgICAuZXhwZWN0KDIwMClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3QocmVzLmJvZHlbMF0pLnRvLmhhdmUucHJvcGVydHkoXCJ1c2VybmFtZVwiLCBcIkR1ZnVGYW5zXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBkZXNjcmliZShcIndoZW4gdGhlIGxvZ2VtYWlsIGlzIGludmFsaWRcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBpdChcInNob3VsZCByZXR1cm4gaW5mb3JtYXRpb24gaXMgd3JvbmdcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdXNlciA9IHtcclxuICAgICAgICAgICAgICAgICAgICBsb2dlbWFpbCA6XCJMb3ZlRkBoYWhhLmNvbVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvZ3Bhc3N3b3JkOiBcInRyeXRyeTM0NVwiXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3Qoc2VydmVyKVxyXG4gICAgICAgICAgICAgICAgICAgIC5wb3N0KFwiL3VzZXJzL2xvZ2luXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNlbmQodXNlcilcclxuICAgICAgICAgICAgICAgICAgICAuZXhwZWN0KDIwMClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3QocmVzLmJvZHkubWVzc2FnZSkuZXF1YWxzKFwiV3JvbmcgZW1haWwgb3IgcGFzc3dvcmQhXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBkZXNjcmliZShcIndoZW4gdGhlIGxvZ3Bhc3N3b3JkIGlzIGludmFsaWRcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBpdChcInNob3VsZCByZXR1cm4gaW5mb3JtYXRpb24gaXMgd3JvbmdcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdXNlciA9IHtcclxuICAgICAgICAgICAgICAgICAgICBsb2dlbWFpbCA6XCJMb3ZlREZAaGFoYS5jb21cIixcclxuICAgICAgICAgICAgICAgICAgICBsb2dwYXNzd29yZDogXCJ0cnkzNDVcIlxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0KHNlcnZlcilcclxuICAgICAgICAgICAgICAgICAgICAucG9zdChcIi91c2Vycy9sb2dpblwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZW5kKHVzZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmV4cGVjdCgyMDApXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHJlcy5ib2R5Lm1lc3NhZ2UpLmVxdWFscyhcIldyb25nIGVtYWlsIG9yIHBhc3N3b3JkIVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIGRlc2NyaWJlKFwiUE9TVCAvdXNlcnNSZWdpc3RlclwiLCAoKSA9PiB7XHJcbiAgICAgICAgZGVzY3JpYmUoXCJ3aGVuIHRoZSBhbGwgZmllbGRzIGFyZSBmaWxsZWQgYW5kIHZhbGlkLCBwYXNzd29yZCBhbmQgcGFzc3dvcmRDb25mIG1hdGNoXCIsICgpID0+IHtcclxuICAgICAgICAgICAgaXQoXCJzaG91bGQgcmV0dXJuIHRoZSBtYXRjaGluZyB1c2VyXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXIgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW1haWwgOlwiTG92ZVdTQGhvLmNvbVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOlwiV2lsbGlhbVNoYWtlc3BlYXJlRmFuXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IFwidHJ5dHJ5NDU2XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmRDb25mOiBcInRyeXRyeTQ1NlwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGdlbmRlcjogXCJGZW1hbGVcIlxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0KHNlcnZlcilcclxuICAgICAgICAgICAgICAgICAgICAucG9zdChcIi91c2Vyc1JlZ2lzdGVyXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNlbmQodXNlcilcclxuICAgICAgICAgICAgICAgICAgICAuZXhwZWN0KDIwMClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3QocmVzLmJvZHkubWVzc2FnZSkuZXF1YWxzKFwiVXNlciBTdWNjZXNzZnVsbHkgQWRkZWQoUmVnaXN0ZXJlZCkhXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZElEID0gcmVzLmJvZHkuZGF0YS5faWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBhZnRlcigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdChzZXJ2ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmdldChgL3VzZXJzLyR7dmFsaWRJRH1gKVxyXG4gICAgICAgICAgICAgICAgICAgIC5leHBlY3QoMjAwKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdChyZXMuYm9keVswXSkudG8uaGF2ZS5wcm9wZXJ0eShcInVzZXJuYW1lXCIsIFwiV2lsbGlhbVNoYWtlc3BlYXJlRmFuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBkZXNjcmliZShcIndoZW4gdGhlIG5vdCBhbGwgZmllbGRzIGFyZSBmaWxsZWRcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBpdChcInNob3VsZCByZXR1cm4gdGhlIGVyciBtZXNzYWdlXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXIgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW1haWwgOlwiTG92ZVdTQGhvLmNvbVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBcInRyeXRyeTQ1NlwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkQ29uZjogXCJ0cnl0cnk0NTZcIixcclxuICAgICAgICAgICAgICAgICAgICBnZW5kZXI6IFwiRmVtYWxlXCJcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdChzZXJ2ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnBvc3QoXCIvdXNlcnNSZWdpc3RlclwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZW5kKHVzZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmV4cGVjdCgyMDApXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHJlcy5ib2R5Lm1lc3NhZ2UpLmVxdWFscyhcIkFsbCBmaWVsZHMgcmVxdWlyZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRlc2NyaWJlKFwid2hlbiB0aGUgcGFzc3dvcmQgYW5kIHBhc3N3b3JkQ29uZiBkb250IG1hdGNoXCIsICgpID0+IHtcclxuICAgICAgICAgICAgaXQoXCJzaG91bGQgcmV0dXJuIGVycm9yIG1lc3NhZ2VcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdXNlciA9IHtcclxuICAgICAgICAgICAgICAgICAgICBlbWFpbCA6XCJMb3ZlV1NAaG8uY29tXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6XCJXaWxsaWFtU2hha2VzcGVhcmVGYW5cIixcclxuICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogXCJ0cnl0cnk0NTZcIixcclxuICAgICAgICAgICAgICAgICAgICBwYXNzd29yZENvbmY6IFwidHJ5dHI0NTZcIixcclxuICAgICAgICAgICAgICAgICAgICBnZW5kZXI6IFwiRmVtYWxlXCJcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdChzZXJ2ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnBvc3QoXCIvdXNlcnNSZWdpc3RlclwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZW5kKHVzZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmV4cGVjdCgyMDApXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHJlcy5ib2R5Lm1lc3NhZ2UpLmVxdWFscyhcIlBhc3N3b3JkcyBkbyBub3QgbWF0Y2guXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIC8qLnNldChcIkFjY2VwdFwiLCBcImFwcGxpY2F0aW9uL2pzb25cIilcclxuICAgICAgICAgICAgICAgICAgICAuZXhwZWN0KFwiQ29udGVudC1UeXBlXCIsIC9qc29uLylcclxuICAgICAgICAgICAgICAgICAgICAuZXhwZWN0KDIwMClcclxuICAgICAgICAgICAgICAgICAgICAuZW5kKChlcnIsIHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3QocmVzLmJvZHkubWVzc2FnZSkuZXF1YWxzKFwiUGFzc3dvcmRzIGRvIG5vdCBtYXRjaC5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvbmUoZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTsqL1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgZGVzY3JpYmUoXCJERUxFVEUgL3VzZXJzXCIsICgpID0+IHtcclxuICAgICAgICBkZXNjcmliZShcIndoZW4gdGhlIGlkIGlzIHZhbGlkXCIsICgpID0+IHtcclxuICAgICAgICAgICAgaXQoXCJzaG91bGQgcmV0dXJuIGNvbmZpcm1hdGlvbiBtZXNzYWdlIGFuZCBkZWxldGUgZGF0YXN0b3JlXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0KHNlcnZlcilcclxuICAgICAgICAgICAgICAgICAgICAuZGVsZXRlKGAvdXNlcnMvJHt2YWxpZElEfWApXHJcbiAgICAgICAgICAgICAgICAgICAgLmV4cGVjdCgyMDApXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHJlcy5ib2R5Lm1lc3NhZ2UpLmVxdWFscygnVXNlciBTdWNjZXNzZnVsbHkgRGVsZXRlZCEnKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGFmdGVyKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0KHNlcnZlcilcclxuICAgICAgICAgICAgICAgICAgICAuZ2V0KGAvdXNlcnMvJHt2YWxpZElEfWApXHJcbiAgICAgICAgICAgICAgICAgICAgLmV4cGVjdCgyMDApXHJcbiAgICAgICAgICAgICAgICAgICAgLmV4cGVjdChbXSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRlc2NyaWJlKFwid2hlbiB0aGUgaWQgaXMgaW52YWxpZFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGl0KFwic2hvdWxkIHJldHVybiBjb25maXJtYXRpb24gbWVzc2FnZSBhbmQgZGVsZXRlIGRhdGFzdG9yZVwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdChzZXJ2ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmRlbGV0ZShcIi9kb25hdGlvbnMvMTEwMDAwMVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5leHBlY3QoNDA0KVxyXG4gICAgICAgICAgICAgICAgICAgIC5leHBlY3Qoe30pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgZGVzY3JpYmUoXCJHRVQgL3VzZXJzTG9nb3V0XCIsICgpID0+IHtcclxuICAgICAgICBkZXNjcmliZShcIndoZW4gdGhlIGlkIGlzIHZhbGlkXCIsICgpID0+IHtcclxuICAgICAgICAgICAgaXQoXCJzaG91bGQgcmV0dXJuIHRoZSBtYXRjaGluZyB1c2VyXCIsIGRvbmUgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdChzZXJ2ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmdldChcIi91c2Vyc0xvZ291dFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXQoXCJBY2NlcHRcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmV4cGVjdChcIkNvbnRlbnQtVHlwZVwiLCAvanNvbi8pXHJcbiAgICAgICAgICAgICAgICAgICAgLmV4cGVjdCgyMDApXHJcbiAgICAgICAgICAgICAgICAgICAgLmVuZCgoZXJyLCByZXMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHJlcy5ib2R5Lm1lc3NhZ2UpLmVxdWFscyhcIlN1Y2Nlc3NmdWxseSBsb2cgb3V0IVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9uZShlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxufSk7XHJcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "usersTest.js"
      ],
      "names": [
        "chai",
        "require",
        "server",
        "expect",
        "request",
        "_",
        "User",
        "validID",
        "idForTest",
        "describe",
        "beforeEach",
        "deleteMany",
        "user",
        "username",
        "email",
        "password",
        "gender",
        "save",
        "findOne",
        "_id",
        "error",
        "console",
        "log",
        "it",
        "done",
        "get",
        "set",
        "end",
        "err",
        "res",
        "body",
        "to",
        "be",
        "a",
        "length",
        "equal",
        "result",
        "map",
        "deep",
        "include",
        "e",
        "have",
        "property",
        "message",
        "equals",
        "logemail",
        "logpassword",
        "post",
        "send",
        "then",
        "data",
        "after",
        "passwordConf",
        "delete"
      ],
      "mappings": "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",
      "sourceRoot": "D:\\Webstorm\\poetryWeb\\test\\functional\\api",
      "sourcesContent": [
        "const chai = require(\"chai\");\r\nconst server = require(\"../../../bin/www\");\r\nconst expect = chai.expect;\r\nconst request = require(\"supertest\");\r\nconst _ = require(\"lodash\");\r\n\r\nlet User = require(\"../../../models/users\");\r\nlet validID;\r\nlet idForTest;\r\n\r\ndescribe(\"Users\", () => {\r\n    beforeEach(async () => {\r\n        try {\r\n            await User.deleteMany({});\r\n            let user = new User();\r\n            user.username = \"YeatsFans\";\r\n            user.email = \"LovYeats@lala.com\"\r\n            user.password= \"trytry123\";\r\n            user.gender=\"Male\";\r\n            await user.save();\r\n\r\n            user = new User();\r\n            user.username = \"DufuFans\";\r\n            user.email = \"LoveDF@haha.com\"\r\n            user.password= \"trytry345\";\r\n            user.gender=\"Female\";\r\n            await user.save();\r\n\r\n            user = await User.findOne({username:\"YeatsFans\"});\r\n            validID = user._id;\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    });\r\n    describe(\"GET /users\", () => {\r\n        it(\"should return all the users\", done => {\r\n            request(server)\r\n                .get(\"/users\")\r\n                .set(\"Accept\", \"application/json\")\r\n                .expect(\"Content-Type\", /json/)\r\n                .expect(200)\r\n                .end((err, res) => {\r\n                    try{\r\n                        expect(res.body).to.be.a(\"array\");\r\n                        expect(res.body.length).to.equal(2);\r\n                        let result = _.map(res.body, user => {\r\n                            return { username: user.username};\r\n                        });\r\n                        expect(result).to.deep.include({ username: \"YeatsFans\" });\r\n                        expect(result).to.deep.include({ username: \"DufuFans\" });\r\n                        done();\r\n                    } catch (e) {\r\n                        done(e);\r\n                    }\r\n                });\r\n        });\r\n    });\r\n    describe(\"GET /users/:id\", () => {\r\n        describe(\"when the id is valid\", () => {\r\n            it(\"should return the matching user\", done => {\r\n                request(server)\r\n                    .get(`/users/${validID}`)\r\n                    .set(\"Accept\", \"application/json\")\r\n                    .expect(\"Content-Type\", /json/)\r\n                    .expect(200)\r\n                    .end((err, res) => {\r\n                        expect(res.body[0]).to.have.property(\"username\",\"YeatsFans\");\r\n                        done(err);\r\n                    });\r\n            });\r\n        });\r\n        describe(\"when the id is invalid\", () => {\r\n            it(\"should return the NOT found message\", done => {\r\n                request(server)\r\n                    .get(\"/users/9999\")\r\n                    .set(\"Accept\", \"application/json\")\r\n                    .expect(\"Content-Type\", /json/)\r\n                    .expect(200)\r\n                    .end((err, res) => {\r\n                        expect(res.body.message).equals(\"User NOT Found!\");\r\n                        done(err);\r\n                    });\r\n            });\r\n        });\r\n    });\r\n    describe(\"POST /users/login\", () => {\r\n        describe(\"when the logemail and logpassword are valid\", () => {\r\n            it(\"should return confirmation message and update datastore\", () => {\r\n                const user = {\r\n                    logemail :\"LoveDF@haha.com\",\r\n                    logpassword: \"trytry345\"\r\n                };\r\n                return request(server)\r\n                    .post(\"/users/login\")\r\n                    .send(user)\r\n                    .expect(200)\r\n                    .then(res => {\r\n                        expect(res.body.message).equals(\"User Successfully Login!\");\r\n                        validID = res.body.data;\r\n                    });\r\n            });\r\n            after(() => {\r\n                return request(server)\r\n                    .get(`/users/${validID}`)\r\n                    .expect(200)\r\n                    .then(res => {\r\n                        expect(res.body[0]).to.have.property(\"username\", \"DufuFans\");\r\n                    });\r\n            });\r\n        });\r\n        describe(\"when the logemail is invalid\", () => {\r\n            it(\"should return information is wrong\", () => {\r\n                const user = {\r\n                    logemail :\"LoveF@haha.com\",\r\n                    logpassword: \"trytry345\"\r\n                };\r\n                return request(server)\r\n                    .post(\"/users/login\")\r\n                    .send(user)\r\n                    .expect(200)\r\n                    .then(res => {\r\n                        expect(res.body.message).equals(\"Wrong email or password!\");\r\n                    });\r\n            });\r\n        });\r\n        describe(\"when the logpassword is invalid\", () => {\r\n            it(\"should return information is wrong\", () => {\r\n                const user = {\r\n                    logemail :\"LoveDF@haha.com\",\r\n                    logpassword: \"try345\"\r\n                };\r\n                return request(server)\r\n                    .post(\"/users/login\")\r\n                    .send(user)\r\n                    .expect(200)\r\n                    .then(res => {\r\n                        expect(res.body.message).equals(\"Wrong email or password!\");\r\n                    });\r\n            });\r\n        });\r\n    });\r\n    describe(\"POST /usersRegister\", () => {\r\n        describe(\"when the all fields are filled and valid, password and passwordConf match\", () => {\r\n            it(\"should return the matching user\", () => {\r\n                const user = {\r\n                    email :\"LoveWS@ho.com\",\r\n                    username:\"WilliamShakespeareFan\",\r\n                    password: \"trytry456\",\r\n                    passwordConf: \"trytry456\",\r\n                    gender: \"Female\"\r\n                };\r\n                return request(server)\r\n                    .post(\"/usersRegister\")\r\n                    .send(user)\r\n                    .expect(200)\r\n                    .then(res => {\r\n                        expect(res.body.message).equals(\"User Successfully Added(Registered)!\");\r\n                        validID = res.body.data._id;\r\n                    });\r\n            });\r\n            after(() => {\r\n                return request(server)\r\n                    .get(`/users/${validID}`)\r\n                    .expect(200)\r\n                    .then(res => {\r\n                        expect(res.body[0]).to.have.property(\"username\", \"WilliamShakespeareFan\");\r\n                    });\r\n            });\r\n        });\r\n        describe(\"when the not all fields are filled\", () => {\r\n            it(\"should return the err message\", () => {\r\n                const user = {\r\n                    email :\"LoveWS@ho.com\",\r\n                    password: \"trytry456\",\r\n                    passwordConf: \"trytry456\",\r\n                    gender: \"Female\"\r\n                };\r\n                return request(server)\r\n                    .post(\"/usersRegister\")\r\n                    .send(user)\r\n                    .expect(200)\r\n                    .then(res => {\r\n                        expect(res.body.message).equals(\"All fields required\");\r\n                    });\r\n            });\r\n        });\r\n        describe(\"when the password and passwordConf dont match\", () => {\r\n            it(\"should return error message\", () => {\r\n                const user = {\r\n                    email :\"LoveWS@ho.com\",\r\n                    username:\"WilliamShakespeareFan\",\r\n                    password: \"trytry456\",\r\n                    passwordConf: \"trytr456\",\r\n                    gender: \"Female\"\r\n                };\r\n                return request(server)\r\n                    .post(\"/usersRegister\")\r\n                    .send(user)\r\n                    .expect(200)\r\n                    .then(res => {\r\n                        expect(res.body.message).equals(\"Passwords do not match.\");\r\n                    });\r\n                    /*.set(\"Accept\", \"application/json\")\r\n                    .expect(\"Content-Type\", /json/)\r\n                    .expect(200)\r\n                    .end((err, res) => {\r\n                        expect(res.body.message).equals(\"Passwords do not match.\");\r\n                        done(err);\r\n                    });*/\r\n            });\r\n        });\r\n    });\r\n    describe(\"DELETE /users\", () => {\r\n        describe(\"when the id is valid\", () => {\r\n            it(\"should return confirmation message and delete datastore\", () => {\r\n                return request(server)\r\n                    .delete(`/users/${validID}`)\r\n                    .expect(200)\r\n                    .then(res => {\r\n                        expect(res.body.message).equals('User Successfully Deleted!');\r\n                    });\r\n            });\r\n            after(() => {\r\n                return request(server)\r\n                    .get(`/users/${validID}`)\r\n                    .expect(200)\r\n                    .expect([]);\r\n            });\r\n        });\r\n        describe(\"when the id is invalid\", () => {\r\n            it(\"should return confirmation message and delete datastore\", () => {\r\n                return request(server)\r\n                    .delete(\"/donations/1100001\")\r\n                    .expect(404)\r\n                    .expect({});\r\n            });\r\n        });\r\n    });\r\n    describe(\"GET /usersLogout\", () => {\r\n        describe(\"when the id is valid\", () => {\r\n            it(\"should return the matching user\", done => {\r\n                request(server)\r\n                    .get(\"/usersLogout\")\r\n                    .set(\"Accept\", \"application/json\")\r\n                    .expect(\"Content-Type\", /json/)\r\n                    .expect(200)\r\n                    .end((err, res) => {\r\n                        expect(res.body.message).equals(\"Successfully log out!\");\r\n                        done(err);\r\n                    });\r\n            });\r\n        });\r\n    });\r\n\r\n});\r\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1572957896652
  },
  "{\"sourceRoot\":\"D:\\\\Webstorm\\\\poetryWeb\\\\test\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Webstorm\\\\poetryWeb\",\"filename\":\"D:\\\\Webstorm\\\\poetryWeb\\\\test\\\\activitiesAfterLogin.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"test \",\"root\":\"D:\\\\Webstorm\\\\poetryWeb\",\"plugins\":[],\"presets\":[]}:7.3.4:test ": {
    "metadata": {},
    "options": {
      "sourceRoot": "D:\\Webstorm\\poetryWeb\\test",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "D:\\Webstorm\\poetryWeb",
      "filename": "D:\\Webstorm\\poetryWeb\\test\\activitiesAfterLogin.js",
      "babelrc": false,
      "configFile": false,
      "envName": "test ",
      "root": "D:\\Webstorm\\poetryWeb",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\Webstorm\\poetryWeb\\test\\activitiesAfterLogin.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "D:\\Webstorm\\poetryWeb\\test\\activitiesAfterLogin.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\Webstorm\\poetryWeb\\test",
        "sourceFileName": "activitiesAfterLogin.js"
      }
    },
    "ast": null,
    "code": "/*\r\nvar expect = require('chai').expect;\r\nvar app = require('../app');\r\nvar request = require('supertest');\r\n\r\n//let's set up the data we need to pass to the login method\r\n    const userCredentials = {\r\n        email: 'sponge@bob.com',\r\n        password: 'garyTheSnail'\r\n    }\r\n//now let's login the user before we run any tests\r\nvar authenticatedUser = request.agent(app);\r\nbefore(function(done){\r\n    authenticatedUser\r\n        .post('/users/login')\r\n        .send(userCredentials)\r\n        .end(function(err, response){\r\n            expect(response.statusCode).to.equal(200);\r\n            done();\r\n        });\r\n});\r\n//this test says: make a POST to the /login route with the email: sponge@bob.com, password: garyTheSnail\r\n//after the POST has completed, make sure the status code is 200\r\n//also make sure that the user has been directed to the /home page\r\n\r\ndescribe('GET /profile', function(done){\r\n//addresses 1st bullet point: if the user is logged in we should get a 200 status code\r\n    it('should return a 200 response if the user is logged in', function(done){\r\n        authenticatedUser.get('/profile')\r\n            .expect(200, done);\r\n    });\r\n//addresses 2nd bullet point: if the user is not logged in we should get a 302 response code and be directed to the /login page\r\n    it('should return a 302 response and redirect to /login', function(done){\r\n        request(app).get('/profile')\r\n            .expect('Location', '/login')\r\n            .expect(302, done);\r\n    });\r\n});\r\n*/\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjdGl2aXRpZXNBZnRlckxvZ2luLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IkQ6XFxXZWJzdG9ybVxccG9ldHJ5V2ViXFx0ZXN0Iiwic291cmNlc0NvbnRlbnQiOlsiLypcclxudmFyIGV4cGVjdCA9IHJlcXVpcmUoJ2NoYWknKS5leHBlY3Q7XHJcbnZhciBhcHAgPSByZXF1aXJlKCcuLi9hcHAnKTtcclxudmFyIHJlcXVlc3QgPSByZXF1aXJlKCdzdXBlcnRlc3QnKTtcclxuXHJcbi8vbGV0J3Mgc2V0IHVwIHRoZSBkYXRhIHdlIG5lZWQgdG8gcGFzcyB0byB0aGUgbG9naW4gbWV0aG9kXHJcbiAgICBjb25zdCB1c2VyQ3JlZGVudGlhbHMgPSB7XHJcbiAgICAgICAgZW1haWw6ICdzcG9uZ2VAYm9iLmNvbScsXHJcbiAgICAgICAgcGFzc3dvcmQ6ICdnYXJ5VGhlU25haWwnXHJcbiAgICB9XHJcbi8vbm93IGxldCdzIGxvZ2luIHRoZSB1c2VyIGJlZm9yZSB3ZSBydW4gYW55IHRlc3RzXHJcbnZhciBhdXRoZW50aWNhdGVkVXNlciA9IHJlcXVlc3QuYWdlbnQoYXBwKTtcclxuYmVmb3JlKGZ1bmN0aW9uKGRvbmUpe1xyXG4gICAgYXV0aGVudGljYXRlZFVzZXJcclxuICAgICAgICAucG9zdCgnL3VzZXJzL2xvZ2luJylcclxuICAgICAgICAuc2VuZCh1c2VyQ3JlZGVudGlhbHMpXHJcbiAgICAgICAgLmVuZChmdW5jdGlvbihlcnIsIHJlc3BvbnNlKXtcclxuICAgICAgICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1c0NvZGUpLnRvLmVxdWFsKDIwMCk7XHJcbiAgICAgICAgICAgIGRvbmUoKTtcclxuICAgICAgICB9KTtcclxufSk7XHJcbi8vdGhpcyB0ZXN0IHNheXM6IG1ha2UgYSBQT1NUIHRvIHRoZSAvbG9naW4gcm91dGUgd2l0aCB0aGUgZW1haWw6IHNwb25nZUBib2IuY29tLCBwYXNzd29yZDogZ2FyeVRoZVNuYWlsXHJcbi8vYWZ0ZXIgdGhlIFBPU1QgaGFzIGNvbXBsZXRlZCwgbWFrZSBzdXJlIHRoZSBzdGF0dXMgY29kZSBpcyAyMDBcclxuLy9hbHNvIG1ha2Ugc3VyZSB0aGF0IHRoZSB1c2VyIGhhcyBiZWVuIGRpcmVjdGVkIHRvIHRoZSAvaG9tZSBwYWdlXHJcblxyXG5kZXNjcmliZSgnR0VUIC9wcm9maWxlJywgZnVuY3Rpb24oZG9uZSl7XHJcbi8vYWRkcmVzc2VzIDFzdCBidWxsZXQgcG9pbnQ6IGlmIHRoZSB1c2VyIGlzIGxvZ2dlZCBpbiB3ZSBzaG91bGQgZ2V0IGEgMjAwIHN0YXR1cyBjb2RlXHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBhIDIwMCByZXNwb25zZSBpZiB0aGUgdXNlciBpcyBsb2dnZWQgaW4nLCBmdW5jdGlvbihkb25lKXtcclxuICAgICAgICBhdXRoZW50aWNhdGVkVXNlci5nZXQoJy9wcm9maWxlJylcclxuICAgICAgICAgICAgLmV4cGVjdCgyMDAsIGRvbmUpO1xyXG4gICAgfSk7XHJcbi8vYWRkcmVzc2VzIDJuZCBidWxsZXQgcG9pbnQ6IGlmIHRoZSB1c2VyIGlzIG5vdCBsb2dnZWQgaW4gd2Ugc2hvdWxkIGdldCBhIDMwMiByZXNwb25zZSBjb2RlIGFuZCBiZSBkaXJlY3RlZCB0byB0aGUgL2xvZ2luIHBhZ2VcclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGEgMzAyIHJlc3BvbnNlIGFuZCByZWRpcmVjdCB0byAvbG9naW4nLCBmdW5jdGlvbihkb25lKXtcclxuICAgICAgICByZXF1ZXN0KGFwcCkuZ2V0KCcvcHJvZmlsZScpXHJcbiAgICAgICAgICAgIC5leHBlY3QoJ0xvY2F0aW9uJywgJy9sb2dpbicpXHJcbiAgICAgICAgICAgIC5leHBlY3QoMzAyLCBkb25lKTtcclxuICAgIH0pO1xyXG59KTtcclxuKi9cclxuIl19",
    "map": {
      "version": 3,
      "sources": [
        "activitiesAfterLogin.js"
      ],
      "names": [],
      "mappings": "AAAA",
      "sourceRoot": "D:\\Webstorm\\poetryWeb\\test",
      "sourcesContent": [
        "/*\r\nvar expect = require('chai').expect;\r\nvar app = require('../app');\r\nvar request = require('supertest');\r\n\r\n//let's set up the data we need to pass to the login method\r\n    const userCredentials = {\r\n        email: 'sponge@bob.com',\r\n        password: 'garyTheSnail'\r\n    }\r\n//now let's login the user before we run any tests\r\nvar authenticatedUser = request.agent(app);\r\nbefore(function(done){\r\n    authenticatedUser\r\n        .post('/users/login')\r\n        .send(userCredentials)\r\n        .end(function(err, response){\r\n            expect(response.statusCode).to.equal(200);\r\n            done();\r\n        });\r\n});\r\n//this test says: make a POST to the /login route with the email: sponge@bob.com, password: garyTheSnail\r\n//after the POST has completed, make sure the status code is 200\r\n//also make sure that the user has been directed to the /home page\r\n\r\ndescribe('GET /profile', function(done){\r\n//addresses 1st bullet point: if the user is logged in we should get a 200 status code\r\n    it('should return a 200 response if the user is logged in', function(done){\r\n        authenticatedUser.get('/profile')\r\n            .expect(200, done);\r\n    });\r\n//addresses 2nd bullet point: if the user is not logged in we should get a 302 response code and be directed to the /login page\r\n    it('should return a 302 response and redirect to /login', function(done){\r\n        request(app).get('/profile')\r\n            .expect('Location', '/login')\r\n            .expect(302, done);\r\n    });\r\n});\r\n*/\r\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1572961750802
  },
  "{\"sourceRoot\":\"D:\\\\Webstorm\\\\poetryWeb\\\\test\\\\functional\\\\api\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Webstorm\\\\poetryWeb\",\"filename\":\"D:\\\\Webstorm\\\\poetryWeb\\\\test\\\\functional\\\\api\\\\poemsTest.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"test \",\"root\":\"D:\\\\Webstorm\\\\poetryWeb\",\"plugins\":[],\"presets\":[]}:7.3.4:test ": {
    "metadata": {},
    "options": {
      "sourceRoot": "D:\\Webstorm\\poetryWeb\\test\\functional\\api",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "D:\\Webstorm\\poetryWeb",
      "filename": "D:\\Webstorm\\poetryWeb\\test\\functional\\api\\poemsTest.js",
      "babelrc": false,
      "configFile": false,
      "envName": "test ",
      "root": "D:\\Webstorm\\poetryWeb",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "D:\\Webstorm\\poetryWeb\\test\\functional\\api\\poemsTest.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "D:\\Webstorm\\poetryWeb\\test\\functional\\api\\poemsTest.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "D:\\Webstorm\\poetryWeb\\test\\functional\\api",
        "sourceFileName": "poemsTest.js"
      }
    },
    "ast": null,
    "code": "const chai = require(\"chai\");\n\nconst server = require(\"../../../bin/www\");\n\nconst expect = chai.expect;\n\nconst request = require(\"supertest\");\n\nconst _ = require(\"lodash\");\n\nlet validID;\n\nlet Poem = require(\"../../../models/poems\");\n\ndescribe(\"Poems\", () => {\n  beforeEach(async () => {\n    try {\n      await Poem.deleteMany({});\n      let poem = new Poem();\n      poem.title = \"On children\";\n      poem.author = \"Kahlil Gibran\";\n      await poem.save();\n      poem = new Poem();\n      poem.title = \"MyPoem\";\n      poem.author = \"Xiaoming\";\n      await poem.save();\n      poem = await Poem.findOne({\n        author: \"Xiaoming\"\n      });\n      validID = poem._id;\n    } catch (error) {\n      console.log(error);\n    }\n  });\n  describe(\"GET /poems\", () => {\n    it(\"should return all the poems\", done => {\n      request(server).get(\"/poems\").set(\"Accept\", \"application/json\").expect(\"Content-Type\", /json/).expect(200).end((err, res) => {\n        try {\n          expect(res.body).to.be.a(\"array\");\n          expect(res.body.length).to.equal(2);\n\n          let result = _.map(res.body, poem => {\n            return {\n              title: poem.title\n            };\n          });\n\n          expect(result).to.deep.include({\n            title: \"On children\"\n          });\n          expect(result).to.deep.include({\n            title: \"MyPoem\"\n          });\n          done();\n        } catch (e) {\n          done(e);\n        }\n      });\n    });\n  });\n  describe(\"GET /poems/:id\", () => {\n    describe(\"when the id is valid\", () => {\n      it(\"should return the matching poem\", done => {\n        request(server).get(`/poems/${validID}`).set(\"Accept\", \"application/json\").expect(\"Content-Type\", /json/).expect(200).end((err, res) => {\n          expect(res.body[0]).to.have.property(\"author\", \"Xiaoming\");\n          done(err);\n        });\n      });\n    });\n    describe(\"when the id is invalid\", () => {\n      it(\"should return the NOT found message\", done => {\n        request(server).get(\"/poems/9999\").set(\"Accept\", \"application/json\").expect(\"Content-Type\", /json/).expect(200).end((err, res) => {\n          expect(res.body.message).equals(\"Poem NOT Found!\");\n          done(err);\n        });\n      });\n    });\n  });\n  describe(\"POST /poems/login\", () => {\n    describe(\"when the title and author are valid\", () => {\n      it(\"should return confirmation message and update datastore\", () => {\n        const poem = {\n          title: \"FirPoem\",\n          author: \"XiaoHong\"\n        };\n        return request(server).post(\"/poems\").send(poem).expect(200).then(res => {\n          expect(res.body.message).equals(\"Poem Successfully Added!\");\n          validID = res.body.data._id;\n        });\n      });\n      after(() => {\n        return request(server).get(`/poems/${validID}`).expect(200).then(res => {\n          expect(res.body[0]).to.have.property(\"author\", \"XiaoHong\");\n        });\n      });\n    });\n    describe(\"when the author not provided\", () => {\n      it(\"should return confirmation message and update datastore\", () => {\n        const poem = {\n          title: \"FirstPoem\"\n        };\n        return request(server).post(\"/poems\").send(poem).expect(200).then(res => {\n          expect(res.body.message).equals(\"Poem Successfully Added!\");\n          validID = res.body.data._id;\n        });\n      });\n      after(() => {\n        return request(server).get(`/poems/${validID}`).expect(200).then(res => {\n          expect(res.body[0]).to.have.property(\"title\", \"FirstPoem\");\n        });\n      });\n    });\n  });\n  describe(\"DELETE /poems\", () => {\n    describe(\"when the id is valid\", () => {\n      it(\"should return confirmation message and delete datastore\", () => {\n        return request(server).delete(`/poems/${validID}`).expect(200).then(res => {\n          expect(res.body.message).equals('Poem Successfully Deleted!');\n        });\n      });\n      after(() => {\n        return request(server).get(`/poems/${validID}`).expect(200).expect([]);\n      });\n    });\n    describe(\"when the id is invalid\", () => {\n      it(\"should return confirmation message and delete datastore\", () => {\n        return request(server).delete(\"/poems/1100001\").expect(200).then(res => {\n          expect(res.body.message).equals('Poem NOT DELETED!');\n        });\n      });\n    });\n  });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvZW1zVGVzdC5qcyJdLCJuYW1lcyI6WyJjaGFpIiwicmVxdWlyZSIsInNlcnZlciIsImV4cGVjdCIsInJlcXVlc3QiLCJfIiwidmFsaWRJRCIsIlBvZW0iLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJkZWxldGVNYW55IiwicG9lbSIsInRpdGxlIiwiYXV0aG9yIiwic2F2ZSIsImZpbmRPbmUiLCJfaWQiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJpdCIsImRvbmUiLCJnZXQiLCJzZXQiLCJlbmQiLCJlcnIiLCJyZXMiLCJib2R5IiwidG8iLCJiZSIsImEiLCJsZW5ndGgiLCJlcXVhbCIsInJlc3VsdCIsIm1hcCIsImRlZXAiLCJpbmNsdWRlIiwiZSIsImhhdmUiLCJwcm9wZXJ0eSIsIm1lc3NhZ2UiLCJlcXVhbHMiLCJwb3N0Iiwic2VuZCIsInRoZW4iLCJkYXRhIiwiYWZ0ZXIiLCJkZWxldGUiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLElBQUksR0FBR0MsT0FBTyxDQUFDLE1BQUQsQ0FBcEI7O0FBQ0EsTUFBTUMsTUFBTSxHQUFHRCxPQUFPLENBQUMsa0JBQUQsQ0FBdEI7O0FBQ0EsTUFBTUUsTUFBTSxHQUFHSCxJQUFJLENBQUNHLE1BQXBCOztBQUNBLE1BQU1DLE9BQU8sR0FBR0gsT0FBTyxDQUFDLFdBQUQsQ0FBdkI7O0FBQ0EsTUFBTUksQ0FBQyxHQUFHSixPQUFPLENBQUMsUUFBRCxDQUFqQjs7QUFDQSxJQUFJSyxPQUFKOztBQUNBLElBQUlDLElBQUksR0FBR04sT0FBTyxDQUFDLHVCQUFELENBQWxCOztBQUVBTyxRQUFRLENBQUMsT0FBRCxFQUFVLE1BQU07QUFDcEJDLEVBQUFBLFVBQVUsQ0FBQyxZQUFZO0FBQ25CLFFBQUk7QUFDQSxZQUFNRixJQUFJLENBQUNHLFVBQUwsQ0FBZ0IsRUFBaEIsQ0FBTjtBQUNBLFVBQUlDLElBQUksR0FBRyxJQUFJSixJQUFKLEVBQVg7QUFDQUksTUFBQUEsSUFBSSxDQUFDQyxLQUFMLEdBQWEsYUFB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QUFMO0FBTUgsS0FmTyxDQUFSO0FBZ0JBSyxJQUFBQSxRQUFRLENBQUMsd0JBQUQsRUFBMkIsTUFBTTtBQUNyQ1ksTUFBQUEsRUFBRSxDQUFDLHlEQUFELEVBQTRELE1BQU07QUFDaEUsZUFBT2hCLE9BQU8sQ0FBQ0YsTUFBRCxDQUFQLENBQ0Y2QyxNQURFLENBQ0ssZ0JBREwsRUFFRjVDLE1BRkUsQ0FFSyxHQUZMLEVBR0Z5QyxJQUhFLENBR0dsQixHQUFHLElBQUk7QUFDVHZCLFVBQUFBLE1BQU0sQ0FBQ3VCLEdBQUcsQ0FBQ0MsSUFBSixDQUFTYSxPQUFWLENBQU4sQ0FBeUJDLE1BQXpCLENBQWdDLG1CQUFoQztBQUNILFNBTEUsQ0FBUDtBQU1ILE9BUEMsQ0FBRjtBQVFILEtBVE8sQ0FBUjtBQVVILEdBM0JPLENBQVI7QUE0QkgsQ0FwSk8sQ0FBUiIsInNvdXJjZVJvb3QiOiJEOlxcV2Vic3Rvcm1cXHBvZXRyeVdlYlxcdGVzdFxcZnVuY3Rpb25hbFxcYXBpIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgY2hhaSA9IHJlcXVpcmUoXCJjaGFpXCIpO1xyXG5jb25zdCBzZXJ2ZXIgPSByZXF1aXJlKFwiLi4vLi4vLi4vYmluL3d3d1wiKTtcclxuY29uc3QgZXhwZWN0ID0gY2hhaS5leHBlY3Q7XHJcbmNvbnN0IHJlcXVlc3QgPSByZXF1aXJlKFwic3VwZXJ0ZXN0XCIpO1xyXG5jb25zdCBfID0gcmVxdWlyZShcImxvZGFzaFwiKTtcclxubGV0IHZhbGlkSUQ7XHJcbmxldCBQb2VtID0gcmVxdWlyZShcIi4uLy4uLy4uL21vZGVscy9wb2Vtc1wiKTtcclxuXHJcbmRlc2NyaWJlKFwiUG9lbXNcIiwgKCkgPT4ge1xyXG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgUG9lbS5kZWxldGVNYW55KHt9KTtcclxuICAgICAgICAgICAgbGV0IHBvZW0gPSBuZXcgUG9lbSgpO1xyXG4gICAgICAgICAgICBwb2VtLnRpdGxlID0gXCJPbiBjaGlsZHJlblwiO1xyXG4gICAgICAgICAgICBwb2VtLmF1dGhvciA9IFwiS2FobGlsIEdpYnJhblwiXHJcbiAgICAgICAgICAgIGF3YWl0IHBvZW0uc2F2ZSgpO1xyXG5cclxuICAgICAgICAgICAgcG9lbSA9IG5ldyBQb2VtKCk7XHJcbiAgICAgICAgICAgIHBvZW0udGl0bGUgPSBcIk15UG9lbVwiO1xyXG4gICAgICAgICAgICBwb2VtLmF1dGhvciA9IFwiWGlhb21pbmdcIlxyXG4gICAgICAgICAgICBhd2FpdCBwb2VtLnNhdmUoKTtcclxuXHJcbiAgICAgICAgICAgIHBvZW0gPSBhd2FpdCBQb2VtLmZpbmRPbmUoe2F1dGhvcjpcIlhpYW9taW5nXCJ9KTtcclxuICAgICAgICAgICAgdmFsaWRJRCA9IHBvZW0uX2lkO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIGRlc2NyaWJlKFwiR0VUIC9wb2Vtc1wiLCAoKSA9PiB7XHJcbiAgICAgICAgaXQoXCJzaG91bGQgcmV0dXJuIGFsbCB0aGUgcG9lbXNcIiwgZG9uZSA9PiB7XHJcbiAgICAgICAgICAgIHJlcXVlc3Qoc2VydmVyKVxyXG4gICAgICAgICAgICAgICAgLmdldChcIi9wb2Vtc1wiKVxyXG4gICAgICAgICAgICAgICAgLnNldChcIkFjY2VwdFwiLCBcImFwcGxpY2F0aW9uL2pzb25cIilcclxuICAgICAgICAgICAgICAgIC5leHBlY3QoXCJDb250ZW50LVR5cGVcIiwgL2pzb24vKVxyXG4gICAgICAgICAgICAgICAgLmV4cGVjdCgyMDApXHJcbiAgICAgICAgICAgICAgICAuZW5kKChlcnIsIHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHJlcy5ib2R5KS50by5iZS5hKFwiYXJyYXlcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdChyZXMuYm9keS5sZW5ndGgpLnRvLmVxdWFsKDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gXy5tYXAocmVzLmJvZHksIHBvZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdGl0bGU6IHBvZW0udGl0bGV9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG8uZGVlcC5pbmNsdWRlKHsgdGl0bGU6IFwiT24gY2hpbGRyZW5cIiB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG8uZGVlcC5pbmNsdWRlKHsgdGl0bGU6IFwiTXlQb2VtXCIgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvbmUoZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIGRlc2NyaWJlKFwiR0VUIC9wb2Vtcy86aWRcIiwgKCkgPT4ge1xyXG4gICAgICAgIGRlc2NyaWJlKFwid2hlbiB0aGUgaWQgaXMgdmFsaWRcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBpdChcInNob3VsZCByZXR1cm4gdGhlIG1hdGNoaW5nIHBvZW1cIiwgZG9uZSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0KHNlcnZlcilcclxuICAgICAgICAgICAgICAgICAgICAuZ2V0KGAvcG9lbXMvJHt2YWxpZElEfWApXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldChcIkFjY2VwdFwiLCBcImFwcGxpY2F0aW9uL2pzb25cIilcclxuICAgICAgICAgICAgICAgICAgICAuZXhwZWN0KFwiQ29udGVudC1UeXBlXCIsIC9qc29uLylcclxuICAgICAgICAgICAgICAgICAgICAuZXhwZWN0KDIwMClcclxuICAgICAgICAgICAgICAgICAgICAuZW5kKChlcnIsIHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3QocmVzLmJvZHlbMF0pLnRvLmhhdmUucHJvcGVydHkoXCJhdXRob3JcIixcIlhpYW9taW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb25lKGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRlc2NyaWJlKFwid2hlbiB0aGUgaWQgaXMgaW52YWxpZFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGl0KFwic2hvdWxkIHJldHVybiB0aGUgTk9UIGZvdW5kIG1lc3NhZ2VcIiwgZG9uZSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0KHNlcnZlcilcclxuICAgICAgICAgICAgICAgICAgICAuZ2V0KFwiL3BvZW1zLzk5OTlcIilcclxuICAgICAgICAgICAgICAgICAgICAuc2V0KFwiQWNjZXB0XCIsIFwiYXBwbGljYXRpb24vanNvblwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5leHBlY3QoXCJDb250ZW50LVR5cGVcIiwgL2pzb24vKVxyXG4gICAgICAgICAgICAgICAgICAgIC5leHBlY3QoMjAwKVxyXG4gICAgICAgICAgICAgICAgICAgIC5lbmQoKGVyciwgcmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdChyZXMuYm9keS5tZXNzYWdlKS5lcXVhbHMoXCJQb2VtIE5PVCBGb3VuZCFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvbmUoZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIGRlc2NyaWJlKFwiUE9TVCAvcG9lbXMvbG9naW5cIiwgKCkgPT4ge1xyXG4gICAgICAgIGRlc2NyaWJlKFwid2hlbiB0aGUgdGl0bGUgYW5kIGF1dGhvciBhcmUgdmFsaWRcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBpdChcInNob3VsZCByZXR1cm4gY29uZmlybWF0aW9uIG1lc3NhZ2UgYW5kIHVwZGF0ZSBkYXRhc3RvcmVcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcG9lbSA9IHtcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJGaXJQb2VtXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgYXV0aG9yOiBcIlhpYW9Ib25nXCJcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdChzZXJ2ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnBvc3QoXCIvcG9lbXNcIilcclxuICAgICAgICAgICAgICAgICAgICAuc2VuZChwb2VtKVxyXG4gICAgICAgICAgICAgICAgICAgIC5leHBlY3QoMjAwKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdChyZXMuYm9keS5tZXNzYWdlKS5lcXVhbHMoXCJQb2VtIFN1Y2Nlc3NmdWxseSBBZGRlZCFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkSUQgPSByZXMuYm9keS5kYXRhLl9pZDtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGFmdGVyKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0KHNlcnZlcilcclxuICAgICAgICAgICAgICAgICAgICAuZ2V0KGAvcG9lbXMvJHt2YWxpZElEfWApXHJcbiAgICAgICAgICAgICAgICAgICAgLmV4cGVjdCgyMDApXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHJlcy5ib2R5WzBdKS50by5oYXZlLnByb3BlcnR5KFwiYXV0aG9yXCIsIFwiWGlhb0hvbmdcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRlc2NyaWJlKFwid2hlbiB0aGUgYXV0aG9yIG5vdCBwcm92aWRlZFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGl0KFwic2hvdWxkIHJldHVybiBjb25maXJtYXRpb24gbWVzc2FnZSBhbmQgdXBkYXRlIGRhdGFzdG9yZVwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwb2VtID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkZpcnN0UG9lbVwiXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3Qoc2VydmVyKVxyXG4gICAgICAgICAgICAgICAgICAgIC5wb3N0KFwiL3BvZW1zXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNlbmQocG9lbSlcclxuICAgICAgICAgICAgICAgICAgICAuZXhwZWN0KDIwMClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3QocmVzLmJvZHkubWVzc2FnZSkuZXF1YWxzKFwiUG9lbSBTdWNjZXNzZnVsbHkgQWRkZWQhXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZElEID0gcmVzLmJvZHkuZGF0YS5faWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBhZnRlcigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdChzZXJ2ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmdldChgL3BvZW1zLyR7dmFsaWRJRH1gKVxyXG4gICAgICAgICAgICAgICAgICAgIC5leHBlY3QoMjAwKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdChyZXMuYm9keVswXSkudG8uaGF2ZS5wcm9wZXJ0eShcInRpdGxlXCIsIFwiRmlyc3RQb2VtXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgZGVzY3JpYmUoXCJERUxFVEUgL3BvZW1zXCIsICgpID0+IHtcclxuICAgICAgICBkZXNjcmliZShcIndoZW4gdGhlIGlkIGlzIHZhbGlkXCIsICgpID0+IHtcclxuICAgICAgICAgICAgaXQoXCJzaG91bGQgcmV0dXJuIGNvbmZpcm1hdGlvbiBtZXNzYWdlIGFuZCBkZWxldGUgZGF0YXN0b3JlXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0KHNlcnZlcilcclxuICAgICAgICAgICAgICAgICAgICAuZGVsZXRlKGAvcG9lbXMvJHt2YWxpZElEfWApXHJcbiAgICAgICAgICAgICAgICAgICAgLmV4cGVjdCgyMDApXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHJlcy5ib2R5Lm1lc3NhZ2UpLmVxdWFscygnUG9lbSBTdWNjZXNzZnVsbHkgRGVsZXRlZCEnKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGFmdGVyKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0KHNlcnZlcilcclxuICAgICAgICAgICAgICAgICAgICAuZ2V0KGAvcG9lbXMvJHt2YWxpZElEfWApXHJcbiAgICAgICAgICAgICAgICAgICAgLmV4cGVjdCgyMDApXHJcbiAgICAgICAgICAgICAgICAgICAgLmV4cGVjdChbXSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRlc2NyaWJlKFwid2hlbiB0aGUgaWQgaXMgaW52YWxpZFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGl0KFwic2hvdWxkIHJldHVybiBjb25maXJtYXRpb24gbWVzc2FnZSBhbmQgZGVsZXRlIGRhdGFzdG9yZVwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdChzZXJ2ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmRlbGV0ZShcIi9wb2Vtcy8xMTAwMDAxXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmV4cGVjdCgyMDApXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0KHJlcy5ib2R5Lm1lc3NhZ2UpLmVxdWFscygnUG9lbSBOT1QgREVMRVRFRCEnKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufSk7XHJcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "poemsTest.js"
      ],
      "names": [
        "chai",
        "require",
        "server",
        "expect",
        "request",
        "_",
        "validID",
        "Poem",
        "describe",
        "beforeEach",
        "deleteMany",
        "poem",
        "title",
        "author",
        "save",
        "findOne",
        "_id",
        "error",
        "console",
        "log",
        "it",
        "done",
        "get",
        "set",
        "end",
        "err",
        "res",
        "body",
        "to",
        "be",
        "a",
        "length",
        "equal",
        "result",
        "map",
        "deep",
        "include",
        "e",
        "have",
        "property",
        "message",
        "equals",
        "post",
        "send",
        "then",
        "data",
        "after",
        "delete"
      ],
      "mappings": "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",
      "sourceRoot": "D:\\Webstorm\\poetryWeb\\test\\functional\\api",
      "sourcesContent": [
        "const chai = require(\"chai\");\r\nconst server = require(\"../../../bin/www\");\r\nconst expect = chai.expect;\r\nconst request = require(\"supertest\");\r\nconst _ = require(\"lodash\");\r\nlet validID;\r\nlet Poem = require(\"../../../models/poems\");\r\n\r\ndescribe(\"Poems\", () => {\r\n    beforeEach(async () => {\r\n        try {\r\n            await Poem.deleteMany({});\r\n            let poem = new Poem();\r\n            poem.title = \"On children\";\r\n            poem.author = \"Kahlil Gibran\"\r\n            await poem.save();\r\n\r\n            poem = new Poem();\r\n            poem.title = \"MyPoem\";\r\n            poem.author = \"Xiaoming\"\r\n            await poem.save();\r\n\r\n            poem = await Poem.findOne({author:\"Xiaoming\"});\r\n            validID = poem._id;\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    });\r\n    describe(\"GET /poems\", () => {\r\n        it(\"should return all the poems\", done => {\r\n            request(server)\r\n                .get(\"/poems\")\r\n                .set(\"Accept\", \"application/json\")\r\n                .expect(\"Content-Type\", /json/)\r\n                .expect(200)\r\n                .end((err, res) => {\r\n                    try{\r\n                        expect(res.body).to.be.a(\"array\");\r\n                        expect(res.body.length).to.equal(2);\r\n                        let result = _.map(res.body, poem => {\r\n                            return { title: poem.title};\r\n                        });\r\n                        expect(result).to.deep.include({ title: \"On children\" });\r\n                        expect(result).to.deep.include({ title: \"MyPoem\" });\r\n                        done();\r\n                    } catch (e) {\r\n                        done(e);\r\n                    }\r\n                });\r\n        });\r\n    });\r\n    describe(\"GET /poems/:id\", () => {\r\n        describe(\"when the id is valid\", () => {\r\n            it(\"should return the matching poem\", done => {\r\n                request(server)\r\n                    .get(`/poems/${validID}`)\r\n                    .set(\"Accept\", \"application/json\")\r\n                    .expect(\"Content-Type\", /json/)\r\n                    .expect(200)\r\n                    .end((err, res) => {\r\n                        expect(res.body[0]).to.have.property(\"author\",\"Xiaoming\");\r\n                        done(err);\r\n                    });\r\n            });\r\n        });\r\n        describe(\"when the id is invalid\", () => {\r\n            it(\"should return the NOT found message\", done => {\r\n                request(server)\r\n                    .get(\"/poems/9999\")\r\n                    .set(\"Accept\", \"application/json\")\r\n                    .expect(\"Content-Type\", /json/)\r\n                    .expect(200)\r\n                    .end((err, res) => {\r\n                        expect(res.body.message).equals(\"Poem NOT Found!\");\r\n                        done(err);\r\n                    });\r\n            });\r\n        });\r\n    });\r\n    describe(\"POST /poems/login\", () => {\r\n        describe(\"when the title and author are valid\", () => {\r\n            it(\"should return confirmation message and update datastore\", () => {\r\n                const poem = {\r\n                    title: \"FirPoem\",\r\n                    author: \"XiaoHong\"\r\n                };\r\n                return request(server)\r\n                    .post(\"/poems\")\r\n                    .send(poem)\r\n                    .expect(200)\r\n                    .then(res => {\r\n                        expect(res.body.message).equals(\"Poem Successfully Added!\");\r\n                        validID = res.body.data._id;\r\n                    });\r\n            });\r\n            after(() => {\r\n                return request(server)\r\n                    .get(`/poems/${validID}`)\r\n                    .expect(200)\r\n                    .then(res => {\r\n                        expect(res.body[0]).to.have.property(\"author\", \"XiaoHong\");\r\n                    });\r\n            });\r\n        });\r\n        describe(\"when the author not provided\", () => {\r\n            it(\"should return confirmation message and update datastore\", () => {\r\n                const poem = {\r\n                    title: \"FirstPoem\"\r\n                };\r\n                return request(server)\r\n                    .post(\"/poems\")\r\n                    .send(poem)\r\n                    .expect(200)\r\n                    .then(res => {\r\n                        expect(res.body.message).equals(\"Poem Successfully Added!\");\r\n                        validID = res.body.data._id;\r\n                    });\r\n            });\r\n            after(() => {\r\n                return request(server)\r\n                    .get(`/poems/${validID}`)\r\n                    .expect(200)\r\n                    .then(res => {\r\n                        expect(res.body[0]).to.have.property(\"title\", \"FirstPoem\");\r\n                    });\r\n            });\r\n        });\r\n    });\r\n    describe(\"DELETE /poems\", () => {\r\n        describe(\"when the id is valid\", () => {\r\n            it(\"should return confirmation message and delete datastore\", () => {\r\n                return request(server)\r\n                    .delete(`/poems/${validID}`)\r\n                    .expect(200)\r\n                    .then(res => {\r\n                        expect(res.body.message).equals('Poem Successfully Deleted!');\r\n                    });\r\n            });\r\n            after(() => {\r\n                return request(server)\r\n                    .get(`/poems/${validID}`)\r\n                    .expect(200)\r\n                    .expect([]);\r\n            });\r\n        });\r\n        describe(\"when the id is invalid\", () => {\r\n            it(\"should return confirmation message and delete datastore\", () => {\r\n                return request(server)\r\n                    .delete(\"/poems/1100001\")\r\n                    .expect(200)\r\n                    .then(res => {\r\n                        expect(res.body.message).equals('Poem NOT DELETED!');\r\n                    });\r\n            });\r\n        });\r\n    });\r\n});\r\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1572957896652
  }
}